{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/Share.vue?fc48","webpack:///./src/assets/viewport/front.png","webpack:///./src/assets/icons/hideCanvas.svg","webpack:///./src/components/ObjectManager.vue?f8ec","webpack:///./src/components/MenuButtons/ExportUSDZ.vue?616a","webpack:///./src/assets/icons/Canvas-Head.svg","webpack:///./src/assets/viewport/top.png","webpack:///./src/components/ToolSelector.vue?35ca","webpack:///./src/assets/icons/Canvas-Plane.svg","webpack:///./src/components/Canvas.vue?3458","webpack:///./src/assets/icons/undo.svg","webpack:///./src/assets/icons/Canvas-Sphere.svg","webpack:///./src/components/Layers.vue?90bb","webpack:///./src/components/Modal.vue?1067","webpack:///./src/components/ModalContent/ExportForBlender.vue?01a3","webpack:///./src/App.vue","webpack:///./src/components/InfiniteGridHelper.js","webpack:///./src/components/Input.vue","webpack:///./src/components/Canvas.vue","webpack:///./src/components/transformControls.js","webpack:///./src/components/DraggableWindow.vue","webpack:///./src/components/DraggableWindow.vue?4329","webpack:///./src/components/Canvas.vue?9ef0","webpack:///./src/components/mirror.js","webpack:///./src/components/UndoRedo.vue","webpack:///./src/components/UndoRedo.vue?48dc","webpack:///./src/components/erase.js","webpack:///./src/components/draw.js","webpack:///./src/components/animate.js","webpack:///./src/components/select.js","webpack:///./src/components/Input.vue?2cde","webpack:///./src/components/ToolSelector.vue","webpack:///./src/components/ToolSelector.vue?91e2","webpack:///./src/components/ViewportCube.vue","webpack:///./src/components/ViewportCube.vue?d82a","webpack:///./src/components/LineSettings.vue","webpack:///./src/components/LineSliders.vue","webpack:///./src/components/LineSliders.vue?d738","webpack:///./src/components/LineSettings.vue?c1ce","webpack:///./src/components/Share.vue","webpack:///./src/components/MenuButtons/ToggleWindow.vue","webpack:///./src/components/MenuButtons/ToggleWindow.vue?4f5b","webpack:///./src/components/MenuButtons/Save.vue","webpack:///./src/components/MenuButtons/Save.vue?0f12","webpack:///./src/components/MenuButtons/Load.vue","webpack:///./src/components/MenuButtons/Load.vue?94e6","webpack:///./src/components/MenuButtons/ExportForBlender.vue","webpack:///./src/components/MenuButtons/ExportForBlender.vue?6ab3","webpack:///./src/components/MenuButtons/ExportForProcreate.vue","webpack:///./src/components/MenuButtons/ExportForProcreate.vue?7c76","webpack:///./src/components/MenuButtons/StartPreview.vue","webpack:///./src/components/MenuButtons/StartPreview.vue?2b3f","webpack:///./src/components/MenuButtons/ExportUSDZ.vue","webpack:///./src/components/TubeGeometryWithVariableWidth.js","webpack:///./src/components/convertMeshlineToGeometry.js","webpack:///./src/components/MenuButtons/ExportUSDZ.vue?2105","webpack:///./src/components/MenuButtons/ExportGLB.vue","webpack:///./src/components/MenuButtons/ExportGLB.vue?5942","webpack:///./src/components/MenuButtons/ExportHTML.vue","webpack:///./src/components/MenuButtons/ExportHTML.vue?9587","webpack:///./src/components/Share.vue?9ddb","webpack:///./src/components/ShapeSelector.vue","webpack:///./src/components/ShapeSelector.vue?c024","webpack:///./src/components/Modal.vue","webpack:///./src/components/ModalContent/Welcome.vue","webpack:///./src/components/ModalContent/Welcome.vue?077f","webpack:///./src/components/ModalContent/Feedback.vue","webpack:///./src/components/ModalContent/Feedback.vue?7c04","webpack:///./src/components/ModalContent/ExportForBlender.vue","webpack:///./src/components/ModalContent/ExportForBlender.vue?0856","webpack:///./src/components/ModalContent/ExportForProcreate.vue","webpack:///./src/components/ModalContent/ExportForProcreate.vue?3a30","webpack:///./src/components/ModalContent/Tutorial.vue","webpack:///./src/components/ModalContent/Tutorial.vue?6d16","webpack:///./src/components/ModalContent/Survey.vue","webpack:///./src/components/ModalContent/Survey.vue?bb90","webpack:///./src/components/ModalContent/BrushLibrary.vue","webpack:///./src/components/ModalContent/BrushLibrary.vue?31a0","webpack:///./src/components/Modal.vue?9db4","webpack:///./src/components/VideoExportPreview.vue","webpack:///./src/components/VideoExportPreview.vue?4d41","webpack:///./src/components/SceneSettings.vue","webpack:///./src/components/SceneSettings.vue?2763","webpack:///./src/components/ColorPalette.vue","webpack:///./src/components/ColorPalette.vue?b8e2","webpack:///./src/components/SymmetrySettings.vue","webpack:///./src/components/SymmetrySettings.vue?1141","webpack:///./src/components/Layers.vue","webpack:///./src/components/Layers.vue?639e","webpack:///./src/components/ObjectManager.vue","webpack:///./src/components/ObjectManager.vue?dfbb","webpack:///./src/components/TransformToolbar.vue","webpack:///./src/components/TransformToolbar.vue?ff3f","webpack:///./src/components/TwoDShapes.vue","webpack:///./src/components/TwoDShapes.vue?3024","webpack:///./src/App.vue?dfb6","webpack:///./src/assets/icons/Canvas-Cube.svg","webpack:///./src/assets/viewport/bottom.png","webpack:///./src/assets/icons/snapOn.svg","webpack:///./src/main.js","webpack:///./src/components/ShapeSelector.vue?4805","webpack:///./src/components/SceneSettings.vue?c298","webpack:///./src/components/MenuButtons/ExportHTML.vue?ace0","webpack:///./src/assets/icons/draw.svg","webpack:///./src/assets/icons/checkbox.svg","webpack:///./src/assets/viewport/right.png","webpack:///./src/App.vue?b580","webpack:///./src/assets/viewport/back.png","webpack:///./src/components/UndoRedo.vue?720c","webpack:///./src/assets/icons/redo.svg","webpack:///./src/components/ModalContent/Feedback.vue?f18e","webpack:///./src/components/ModalContent/Survey.vue?ca7d","webpack:///./src/components/ModalContent/Welcome.vue?ba6f","webpack:///./src/components/DraggableWindow.vue?dc5c","webpack:///./src/assets/icons/checkbox-checked.svg","webpack:///./src/components/ModalContent/Tutorial.vue?c1be","webpack:///./src/components/LineSliders.vue?4ed3","webpack:///./src/components/MenuButtons/ToggleWindow.vue?adf7","webpack:///./src/components/ModalContent/BrushLibrary.vue?ef02","webpack:///./src/assets/icons/unlockControls.svg","webpack:///./src/components/ColorPalette.vue?21e9","webpack:///./src/assets/icons/Canvas-Custom.svg","webpack:///./src/assets/icons/scale.svg","webpack:///./src/components/Input.vue?ce60","webpack:///./src/assets/icons/share.svg","webpack:///./src/components/ModalContent/ExportForProcreate.vue?ffac","webpack:///./src/assets/icons/reset.svg","webpack:///./src/components/MenuButtons/ExportGLB.vue?30fd","webpack:///./src/assets/viewport/left.png","webpack:///./src/assets/icons/lockControls.svg","webpack:///./src/assets/icons/snapOff.svg","webpack:///./src/components/VideoExportPreview.vue?ff48","webpack:///./src/components/TransformToolbar.vue?19f6","webpack:///./src/assets/icons/Cursor.svg","webpack:///./src/components/SymmetrySettings.vue?aebe","webpack:///./src/assets/icons/Canvas-Cylinder.svg","webpack:///./src/components/LineSettings.vue?7929","webpack:///./src/assets/icons/showCanvas.svg","webpack:///./src/assets/icons/erase.svg","webpack:///./src/assets/icons/View_in_AR.svg","webpack:///./src/components/TwoDShapes.vue?781f","webpack:///./src/assets/icons/translate.svg","webpack:///./src/components/ViewportCube.vue?007c"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","show","previewing","setPreview","modalProp","setModal","applyPreset","quaternion","cameraResetDisabled","reopenTrigger","windowTriggers","view","is-open","windowStates","onWindowClose","uiVisible","ref","setSelectedTool","toggleProperties","toggleScene","selectedTool","tool","tools","initialX","windowPositions","x","undefined","initialY","y","toggleWindow","toggleAR","isArActive","arActive","visible","twoDShapes","onAddCanvasShape","setStroke","setFill","forceVisible","propertiesVisible","properties","history","setMouseCoordinates","mirror","stroke","fill","radial","sectors","radial-axis","radialAxis","toolEnabled","localSymmetry","setSelectedCanvasShape","setToolEnabled","selectedShape","canvasShape","mouse","canvas","loadCustomModelInCanvas","setCanvasMaterial","shapes","scene","colors","applyColor","symmetry","$event","local-symmetry","layers","onLayerAdd","onLayerDelete","onLayerSelect","onLayerChange","onLayerDuplicate","objectManager","top","transformToolbar","left","display","selectionPosition","position","InfiniteGridHelper","size1","size2","color","distance","axes","color2","distanceNear","THREE","planeAxes","substr","geometry","material","side","uniforms","uSize1","uSize2","uColor","uColor2","uDistance","uDistanceNear","transparent","vertexShader","fragmentShader","extensions","derivatives","grid","frustumCulled","handleInput","id","displayTouches","touches","item","clientX","class","style","width","height","viewBox","xmlns","src","alt","title","isOpen","$emit","toggleTransformMode","disabled","transformationEnabled","toggleControls","toggleVisibility","snap","toggleSnap","resetTransformation","transformationResetDisabled","_raycaster","Raycaster","_tempVector","Vector3","_tempVector2","_tempQuaternion","Quaternion","_unit","X","Y","Z","_changeEvent","type","_mouseDownEvent","_mouseUpEvent","_objectChangeEvent","TransformControls","camera","domElement","console","warn","document","touchAction","_gizmo","TransformControlsGizmo","add","_plane","TransformControlsPlane","scope","propName","defaultValue","propValue","set","dispatchEvent","worldPosition","worldPositionStart","worldQuaternion","worldQuaternionStart","cameraPosition","cameraQuaternion","pointStart","pointEnd","rotationAxis","rotationAngle","eye","_offset","_startNorm","_endNorm","_cameraScale","_parentPosition","_parentQuaternion","_parentQuaternionInv","_parentScale","_worldScaleStart","_worldQuaternionInv","_worldScale","_positionStart","_quaternionStart","_scaleStart","_getPointer","getPointer","_onPointerDown","onPointerDown","_onPointerHover","onPointerHover","_onPointerMove","onPointerMove","_onPointerUp","onPointerUp","addEventListener","ownerDocument","this","updateMatrixWorld","parent","error","matrixWorld","decompose","copy","invert","sub","normalize","pointer","dragging","setFromCamera","intersect","intersectObjectWithRay","picker","axis","button","planeIntersect","space","rotationSnap","rotation","Math","round","z","scale","point","applyQuaternion","indexOf","divide","translationSnap","search","setFromMatrixPosition","dot","multiply","scaleSnap","ROTATION_SPEED","distanceTo","angleTo","cross","setFromAxisAngle","removeEventListener","traverse","child","dispose","size","Object3D","event","pointerLockElement","rect","getBoundingClientRect","clientY","enabled","pointerType","pointerHover","pointerDown","pointerMove","pointerUp","raycaster","includeInvisible","allIntersections","intersectObject","isTransformControls","_tempEuler","Euler","_alignVector","_zeroVector","_lookAtMatrix","Matrix4","_tempQuaternion2","_identityQuaternion","_dirVector","_tempMatrix","_unitX","_unitY","_unitZ","_v1","_v2","_v3","gizmoMaterial","MeshBasicMaterial","depthTest","depthWrite","fog","toneMapped","gizmoLineMaterial","LineBasicMaterial","matInvisible","clone","opacity","matHelper","setHex","matRed","DoubleSide","matRedArrow","matGreen","matGreenArrow","matBlue","matBlueArrow","matRedTransparent","matGreenTransparent","matBlueTransparent","matWhiteTransparent","matYellowTransparent","matYellow","matGray","arrowGeometry","CylinderGeometry","translate","arrowPickerGeometry","scaleHandleGeometry","BoxGeometry","lineGeometry","BufferGeometry","setAttribute","Float32BufferAttribute","lineGeometry2","CircleGeometry","radius","RingGeometry","PI","rotateY","rotateX","TranslateHelperGeometry","gizmoTranslate","Mesh","pickerTranslate","helperTranslate","START","OctahedronGeometry","END","DELTA","Line","gizmoRotate","helperRotate","AXIS","pickerRotate","TorusGeometry","gizmoScale","XY","YZ","XZ","XYZ","pickerScale","helperScale","gizmoCombined","XT","XR","YT","YR","ZT","ZR","pickerCombined","helperCombined","setupGizmo","gizmoMap","gizmo","tag","updateMatrix","tempGeometry","applyMatrix4","matrix","helper","force","handles","concat","children","handle","renderOrder","factor","isOrthographicCamera","bottom","zoom","min","tan","fov","multiplyScalar","AXIS_FLIP_TRESHOLD","PLANE_HIDE_TRESHOLD","abs","setFromRotationMatrix","lookAt","atan2","multiplyQuaternions","showX","showY","showZ","_color","_opacity","setFromEuler","isTransformControlsGizmo","PlaneGeometry","wireframe","isTransformControlsPlane","minimized","currentY","currentX","startDrag","startDragTouch","toggleMinimize","close","$attrs","userClosed","inheritAttrs","props","String","default","Number","Boolean","startOpen","isDragging","dragOffsetX","dragOffsetY","methods","target","closest","onDrag","stopDrag","touch","onDragTouch","stopDragTouch","preventDefault","watch","val","__exports__","currentShape","canvasMirror","headGeometry","components","DraggableWindow","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","emissive","emissiveIntensity","startPosition","startQuaternion","startScale","emits","getPosition","$refs","win","loadCustomModel","payload","url","loader","GLTFLoader","load","gltf","model","userData","customId","box","setFromObject","center","getCenter","selectObject","renderer","render","addPrimitive","geo","mat","mesh","charAt","toUpperCase","addShape","Date","now","detach","attach","setUp","vm","raycastCanvas","getWorldPosition","getWorldQuaternion","getWorldScale","w","matrixWorldNeedsUpdate","intersects","intersectObjects","hitObject","rootShape","curr","includes","setUpMirror","makeScale","removeMirror","remove","setMaterial","newMat","texture","matcap","isMesh","isGroup","found","find","oldPos","oldQuat","oldScale","idx","needsUpdate","updateMirrorOf","obj","activeScene","localCanvas","forEach","mirrors","Array","isArray","mirrorData","mirroredObject","getObjectByProperty","uuid","mInv","sx","sy","sz","mFlip","transform","raycast","MeshLineRaycast","mirrorParent","mirrorAxisFromParent","eraseMirrorOf","innerHeight","start-open","undo","undoDisabled","redo","redoDisabled","undoRedoComponent","undoManager","updateUi","setTool","hasUndo","hasRedo","mounted","erase","e","GPUPickHelper","pickingTexture","pixelBuffer","Uint8Array","pickedObject","pickedObjectSavedColor","x1","y1","x2","y2","coordinatesArray","dx","dy","err","e2","cssPosition","pixelRatio","getPixelRatio","setViewOffset","getContext","drawingBufferWidth","drawingBufferHeight","setRenderTarget","clearViewOffset","readRenderTargetPixels","intersectedObject","idToObject","setSize","calcPointsInBetween","eraser","pscene","background","mask","lw","lineWidth","cloneMaterial","MeshLineMaterial","sizeAttenuation","cx","cy","pickedObjects","pickArea","deleteObject","vertices","points","mirrorOn","map","show_fill","draw","fromVertices","$","ctx","onStart","resetPicking","setupPicking","start","onMove","move","onEnd","end","onCancel","generateBrushTexture","materialType","createElement","fillStyle","fillRect","globalCompositeOperation","gradient","createLinearGradient","addColorStop","imgData","createImageData","random","tempC","putImageData","drawImage","wrapS","wrapT","getActiveLayerGroup","show_stroke","line","MeshLine","Float32Array","alphaTest","blending","repeat","textureScale","resolution","innerWidth","dashArray","dashOffset","dashRatio","brushType","bufferPoints","smoothing","taper","wiggle","animationSpeed","shape","fillGeometry","fillVertices","uvsX","uvsY","uvs","triangles","Uint16Array","Earcut","triangulate","attributes","array","face","setIndex","fillMaterial","fillMesh","drawingScene","split","currentObjects","nextObjects","unproject","addVertex","layerGroup","clear","verticesNeedsUpdate","boundingSphere","setGeometry","angleStep","createRadialCopies","targetMesh","angle","rotMatrix","makeRotationX","makeRotationZ","makeRotationY","rotateZ","vert","planeVector","cameraVector","reverse","computeBoundingSphere","autoClear","end_internal","v3","v4","nt","sign","normal","is","wiggleVal","wx","wy","wz","start1","stop1","start2","stop2","appendToBuffer","pt","getAveragePoint","Float32Concat","count","uvLowestX","uvHighestX","max","uvLowestY","uvHighestY","u","uv","index","clearDepth","first","second","firstLength","offset","len","totalX","totalY","totalZ","totalW","setPoints","minWidth","baseWidth","tailLength","onEnd_internal","cancel","verticesArray","isVector3","from","float32Vertices","fromArray","setUvs","floor","_x","_y","_z","_w","lg","updateStroke","assign","setStyle","brushTexture","alphaMap","useMap","updateFill","animateLines","delta","animated","updateMesh","loop","animate","requestAnimationFrame","startAnimating","stopAnimating","select","dragged","transformMode","vertexSelection","cssStart","cssEnd","z1","z2","z3","z4","bb","boundingBox","project","selectedObjects","boundingBoxPoints","getObjectBoundingBoxPoints","pointInRect","k","selection","selected","undoRedoSelection","undoRedoMatrix","selector","controls","group","params","threshold","tx","ty","log","objectsInRect","Set","deselect","select_internal","previouslySelected","toggleSelectionColor","startingTransform","setTransformToolbarDisplay","update","setSelectionPosition","endPosition","endQuaternion","endScale","equals","transfromToolbarPosition","calculateTransfromToolbarPosition","setTransformToolbarPosition","location","computeBoundingBox","divideScalar","element","selectedObj","bool","deselect_internal","previousMatrix","previousSelectedArray","sourceObjects","original","duplicateArray","generateUUID","mirrorAxis","prevSel","duplicate","transforming","ctrlKey","previousSelection","down","touchLengthHistory","multiTouched","eventCancelled","movingCanvas","isTransformingSelection","updateMouseCoordinates","changedTouches","pageX","pageY","clickStartTime","startCx","startCy","hitCanvas","shiftKey","currentCx","currentCy","currentAngle","snapInterval","snappedAngle","sqrt","constrainedDx","cos","constrainedDy","sin","constrainedCx","constrainedCy","clickDuration","dist","pow","toggleTopFrontView","then","undoRedo","getTarget","pos","isTop","rotateTo","hash","substring","brushes","brush","selectPreset","icon","settings","strokeWidth","strokeColor","g","b","fillColor","emit","viewPortRenderer","viewPortScene","viewPortCamera","resetCamera","dragStartPosition","lastDragPosition","getElementById","init","antialias","alpha","setPixelRatio","devicePixelRatio","addViewPortCube","right","front","back","materials","cube","rotate","deltaX","deltaY","PI_2","speed","theta","phi","evalFaceIndexAndRepositionCamera","adj","dampingFactor","setLookAt","setTimeout","onTapStart","onTapMove","onTapEnd","faceIndex","zoomTo","setRotationFromQuaternion","active","setStrokeColor","setStrokeActive","setStrokeWidth","step","brushMaterial","setFillColor","setFillActive","fillOpacity","cssProps","setActive","toLowerCase","hue","saturation","brightness","computed","calcRadius","updateColor","h","v","f","q","arguments","LineSliders","emitStroke","emitFill","updateSettings","label","checked","showModal","isSafari","startPreview","required","exportToJson","json","dataStr","encodeURIComponent","JSON","stringify","filename","prompt","el","click","importFromJson","text","file","input","body","appendChild","onchange","onReaderLoad","parse","drawLine","files","reader","FileReader","onload","readAsText","showExportModal","exportForAr","rel","download","sceneUSDZ","TubeBufferGeometry","path","tubularSegments","radialSegments","closed","parameters","frames","computeFrenetFrames","tangents","normals","binormals","vertex","Vector2","P","indices","generateBufferData","generateSegment","generateUVs","generateIndices","getPointAt","N","B","a","convertMeshlineToGeometry","tubeMaterial","pathBase","tubeGeometry","flatShading","roughness","shininess","metalness","convertMeshlineFillToGeometry","edges","fillMeshFlipped","fillFlippedGeometry","fillMeshMaterial","arr","lightbox","viewInAr","exporter","USDZExporter","arraybuffer","blob","Blob","URL","createObjectURL","exportToGltf","sceneGLTF","save","saveString","saveArrayBuffer","buffer","link","href","GLTFExporter","ArrayBuffer","output","binary","ToggleWindow","Save","Load","ExportForBlender","ExportForProcreate","StartPreview","ExportUSDZ","ExportGLB","ExportHTML","hide","windowName","navigator","vendor","userAgent","shapeOption","selectShape","customModels","selectCustomModel","fileInput","accept","onFileChange","matcaps","currentMaterial","selectMaterial","image","modelId","toString","hideModal","handleSetPreset","exportToGp","applyMatrix","for","mergeLines","checkFills","exportToUSDZ","install","clock","cameraControls","sceneExport","rendererUSDZ","cameraUSDZ","previewUSDZ","updateProjectionMatrix","draggingDampingFactor","mouseButtons","ACTION","ROTATE","wheel","code","TRUCK","middle","DOLLY","ZOOM","one","TOUCH_ROTATE","two","TOUCH_ZOOM_ROTATE","three","TOUCH_DOLLY_TRUCK","maxZoom","minZoom","flipFace","onWindowResize","aspect","clientWidth","clientHeight","canvasBounds","context","lineRenderOrder","animtateSceneUSDZ","getDelta","hasCameraControlsUpdated","geometries","newObj","mergedGeometry","cells","ceil","uvs_length","mergedUvs","keys","prop","unmounted","frameborder","allow","countDown","localStorage","getItem","parseInt","tut02","marginheight","marginwidth","Welcome","Feedback","Tutorial","Survey","BrushLibrary","recording","startRecording","currentLength","startAzimuthAngle","polarAngle","easeInOutQuad","easeInOutQuadYoyo","pop","easing","DEG2RAD","encoder","buf","readPixels","RGBA","UNSIGNED_BYTE","halfHeight","bytesPerRow","temp","topOffset","bottomOffset","subarray","copyWithin","addFrameRgba","finalize","uint8Array","FS","readFile","outputFilename","delete","normalizeRotations","initialize","azimuthAngle","anchor","Event","enable","backgroundColor","updateBackground","toggleFog","fogVisible","handleFileChange","toggleHdriActive","hdriActive","toggleHdriBackground","hdriBackgroundVisible","toggleGrid","gridVisible","gridColor","updateGrid","gridSize","gridDivisions","divisionsColor","fadeDistance","fadeDistanceNear","toggleInfiniteGrid","infiniteGrid","sceneEnvironment","created","gridHelper","infiniteGridHelper","updateFog","isHDR","endsWith","RGBELoader","setDataType","pmremGenerator","compileEquirectangularShader","envMap","fromEquirectangular","updateEnvironment","mapping","environment","beforeUnmount","colorGroups","hex","selectColor","rgb","hexToRgb","exec","isAxisActive","toggleAxis","toggleLocal","toggleRadial","setRadialAxis","updateSectors","current","replace","addLayer","deleteLayer","duplicateLayer","layer","activeLayerId","selectLayer","editingLayerId","stopEditing","startEditing","updateLayerOpacity","locked","nextLayerId","lockLayers","mergeOnExport","newLayer","unshift","findIndex","deletedLayer","newIndex","originalLayerId","layerId","newOpacity","$nextTick","nameInput","focus","toggleLockLayers","lockAll","isSelected","getObjectName","getObjectType","getObjectColor","getObjectOpacity","updateOpacity","deleteSelectedObject","handleImageUpload","saveState","getHistory","state","sIndex","restoreState","deleteState","currentSelection","timer","setInterval","clearInterval","getObjectMaterial","getHexString","parseFloat","updateMatOpacity","setMode","toFixed","readonly","placeholder","posTop","posLeft","copies","dragOffset","$el","doDrag","newLeft","newTop","offsetWidth","offsetHeight","duplicateOffset","parseVal","newMode","getObjectByName","createShape","getCenterPoint","vec","thickness","moveTo","lineTo","closePath","absarc","ellipse","finalCenter","drawingprop","composer","main","preserveDrawingBuffer","Input","LineSettings","ToolSelector","ViewportCube","UndoRedo","Share","Canvas","ShapeSelector","Modal","VideoExportPreview","SceneSettings","ColorPalette","SymmetrySettings","Layers","ObjectManager","TransformToolbar","TwoDShapes","multitouch","toolHistory","canvasTransformEnabled","layerGroups","clipboard","tutorialStep","actions","video","objectFit","zIndex","autoplay","muted","playsInline","hostname","protocol","alert","mediaDevices","getUserMedia","startVideo","constraints","stream","srcObject","isRear","track","getVideoTracks","getSettings","facingMode","catch","message","getTracks","stop","setClearColor","bgCol","NONE","TOUCH_ZOOM_TRUCK","targetSphere","light","refs","setViewport","linesAnimated","previous","setSelectedTool_internal","setSelectedMultitouch","setSelectedObject","closeSelection","lineSettings","handleKeyDown","newSelection","clipObj","pasteObj","addScalar","isMeshLine","objectsToDelete","realArg","strokeOpacity","originalGroup","newGroup","createApp","App","mount"],"mappings":"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","file":"js/app.40c8ffbf.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Share.vue?vue&type=style&index=0&id=24c8d122&scoped=true&lang=css\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAefSURBVHgB7dzpcdNqG8dh5Z3zHaiApQGgAggFsDXA0gBLASwNsDTA0gEUQIAG2AoIUAHQQPzq9hyfCbbkWCYE4/91zWjOnGBHCuQnPXoka2PUaoB1NvpfA6w9oUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUMAoUOAfxp6ffnypdnc3Gz2082bN5sbN240cJCEvoeKfT99//69gYNm6A4BhA4BDN1ZaaPRqDl37tzMKdSlS5eaBw8eNCxG6Eu4cuVKc/Xq1WYZx44daximIp8O3VzHMEJfwvHjx5uzZ8828Ldwjg4BhA4BDN3/MpNz1WXO9Xef5x7UXMFknYcPHx4v/BlCXwH379+fmWyqOYCa9Ctv3rwZv+bDhw//TUJVNN++fZv7feu1jx8/Hr9/93snTp06NV7qTr3676KePXvWvH379qevXbhwobl48WLv9pbaudTPdffu3d4dTb2ntnn655j2+vXr5tq1azNf370d7DKi1+fPn0f1VzS93Lt3b7Sf2l/+mXW0s/rjP6t1dW3DvH+62u52J9H7vq5lc3Nz/L697OzsjLet7+9k3vZOlo2NjdGjR486v//W1tag7f7d/zZrYsc5+gqro2L7izvkLeOj6enTp5vnz58Pel8dIetqQq1zWYtub/uL19y6dWvmyM3vY+i+hBpe1vB1qMnQdRE1lB+6jhcvXoxvJPkVk1BreD1EOxoYtHOp2GvHUKcnzt0PwIhefUP3ZZfJcHxa19B9kWV6W9sdydzXt+fh43XV0sY1d2jdHuE7t7Vv6D691LZM1tUMGGobuv8WO0KfY1VCr/dVeO3k2/j19d/pEPvOySvo9uj833t3e/r0ae/OoR3Gd27rXqG3pw2j9+/f//Se7e3t3vXU3MA8tb6u97YTcSMWJvR5ViH0inEvFX3fUXU6uq6fsSukOqq3pw4zr58Xeu0cunYopWLves+RI0fmbp/Q94XJuFVW58mL3FPfdy5f59t7XTareYOaiJvW/nIMOududwzNkydPes+3++Yn6tLZfn/mn1km45ZQv7TL3HAy5Fp1BVNPo1nEx48fZ762+zr8Xo4ePTpeV3vJ66ev1wx+hbjoZNm8icbaEdQ17vqeHDyhL6GOskNnpYeqncIigVWIdRVg2pCbRirC8+fPz4Re6mi7yA5qkdccOnSo4c8wdF9Ri44Y+j6uefLkyWY/1tc1WuiyyE6pPR9v+DOEzthBXMt2RP9zhL6mvn79Ouj1fRNidf7O30/of7kacncdjbvO2+eZ/pDKhLvW1oPQ10DXRFhdcqvbUhdRl9K67juvnciQKwWsLqGvga4Z9pqku379+jjieUb/3nPeNXRf5cdl7fVz8TOhr4G6Xt41o13XrOsJqnVknw6j/r8+z3779u3OT6zVJbc7d+40q6DrisDLly/FPoDr6GugzqPr0cddD2Ko2E+cODG+9l+X3CYz33XZrO5867o8V5HPezjEQevajtpJXb58ebwzqtOLyZNif/z44cETHYS+JirkT58+NQ8fPuz88yEfea3Ps//uG4IWVTudvh1OfSy3lt3qtl+hzzJ0XyN1VK8HOlQcy6j3VeSvXr1qVkndtcevEfqaqdhrGXoXWkVez47b2tpauUtqNTRf9L5/ugl9DxXA9HIQ6/iV9VQU7969Gw/n6/FQXd9v8rXaIdTrt7e3x8P+RSNfZluX/TnrNbVtdTrR9fPs/l5us+22MTJ1ufbq5pmaqNp933rd8Tbk0VarpCYY62fZ/UTcWs6cObMyE4grZiR0WH8jQ3cIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQI8E+7jBpgnY3+D4mMAGzm69l9AAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"img/hideCanvas.b8094833.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ObjectManager.vue?vue&type=style&index=0&id=9d553bfc&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportUSDZ.vue?vue&type=style&index=0&id=206058b5&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Head.8a592147.svg\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD6CAYAAACI7Fo9AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAd/SURBVHgB7d3pcRPpGobhNjX/wRGAE2BLAEwAQBEAWwIsCbAkACSAgQBYEjCQAEsCLAlgSMB99LqOpjx2y1LLI2uk57qqeqoQbrWmZu5evv5aXmkHGmCZtccaYOkJHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQIIHQL81TAza2trzay9efOmOXv2bAMHEfoM/fjxo5m1379/NzCOU3cIIHQIIHQI4Bp9ht6/fz/2Z758+dLcu3dv3+t37txprl69OnZ9A3FMQugzdPHixWZa586dO9T6sJtTdwggdAjg1H2J1T324X32EydO7CxHvd1Tp041zJ/Ql8yHDx+at2/fNu/evds3YadCr8G7mzdvNhcuXJg4wrZtm9u3b+97/cmTJ3/vPGq7L1++3Nn23kk8tc0aWLxx44bw56VlrgYj8239Z9i7vHjxovf7DAbvOt9r1HL37t12a2tr7Htvb2/vW3dlZaX9/v17++3bt17bffjwYcuR23aNvgQePXrUrK+v7xxV+3j69Glz/vz5qafqDkJvLl261Gu7g9APtU2mI/QFV/fgK55pDWPtG97gKNE8fvx4qmA/f/7cXLt2zTz9IyT0BVZH8joqj1LXz3UvvpaDJtZU7HVG0De8riN5bWe4zYMG/yr2Z8+eNRyRlrma9hq9ro8HIXWuOxjw2nnfrnUGA2K9r5+7rtF3L/U5Hjx40Hm9v7GxsfN5utar6/xJxgg4tG2hz9m0oY8KdnBEHRtPxde17urqaue6B4W+trbWDo7OB26vBuxGxW5w7kgYjFtUHz9+3Pda3bqqL6IYd7+8bq91XdfXqXvdIpvU4IjcDI7kY+fb1xdwbG5udn6uPttjekJfQHVt3DUIVvFOep+6HprZG95gz9+5AxmlrsPr3vgk6nPVDmav+vcwKDd7Ql9AX79+7Xy9JsFMqiLvejqunqabRB3Nr1y50kyqfv7y5cudfzfpNpme0BdQ1xGwwu0766zrlLvP7bIzZ840fYz6fD9//myYLaEviaOax34Yi/AZl5XQF1BXMNNMXOlap0+MfY/Eoz7jyZMnG2ZL6Ato1Clw3ymw9QDKXpN+Y00N3PW9th410OdIP3tCX0CjBt1qptyk6jZc1xG2z1dT1a2xSc8kasfQNRNu+EQdsyX0BTSc2rpXHdEPmhI7VFNe79+/v+/1Ghm/fv16M6mtra3m1q1bOxEfpP6+dkJdO4VJvhePf0HLXE07M27Ues3/Z5vVbLZadqs/b25ujpyltr6+3rmtcVNgazZezX7r2t6vX7/awT37kVNgu6bq8q/bXql/NsxNHYXrgZK9BqGPnYxST52N+qbZuo6v+9zDW2B//vzZ+TKKUdfxdTQfxNp5/V//ixw7Nv7krybE1PaOHz++8+e6hn/16lXn7cDaXv388+fPG2audUSfs8N88UQ9pFJzzZsJv/Rh1FJH1oPmnI87ok+z1Oeuz8+RMNd9kdXRt+aQH+aXOQ7nq9fSV11f1/p9ra6uNq9fv/a1UkdI6AtuGHudBveNroKr0fdpIq9tVegV7KQ7mlpn+ICLkfajJfT/gApg79JHxb6xsfGP4LveZ/ha/XKIegCmrsn7zFfvUrHXdms84aBt1k6ldiifPn0S+RwYjFtCNfhVA2H18MvugbCagVa35fqeMrcdg3EVb+1cdg8YDre7e2JMBX769Gm/dWa+WqEz1qSh85/VOnWHAEKHAEKHAEKHAEKHAEKHAEKHAH5tMhPpmq03zTx35kPojFVB1zTXvUxlXRxmxsHyMzMOEggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAvw1WNoGWGbt/wCMo+OPrYBQagAAAABJRU5ErkJggg==\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ToolSelector.vue?vue&type=style&index=0&id=c0c8064c&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Plane.3b032ddd.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Canvas.vue?vue&type=style&index=0&id=67a0d07b&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/undo.77205cb3.svg\";","module.exports = __webpack_public_path__ + \"img/Canvas-Sphere.bbd345df.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Layers.vue?vue&type=style&index=0&id=b061a208&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Modal.vue?vue&type=style&index=0&id=320b9c99&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportForBlender.vue?vue&type=style&index=0&id=96b7a698&scoped=true&lang=css\"","<template>\n  <video-export-preview :show=\"previewing\" @stop-previewing=\"setPreview\" />\n  <modal :modalProp=\"modalProp\" @modal-set=\"setModal\" @set-preset=\"applyPreset\" />\n  <viewport-cube\n    v-show=\"uiVisible && windowStates.view\"\n    :quaternion=\"quaternion\"\n    :cameraResetDisabled=\"cameraResetDisabled\"\n    :reopenTrigger=\"windowTriggers.view\"\n    :is-open=\"windowStates.view\"\n    @close=\"onWindowClose('view')\"\n  />\n  <tool-selector \n    v-show=\"uiVisible && windowStates.tools\" \n    ref=\"toolSelector\"\n    @selected-tool=\"setSelectedTool\" \n    @set-preset=\"applyPreset\" \n    @toggle-properties=\"toggleProperties\" \n    @toggle-scene=\"toggleScene\" \n    :selectedTool=\"tool\" \n    :reopenTrigger=\"windowTriggers.tools\" \n    :is-open=\"windowStates.tools\" \n    @close=\"onWindowClose('tools')\"\n    :initialX=\"windowPositions.tools ? windowPositions.tools.x : undefined\"\n    :initialY=\"windowPositions.tools ? windowPositions.tools.y : undefined\" \n    @toggle-2d-shapes=\"toggleWindow('twoDShapes')\"\n    @toggle-ar=\"toggleAR\"\n    :isArActive=\"arActive\"\n  />\n  <two-d-shapes \n    v-show=\"uiVisible && windowStates.twoDShapes\" \n    :visible=\"true\"\n    :reopenTrigger=\"windowTriggers.twoDShapes\" \n    :is-open=\"windowStates.twoDShapes\" \n    @close=\"onWindowClose('twoDShapes')\" \n    @add-shape=\"onAddCanvasShape\"\n  />\n  <line-settings v-show=\"uiVisible && windowStates.properties\" ref=\"lineSettings\" @stroke=\"setStroke\" @fill=\"setFill\" :selectedTool=\"tool\" :forceVisible=\"propertiesVisible\" :reopenTrigger=\"windowTriggers.properties\" :is-open=\"windowStates.properties\" @close=\"onWindowClose('properties')\" />\n\n  <undo-redo v-show=\"uiVisible && windowStates.history\" @selected-tool=\"setSelectedTool\" ref=\"undoRedo\" :reopenTrigger=\"windowTriggers.history\" :is-open=\"windowStates.history\" @close=\"onWindowClose('history')\" />\n  <Input\n    @mouse-coordinates=\"setMouseCoordinates\"\n    :selectedTool=\"tool\"\n    :mirror=\"mirror\"\n    :stroke=\"stroke\"\n    :fill=\"fill\"\n    :radial=\"radial\"\n    :sectors=\"sectors\"\n    :radial-axis=\"radialAxis\"\n    :toolEnabled=\"toolEnabled\"\n    :localSymmetry=\"localSymmetry\"\n  />\n  <Canvas\n    ref=\"raycastCanvas\"\n    @selected-canvas-shape=\"setSelectedCanvasShape\"\n    @set-tool-enabled=\"setToolEnabled\"\n    :selectedShape=\"canvasShape\"\n    :selectedTool=\"tool\"\n    :mouse=\"mouse\"\n    :reopenTrigger=\"windowTriggers.canvas\"\n    :is-open=\"windowStates.canvas\"\n    @close=\"onWindowClose('canvas')\"\n    :initialX=\"windowPositions.canvas ? windowPositions.canvas.x : undefined\"\n    :initialY=\"windowPositions.canvas ? windowPositions.canvas.y : undefined\"\n  />\n  <ShapeSelector\n    v-show=\"uiVisible && windowStates.shapes\"\n    @selected-canvas-shape=\"setSelectedCanvasShape\"\n    @load-custom-model=\"loadCustomModelInCanvas\"\n    @set-material=\"setCanvasMaterial\"\n    :selectedShape=\"canvasShape\"\n    :selectedTool=\"tool\"\n    :reopenTrigger=\"windowTriggers.shapes\"\n    :is-open=\"windowStates.shapes\"\n    @close=\"onWindowClose('shapes')\"\n  />\n  \n  <Share v-show=\"uiVisible\" @modal-set=\"setModal\" @preview=\"setPreview\" @toggle-window=\"toggleWindow\" ref=\"share\" :windowStates=\"windowStates\" />\n  <scene-settings v-show=\"uiVisible && windowStates.scene\" :visible=\"true\" :reopenTrigger=\"windowTriggers.scene\" :is-open=\"windowStates.scene\" @close=\"onWindowClose('scene')\" />\n  <color-palette v-show=\"uiVisible && windowStates.colors\" :visible=\"true\" :reopenTrigger=\"windowTriggers.colors\" @set-color=\"applyColor\" :is-open=\"windowStates.colors\" @close=\"onWindowClose('colors')\" />\n  <symmetry-settings v-show=\"uiVisible && windowStates.symmetry\" :visible=\"true\" :reopenTrigger=\"windowTriggers.symmetry\" :is-open=\"windowStates.symmetry\" @close=\"onWindowClose('symmetry')\" :mirror=\"mirror\" @set-mirror=\"mirror = $event\" :radial=\"radial\" @set-radial=\"radial = $event\" :sectors=\"sectors\" @set-sectors=\"sectors = $event\" :radial-axis=\"radialAxis\" @set-radial-axis=\"radialAxis = $event\" :local-symmetry=\"localSymmetry\" @set-local-symmetry=\"localSymmetry = $event\" />\n    <layers v-show=\"uiVisible && windowStates.layers\" :visible=\"true\" :reopenTrigger=\"windowTriggers.layers\" :is-open=\"windowStates.layers\" @close=\"onWindowClose('layers')\" @layer-add=\"onLayerAdd\" @layer-delete=\"onLayerDelete\" @layer-select=\"onLayerSelect\" @layer-change=\"onLayerChange\" @layer-duplicate=\"onLayerDuplicate\" />\n    <object-manager v-show=\"uiVisible && windowStates.objectManager\" :visible=\"true\" :reopenTrigger=\"windowTriggers.objectManager\" :is-open=\"windowStates.objectManager\" @close=\"onWindowClose('objectManager')\" />\n    \n    <transform-toolbar\n      v-show=\"uiVisible\"\n      :top=\"transformToolbar.top\"\n      :left=\"transformToolbar.left\"\n      :display=\"transformToolbar.display\"\n      :selectedTool=\"tool\"\n      :selectionPosition=\"transformToolbar.position\"\n    />\n  \n  <!-- <div>\n    <a id=\"ar\" rel=\"ar\"><img src=\"@/assets/icons/AR.png\" /></a>\n  </div> -->\n</template>\n\n<script>\nimport * as THREE from \"three\";\n//import { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport CameraControls from \"camera-controls\";\nCameraControls.install({ THREE: THREE });\nimport InfiniteGridHelper from \"./components/InfiniteGridHelper.js\";\n\nimport Input from \"./components/Input.vue\";\nimport ToolSelector from \"./components/ToolSelector.vue\";\nimport ViewportCube from \"./components/ViewportCube.vue\";\nimport UndoRedo, { undoManager } from \"./components/UndoRedo.vue\";\nimport { select } from \"./components/select.js\";\nimport { draw } from \"./components/draw.js\";\nimport { erase } from \"./components/erase.js\";\nimport LineSettings from \"./components/LineSettings.vue\";\n\nimport Share from \"./components/Share.vue\";\nimport Canvas from \"./components/Canvas.vue\";\nimport { controls, canvas } from \"./components/Canvas.vue\";\nimport ShapeSelector from \"./components/ShapeSelector.vue\";\nimport Modal from \"./components/Modal.vue\";\nimport VideoExportPreview from \"./components/VideoExportPreview.vue\";\nimport SceneSettings from \"./components/SceneSettings.vue\";\nimport ColorPalette from \"./components/ColorPalette.vue\";\nimport SymmetrySettings from \"./components/SymmetrySettings.vue\";\n\nimport Layers from \"./components/Layers.vue\";\nimport ObjectManager from \"./components/ObjectManager.vue\";\nimport TransformToolbar from \"./components/TransformToolbar.vue\";\nimport TwoDShapes from \"./components/TwoDShapes.vue\";\n\nexport let render = new THREE.WebGLRenderer({\n  antialias: true,\n  alpha: true,\n  preserveDrawingBuffer: true,\n});\n// Rename export to avoid conflict (or just keep it and patch it later)\nexport let renderer = render; \n\nexport let camera = new THREE.PerspectiveCamera(\n  100,\n  window.innerWidth / window.innerHeight,\n  1,\n  1000\n);\n\nexport let scene, drawingScene, cameraControls, vm, drawingprop, composer;\n\nvar main, clock;\n\nexport default {\n  name: \"App\",\n  // ... (components list unchanged)\n  components: {\n    Input,\n    LineSettings,\n    ToolSelector,\n    ViewportCube,\n    UndoRedo,\n    Share,\n    Canvas,\n    ShapeSelector,\n    Modal,\n    VideoExportPreview,\n    SceneSettings,\n    ColorPalette,\n    SymmetrySettings,\n\n    Layers,\n    ObjectManager,\n    TransformToolbar,\n    TwoDShapes,\n  },\n  data() {\n    return {\n      // ... (data unchanged)\n      tool: \"draw\",\n      toolEnabled: true,\n      canvasShape: \"plane\",\n      multitouch: \"canvas\",\n      toolHistory: [\"draw\"],\n      stroke: {}, \n      fill: {}, \n      mirror: \"\", \n      radial: false,\n      sectors: 6,\n      radialAxis: 'y',\n      localSymmetry: false,\n      quaternion: undefined,\n      cameraResetDisabled: false,\n      selected: undefined,\n      transformToolbar: { top: 0, left: 0, location: \"above\", display: false, position: { x: 0, y: 0, z: 0 } },\n      canvasTransformEnabled: true,\n      modalProp: { show: false, mode: \"about\" },\n      previewing: false,\n      mouse: {},\n      propertiesVisible: false,\n      layerGroups: {},\n      activeLayerId: 1,\n      clipboard: [],\n      windowTriggers: {\n        tutorialStep: 0,\n        tools: 0,\n        properties: 0,\n        canvas: 0,\n        shapes: 0,\n        history: 0,\n        view: 0,\n        actions: 0,\n        scene: 0,\n        colors: 0,\n        symmetry: 0,\n        layers: 0,\n        objectManager: 0,\n        twoDShapes: 0,\n      },\n      windowPositions: {},\n      windowStates: {\n        tools: true,\n        properties: false,\n        canvas: true,\n        shapes: false,\n        history: false,\n        view: true,\n        scene: false,\n        colors: false,\n        symmetry: false,\n        layers: false,\n        objectManager: false,\n        twoDShapes: false,\n      },\n      uiVisible: true,\n      arActive: false,\n    };\n  },\n  emits: [\"modal-set\", \"selected-canvas-shape\"],\n  methods: {\n    toggleProperties: function() {\n      this.toggleWindow('properties');\n    },\n    toggleScene: function() {\n      this.toggleWindow('scene');\n    },\n    toggleWindow: function(windowName) {\n      if (this.windowStates[windowName] !== undefined) {\n          this.windowStates[windowName] = !this.windowStates[windowName];\n          if (this.windowStates[windowName] && this.windowTriggers[windowName] !== undefined) {\n            this.windowTriggers[windowName]++;\n          }\n      } else {\n          if (this.windowTriggers[windowName] !== undefined) {\n            this.windowTriggers[windowName]++;\n          }\n      }\n    },\n    onWindowClose: function(windowName) {\n        if (this.windowStates[windowName] !== undefined) {\n             this.windowStates[windowName] = false;\n        }\n    },\n    toggleAR() {\n        this.arActive = !this.arActive;\n        let video = document.getElementById('ar-video-bg');\n        if (!video) {\n            video = document.createElement('video');\n            video.id = 'ar-video-bg';\n            video.style.position = 'fixed';\n            video.style.top = '0';\n            video.style.left = '0';\n            video.style.width = '100vw';\n            video.style.height = '100vh';\n            video.style.objectFit = 'cover';\n            video.style.zIndex = '-1';\n            video.autoplay = true;\n            video.muted = true; // Required for strict autoplay policies\n            video.playsInline = true;\n            document.body.appendChild(video);\n        }\n\n        if (this.arActive) {\n             // Security Check for Mobile testing via IP\n            if (window.location.hostname !== 'localhost' && window.location.protocol !== 'https:') {\n                alert(\" AR Warning: Camera access requires HTTPS. \\n\\nIf testing on mobile via Wi-Fi/IP, the camera will likely fail. Use localhost via USB debugging or set up HTTPS.\");\n            }\n\n            // Start AR\n            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n                \n                const startVideo = (constraints) => {\n                    navigator.mediaDevices.getUserMedia(constraints)\n                        .then(stream => {\n                            video.srcObject = stream;\n                            video.style.display = 'block';\n                            \n                            // Smart Mirroring: Mirror only if using front/user camera\n                            // If we requested environment (rear), do NOT mirror.\n                            let isRear = false;\n                            try {\n                                const track = stream.getVideoTracks()[0];\n                                const settings = track.getSettings();\n                                // Check specific facingMode if supported, or infer from request\n                                if (constraints.video.facingMode === 'environment' || settings.facingMode === 'environment') {\n                                    isRear = true;\n                                }\n                            } catch(e) { /* ignore */ }\n\n                            if (isRear) {\n                                video.style.transform = 'none'; // Rear camera: No mirror\n                            } else {\n                                video.style.transform = 'scaleX(-1)'; // Front/Webcam: Mirror for natural feel\n                            }\n\n                            scene.background = null; \n                            renderer.render(scene, camera);\n                        })\n                        .catch(err => {\n                            console.warn(\"AR Camera attempt failed:\", err);\n                            // If first attempt (environment) failed, try fallback (any video)\n                            if (constraints.video.facingMode === 'environment') {\n                                console.log(\"Retrying with any available camera...\");\n                                /* Fallback to default (usually user/webcam) */\n                                startVideo({ video: true });\n                            } else {\n                                console.error(\"AR Fatal Error:\", err);\n                                alert(\"Camera Error: \" + err.name + \"\\n\" + err.message + \"\\n\\n(On PC this likely means no webcam is connected. On Mobile, ensure HTTPS is used.)\");\n                                this.arActive = false;\n                            }\n                        });\n                };\n\n                // First try getting the rear camera (ideal for AR/Phone)\n                startVideo({ video: { facingMode: 'environment' } });\n\n            } else {\n                alert(\"Camera API not supported in this browser context (HTTPS required).\");\n                this.arActive = false;\n            }\n        } else {\n            // Stop AR\n            video.style.display = 'none';\n            if (video.srcObject) {\n                video.srcObject.getTracks().forEach(track => track.stop());\n                video.srcObject = null;\n            }\n            scene.background = new THREE.Color(0xdddddd);\n            renderer.render(scene, camera);\n        }\n    },\n\n    init: function () {\n      CameraControls.install({ THREE: THREE });\n      main = document.getElementById(\"threed\");\n\n      renderer.setPixelRatio(window.devicePixelRatio);\n      renderer.setClearColor(0x000000, 0); \n      renderer.setSize(window.innerWidth, window.innerHeight);\n      main.appendChild(renderer.domElement);\n      renderer.domElement.id = \"threeJsCanvas\";\n\n      scene = new THREE.Scene();\n      var bgCol = 0xdddddd;\n      scene.background = new THREE.Color(bgCol);\n      scene.fog = new THREE.Fog(bgCol, 10, 50);\n\n      drawingScene = new THREE.Scene();\n\n      const grid = new InfiniteGridHelper(1, 10, new THREE.Color(0x0000ff), 40);\n      scene.add(grid);\n\n      camera.layers.enable(0); \n      camera.layers.enable(1);\n      camera.zoom = 3;\n      camera.position.set(5, 5, 10);\n\n      clock = new THREE.Clock();\n\n      // Post-Processing Removed to restore clean look\n      /* \n      const renderScene = new RenderPass(scene, camera);\n      const bloomPass = new UnrealBloomPass(...)\n      */\n\n      cameraControls = new CameraControls(camera, renderer.domElement);\n      cameraControls.dampingFactor = 20;\n      cameraControls.draggingDampingFactor = 200;\n      cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n      cameraControls.mouseButtons.wheel = CameraControls.ACTION.DOLLY;\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.TRUCK;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      cameraControls.mouseButtons.middle = CameraControls.ACTION.TRUCK;\n      cameraControls.mouseButtons.right = CameraControls.ACTION.NONE;\n      cameraControls.touches.one = CameraControls.ACTION.TOUCH_ROTATE;\n      cameraControls.touches.two = CameraControls.ACTION.TOUCH_DOLLY_TRUCK;\n      cameraControls.touches.three = CameraControls.ACTION.TOUCH_ZOOM_TRUCK;\n      cameraControls.maxZoom = 4000;\n      cameraControls.minZoom = 0.5;\n      cameraControls.enabled = true;\n\n      this.quaternion = [\n        camera.quaternion.x,\n        camera.quaternion.y,\n        camera.quaternion.z,\n        camera.quaternion.w,\n      ];\n\n      cameraControls.addEventListener(\"update\", () => {\n        this.quaternion = [\n          camera.quaternion.x,\n          camera.quaternion.y,\n          camera.quaternion.z,\n          camera.quaternion.w,\n        ];\n\n        let target = new THREE.Vector3();\n        target = cameraControls.getTarget(target);\n        targetSphere.position.set(target.x, target.y, target.z);\n\n        if (select.s && select.s.controls != undefined) {\n          if (this.tool == \"select\") {\n            select.s.helper.update();\n          }\n        }\n      });\n\n      cameraControls.addEventListener(\"sleep\", () => {\n        if (select.s && select.s.controls != undefined) {\n          if (this.tool == \"select\") {\n            select.s.helper.update();\n            let position = select.s.calculateTransfromToolbarPosition();\n            this.transformToolbar.left = position.x;\n            this.transformToolbar.top = position.y;\n            this.transformToolbar.location = position.location;\n            this.transformToolbar.display = true;\n          }\n        }\n\n        let target = new THREE.Vector3();\n        target = cameraControls.getTarget(target);\n        var x = target.x;\n        var y = target.y;\n        var z = target.z;\n\n        if (\n          camera.position.z != 10 ||\n          x != 0 ||\n          y != 0 ||\n          z != 0 ||\n          camera.zoom != 3\n        ) {\n          this.cameraResetDisabled = false;\n        } else {\n          this.cameraResetDisabled = true;\n        }\n      });\n\n      var geometry = new THREE.SphereBufferGeometry(0.025, 32, 32);\n      var material = new THREE.MeshBasicMaterial({ color: 0xffc75f });\n      var targetSphere = new THREE.Mesh(geometry, material);\n      scene.add(targetSphere);\n\n      const light = new THREE.HemisphereLight(0xffffff, 0x222222, 0.8);\n      light.position.set(0, 50, 150);\n      scene.add(light);\n\n      this.$.refs.raycastCanvas.setUp();\n      this.$.refs.raycastCanvas.resetTransformation();\n\n      window.addEventListener(\"resize\", this.onWindowResize);\n      window.addEventListener(\"orientationchange\", this.onWindowResize);\n      this.onWindowResize();\n\n      renderer.render(scene, camera);\n    },\n    onWindowResize: function () {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.left = (900 * camera.aspect) / -2;\n      camera.right = (900 * camera.aspect) / 2;\n      camera.top = 900 / 2;\n      camera.bottom = -900 / 2;\n\n      camera.updateProjectionMatrix();\n\n      renderer.setSize(window.innerWidth, window.innerHeight);\n\n      renderer.setViewport(0, 0, window.innerWidth, window.innerHeight);\n      renderer.render(scene, camera);\n    },\n    animate: function () {\n      const delta = clock.getDelta();\n      let hasCameraControlsUpdated = cameraControls.update(delta);\n      let linesAnimated = false;\n      if (draw && draw.animateLines) {\n           linesAnimated = draw.animateLines(delta);\n      }\n\n      requestAnimationFrame(this.animate);\n\n      if (hasCameraControlsUpdated || linesAnimated) {\n        renderer.render(scene, camera);\n      }\n    },\n    setSelectedTool: function (val) {\n      if (this.tool === 'select') {\n          if (select && select.s) {\n              select.s.deselect();\n              this.setTransformToolbarDisplay(false);\n          }\n      }\n      this.tool = val;\n\n      if (this.tool === \"erase\") {\n        canvas.visible = false;\n        controls.visible = false;\n        renderer.render(scene, camera);\n      } else if (this.tool === \"draw\") {\n        if (this.$.refs.raycastCanvas.visible === true) {\n          canvas.visible = true;\n        } else {\n          canvas.visible = false;\n        }\n        if (\n          this.$.refs.raycastCanvas.transformationEnabled === true &&\n          this.$.refs.raycastCanvas.visible === true\n        ) {\n          controls.visible = true;\n        } else {\n          controls.visible = false;\n        }\n        renderer.render(scene, camera);\n      }\n\n      this.toolHistory.push(val);\n      if (this.toolHistory.length > 2) {\n        this.toolHistory.shift();\n      }\n\n      let current = val;\n      let previous = this.toolHistory[0];\n\n      undoManager.add({\n        undo: function () {\n          vm.setSelectedTool(previous);\n        },\n        redo: function () {\n          vm.setSelectedTool(current);\n        },\n      });\n\n      this.$.refs.undoRedo.updateUi();\n    },\n    setToolEnabled: function (val) {\n      this.toolEnabled = val;\n    },\n    setMouseCoordinates: function (val) {\n      this.mouse = val;\n    },\n    setSelectedCanvasShape: function (val) {\n      this.canvasShape = val;\n    },\n    loadCustomModelInCanvas: function (url) {\n      if (this.$refs.raycastCanvas) {\n        this.$refs.raycastCanvas.loadCustomModel(url);\n      }\n    },\n    setCanvasMaterial: function (val) {\n      if (this.$refs.raycastCanvas) {\n        this.$refs.raycastCanvas.setMaterial(val);\n      }\n    },\n    onAddCanvasShape: function(mesh) {\n        // Switch to Canvas mode\n        this.setSelectedTool('draw');\n        // Forward to Canvas component\n        if (this.$refs.raycastCanvas) {\n            this.$refs.raycastCanvas.addShape(mesh);\n        }\n    },\n    setSelectedTool_internal: function (val) {\n      this.tool = val;\n    },\n    setSelectedMultitouch: function (val) {\n      this.multitouch = val;\n\n      if (val === \"camera\") {\n        cameraControls.enabled = true;\n      } else {\n        cameraControls.enabled = false;\n      }\n    },\n    setSelectedObject: function (val) {\n      this.selected = val;\n    },\n    setTransformToolbarPosition: function (val) {\n      this.transformToolbar.top = val.top;\n      this.transformToolbar.left = val.left;\n      this.transformToolbar.location = val.location;\n    },\n    setTransformToolbarDisplay: function (val) {\n      this.transformToolbar.display = val;\n    },\n    setSelectionPosition: function (val) {\n      this.transformToolbar.position = val;\n    },\n    closeSelection: function() {\n      if (select && select.s) {\n          select.s.deselect();\n      }\n      this.transformToolbar.display = false;\n    },\n    setStroke: function (val) {\n      this.stroke = val;\n      if (select && select.s && select.s.controls && select.s.controls.object && select.s.controls.object.type === 'Mesh') {\n           draw.updateStroke(select.s.controls.object, val);\n           renderer.render(scene, camera);\n      }\n    },\n    setFill: function (val) {\n      this.fill = val;\n      if (select && select.s && select.s.controls && select.s.controls.object && select.s.controls.object.type === 'Mesh') {\n           draw.updateFill(select.s.controls.object, val);\n           renderer.render(scene, camera);\n      }\n    },\n    setModal: function (val) {\n      this.modalProp = val;\n    },\n    setPreview: function (val) {\n      this.previewing = val;\n    },\n    applyPreset: function (settings) {\n      this.$refs.lineSettings.updateSettings(settings);\n    },\n    applyColor: function(color) {\n      if (this.tool !== 'draw') {\n        this.tool = 'draw';\n      }\n      this.$refs.lineSettings.updateSettings({\n        strokeColor: color,\n        stroke: true \n      });\n    },\n    handleKeyDown(event) {\n        if (event.key === \"Escape\") {\n            if (this.tool === 'select' && select && select.s) {\n                select.s.deselect();\n                this.setTransformToolbarDisplay(false);\n            }\n        }\n        if (event.key === \"AltGraph\") {\n            this.uiVisible = !this.uiVisible;\n        }\n        if (event.code === \"Space\") {\n            if (this.$refs.raycastCanvas) {\n                this.$refs.raycastCanvas.toggleVisibility();\n            }\n        }\n        // Copy (Ctrl+C)\n        if (event.ctrlKey && (event.key === 'c' || event.key === 'C')) {\n            console.log(\"Ctrl+C detected\");\n            if (select && select.s && select.s.selected && select.s.selected.length > 0) {\n                 this.clipboard = [];\n                 select.s.selected.forEach(obj => {\n                     let clone = obj.clone();\n                     // Safe material clone\n                     if (clone.material) {\n                         try {\n                             clone.material = clone.material.clone();\n                         } catch (e) {\n                             console.warn(\"Material clone failed on copy, sharing material\", e);\n                         }\n                     }\n                     this.clipboard.push(clone);\n                 });\n                 console.log(\"Copied to clipboard:\", this.clipboard.length);\n            } else {\n                console.log(\"Nothing to copy. Selection empty?\");\n                if (select) console.log(\"select exists\");\n                if (select && select.s) console.log(\"select.s exists\", select.s.selected);\n            }\n        }\n        // Paste (Ctrl+V)\n        if (event.ctrlKey && (event.key === 'v' || event.key === 'V')) {\n            console.log(\"Ctrl+V detected. Clipboard size:\", this.clipboard ? this.clipboard.length : 0);\n            if (this.clipboard && this.clipboard.length > 0) {\n                 if (select && select.s) select.s.deselect();\n                 \n                 let newSelection = [];\n                 this.clipboard.forEach(clipObj => {\n                     let pasteObj = clipObj.clone();\n                     // Generate new UUID\n                     pasteObj.uuid = THREE.MathUtils.generateUUID();\n                     \n                     // Safe material clone again ensures unique material for the new instance\n                     if (pasteObj.material) {\n                         try {\n                              pasteObj.material = pasteObj.material.clone();\n                         } catch(e) {\n                              // Share if clone fails\n                         }\n                     }\n                     \n                     // Offset slightly to make paste visible\n                     pasteObj.position.addScalar(0.5); \n                     \n                     // Add to active layer group if possible\n                     if (this.activeLayerId && this.layerGroups[this.activeLayerId]) {\n                         this.layerGroups[this.activeLayerId].add(pasteObj);\n                     } else {\n                         scene.add(pasteObj);\n                     }\n                     \n                     // Ensure raycast is set (MeshLine specific)\n                     if (clipObj.raycast) pasteObj.raycast = clipObj.raycast; \n                     else if (pasteObj.geometry && pasteObj.geometry.isMeshLine) {\n                         // Import MeshLineRaycast if needed, or assume it's attached? \n                         // It's usually attached on creation.\n                         // But checking userData might help.\n                     }\n\n                     newSelection.push(pasteObj);\n                 });\n                 \n                 if (select && select.s && newSelection.length > 0) {\n                     // Ensure tool is select\n                     this.tool = 'select';\n                     // Need to wait for Vue/Scene update? No, direct select should work.\n                     // But we must invoke after a brief delay if deselect was async? \n                     // deselect() is synchronous usually.\n                     select.s.select(newSelection);\n                 }\n                 renderer.render(scene, camera);\n            }\n        }\n        // Duplicate (Ctrl+D)\n        if (event.ctrlKey && (event.key === 'd' || event.key === 'D')) {\n            event.preventDefault(); \n            // Check selection state\n            if (select && select.s && (select.s.selected.length > 0 || (select.s.controls && select.s.controls.object))) {\n                 console.log(\"Ctrl+D detected - calling duplicate()\");\n                 select.s.duplicate();\n            } else {\n                console.log(\"Ctrl+D ignored: No selection\");\n            }\n        }\n        if (event.code === \"Delete\" || event.code === \"Backspace\") {\n            if (select && select.s && select.s.controls && select.s.controls.object) {\n                 const obj = select.s.controls.object;\n                 let objectsToDelete = [];\n\n                 if (obj.type === \"Group\") {\n                     // Multiple selection\n                     obj.children.forEach(child => {\n                         // The group children are clones/helpers, the real UUID is in userData\n                         const uuid = child.userData.uuid;\n                         if (uuid) {\n                             // Find the real object in the LayerGroups or Scene\n                             // We can search the whole scene or use getObjectByProperty on scene\n                             // Note: erase.deleteObject expects the object itself\n                             const realArg = scene.getObjectByProperty(\"uuid\", uuid);\n                             if (realArg) objectsToDelete.push(realArg);\n                         }\n                     });\n                 } else {\n                     // Single selection (Mesh)\n                     objectsToDelete.push(obj);\n                 }\n\n                 // Deselect first to remove gizmos\n                 if (objectsToDelete.length > 0) {\n                     select.s.deselect();\n                     \n                     // Now delete\n                     objectsToDelete.forEach(o => {\n                         erase.deleteObject(o);\n                     });\n                     \n                     renderer.render(scene, camera);\n                 }\n            }\n        }\n    },\n    onLayerAdd(layer) {\n      const layerGroup = new THREE.Group();\n      layerGroup.name = `Layer_${layer.id}`;\n      layerGroup.userData.layerId = layer.id;\n      scene.add(layerGroup);\n      this.layerGroups[layer.id] = layerGroup;\n    },\n    onLayerDelete(layer) {\n      const layerGroup = this.layerGroups[layer.id];\n      if (layerGroup) {\n        while(layerGroup.children.length > 0) {\n          layerGroup.remove(layerGroup.children[0]);\n        }\n        scene.remove(layerGroup);\n        delete this.layerGroups[layer.id];\n        renderer.render(scene, camera);\n      }\n    },\n    onLayerSelect(layer) {\n      this.activeLayerId = layer.id;\n    },\n    onLayerChange(layer) {\n      const layerGroup = this.layerGroups[layer.id];\n      if (layerGroup) {\n        layerGroup.visible = layer.visible;\n        layerGroup.traverse((child) => {\n          if (child.isMesh && child.userData && child.userData.stroke) {\n               // Update stroke opacity\n               let opacity = layer.opacity / 100;\n               // If item has its own alpha, multiply? For now, override or multiply with base stroke opacity\n               let strokeOpacity = child.userData.stroke.opacity !== undefined ? child.userData.stroke.opacity : 1;\n               child.material.opacity = strokeOpacity * opacity;\n               child.material.transparent = true;\n               if(child.material.uniforms && child.material.uniforms.opacity) {\n                   child.material.uniforms.opacity.value = child.material.opacity;\n               }\n          } else if (child.material) {\n            // General objects\n            let opacity = layer.opacity / 100;\n            if (Array.isArray(child.material)) {\n              child.material.forEach(mat => {\n                mat.opacity = opacity;\n                mat.transparent = opacity < 1;\n              });\n            } else {\n              child.material.opacity = opacity;\n              child.material.transparent = opacity < 1;\n            }\n          }\n        });\n        renderer.render(scene, camera);\n      }\n    },\n    onLayerDuplicate(payload) {\n        // payload: { newLayer, originalLayerId }\n        const originalGroup = this.layerGroups[payload.originalLayerId];\n        if (!originalGroup) return;\n\n        const newGroup = new THREE.Group();\n        newGroup.name = `Layer_${payload.newLayer.id}`;\n        newGroup.userData.layerId = payload.newLayer.id;\n\n        // Deep clone children\n        originalGroup.children.forEach(child => {\n            const clone = child.clone(true); // Recursive clone\n            \n            // We must update UUIDs for the system to treat them as new unique objects\n            // Also need to update userData logic if it references UUIDs\n            clone.uuid = THREE.MathUtils.generateUUID();\n            \n            // If it's a stroke, we might want to ensure the material is unique if we plan to change it independently later?\n            // Usually cloning mesh shares material. \n            // For independent layer opacity, sharing material is tricky if we modify material opacity directly.\n            // But we do modify directly in onLayerChange. So we should clone materials too.\n            if (clone.material) {\n                clone.material = clone.material.clone();\n            }\n            \n            newGroup.add(clone);\n        });\n\n        scene.add(newGroup);\n        this.layerGroups[payload.newLayer.id] = newGroup;\n        renderer.render(scene, camera);\n    },\n    getActiveLayerGroup() {\n      return this.layerGroups[this.activeLayerId];\n    },\n  },\n  watch: {\n    'windowStates.properties': function(val) {\n        this.propertiesVisible = val;\n    }\n  },\n  mounted() {\n    this.init();\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n    this.animate();\n\n    this.onLayerAdd({ id: 1, name: \"Layer 1\", visible: true, opacity: 100, locked: false });\n\n    vm = this;\n    this.cameraResetDisabled = false; \n  },\n  beforeUnmount() {\n      window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n};\n</script>\n\n<style>\n@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap');\n\n:root {\n  --bg-color: rgb(60, 57, 60);\n  --accent-color: rgb(255, 176, 0);\n  --accent-color-selected: rgb(228, 156, 0);\n  --ui-bg-color: rgb(30, 30, 30);\n  --line-color-lightest: rgb(255, 242, 213);\n  --line-color-light: rgb(255, 231, 178);\n  --line-color-medium: rgb(255, 220, 142);\n  --line-color-dark: rgb(255, 209, 107);\n}\n\nbody,\nhtml,\n#app {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n  margin: 0;\n  padding: 0;\n  border: 0;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  touch-action: manipulation;\n  font-weight: 900;\n  color: #1c1c1e;\n}\n\nbutton {\n  font-weight: 900;\n  color: #1c1c1e;\n}\n\n#app {\n  font-family: 'Inter', Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  height: 100%;\n  width: 100%;\n}\n\ninput[type=\"radio\"] {\n  opacity: 0;\n  position: fixed;\n  width: 0;\n}\n\ninput[type=\"radio\"]:checked + label {\n  background-color: #ffe8b3;\n}\n\ninput[type=\"radio\"]:not(:checked) + label {\n  background-color: #ffffff;\n}\n\n.disabled {\n  pointer-events: none;\n  touch-action: none;\n  opacity: 0.6;\n}\n\n.hidden {\n  display: none;\n}\n\na {\n  color: #ffb000;\n  text-decoration: none;\n}\n\na:hover {\n  color: #ff8400;\n}\n\n@media (min-width: 320px) and (max-width: 480px) {\n  #viewport {\n    display: none;\n  }\n\n  .lineSettings {\n    display: none;\n  }\n\n  .soapbar {\n    display: none;\n  }\n\n  .canvasSettings {\n    top: auto;\n    bottom: 12px;\n  }\n}\n</style>\n","import * as THREE from 'three'\n\n// Author: Fyrestar https://mevedia.com (https://github.com/Fyrestar/THREE.InfiniteGridHelper)\n// Author: Fyrestar https://mevedia.com (https://github.com/Fyrestar/THREE.InfiniteGridHelper)\nexport default function InfiniteGridHelper(size1, size2, color, distance, axes = 'xzy', color2, distanceNear = 0) {\n\n    color = color || new THREE.Color('white');\n    color2 = color2 || new THREE.Color('white'); // Default second color\n    size1 = size1 || 10;\n    size2 = size2 || 100;\n\n    distance = distance || 8000;\n    distanceNear = distanceNear || 0;\n\n\n\n    const planeAxes = axes.substr(0, 2);\n\n    const geometry = new THREE.PlaneBufferGeometry(2, 2, 1, 1);\n\n    const material = new THREE.ShaderMaterial({\n\n        side: THREE.DoubleSide,\n\n        uniforms: {\n            uSize1: {\n                value: size1\n            },\n            uSize2: {\n                value: size2\n            },\n            uColor: {\n                value: color\n            },\n            uColor2: {\n                value: color2\n            },\n            uDistance: {\n                value: distance\n            },\n            uDistanceNear: {\n                value: distanceNear\n            }\n        },\n        transparent: true,\n        vertexShader: `\n           \n           varying vec3 worldPosition;\n\t\t   \n           uniform float uDistance;\n           \n           void main() {\n           \n                vec3 pos = position.${axes} * uDistance;\n                pos.${planeAxes} += cameraPosition.${planeAxes};\n                \n                worldPosition = pos;\n                \n                gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);\n           \n           }\n           `,\n\n\n        fragmentShader: `\n           \n           varying vec3 worldPosition;\n           \n           uniform float uSize1;\n           uniform float uSize2;\n           uniform vec3 uColor;\n           uniform vec3 uColor2;\n           uniform float uDistance;\n           uniform float uDistanceNear;\n            \n            \n            \n            float getGrid(float size) {\n            \n                vec2 r = worldPosition.${planeAxes} / size;\n                \n                \n                vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);\n                float line = min(grid.x, grid.y);\n                \n            \n                return 1.0 - min(line, 1.0);\n            }\n            \n           void main() {\n           \n                \n                  float dist = distance(cameraPosition.${planeAxes}, worldPosition.${planeAxes});\n                  float d = clamp((uDistance - dist) / (uDistance - uDistanceNear), 0.0, 1.0);\n                \n                  float g1 = getGrid(uSize1);\n                  float g2 = getGrid(uSize2);\n                  \n                  // Mix colors: if g2 (large grid) is present, use uColor2, else use uColor\n                  vec3 color = mix(uColor, uColor2, g2); \n                  \n                  gl_FragColor = vec4(color.rgb, mix(g2, g1, g1) * pow(d, 3.0));\n                  gl_FragColor.a = mix(0.5 * gl_FragColor.a, gl_FragColor.a, g2);\n                \n                  if ( gl_FragColor.a <= 0.0 ) discard;\n                \n           \n           }\n           \n           `,\n\n        extensions: {\n            derivatives: true\n        }\n\n    });\n\n\n    // THREE.Mesh.call( this, geometry, material );\n\n    // this.frustumCulled = false;\n\n    let grid = new THREE.Mesh(geometry, material);\n\n    grid.frustumCulled = false;\n\n    return grid\n\n}\n\nInfiniteGridHelper.prototype = {\n    ...THREE.Mesh.prototype,\n    ...THREE.Object3D.prototype,\n    ...THREE.EventDispatcher.prototype\n};","<template>\n  <div\n    @touchstart=\"handleInput\"\n    @touchmove=\"handleInput\"\n    @touchend=\"handleInput\"\n    @mousedown=\"handleInput\"\n    @mousemove=\"handleInput\"\n    @mouseup=\"handleInput\"\n    @contextmenu=\"handleInput\"\n    id=\"threed\"\n  >\n    <span v-if=\"displayTouches\">\n      <svg\n        v-for=\"item in touches\"\n        :key=\"item.clientX\"\n        class=\"cursor\"\n        :style=\"{\n          top: item.clientY - 52 / 2 + 'px',\n          left: item.clientX - 52 / 2 + 'px',\n        }\"\n        width=\"52\"\n        height=\"52\"\n        viewBox=\"0 0 52 52\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <circle cx=\"26\" cy=\"24\" r=\"22\" fill=\"url(#paint0_radial)\" />\n        <g filter=\"url(#filter0_d)\">\n          <circle\n            cx=\"26\"\n            cy=\"24\"\n            r=\"22\"\n            stroke=\"white\"\n            stroke-opacity=\"0.38\"\n            stroke-width=\"0.5\"\n          />\n        </g>\n        <defs>\n          <filter\n            id=\"filter0_d\"\n            x=\"0.75\"\n            y=\"0.75\"\n            width=\"50.5\"\n            height=\"50.5\"\n            filterUnits=\"userSpaceOnUse\"\n            color-interpolation-filters=\"sRGB\"\n          >\n            <feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\" />\n            <feColorMatrix\n              in=\"SourceAlpha\"\n              type=\"matrix\"\n              values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"\n            />\n            <feOffset dy=\"2\" />\n            <feGaussianBlur stdDeviation=\"1.5\" />\n            <feColorMatrix\n              type=\"matrix\"\n              values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.7 0\"\n            />\n            <feBlend\n              mode=\"normal\"\n              in2=\"BackgroundImageFix\"\n              result=\"effect1_dropShadow\"\n            />\n            <feBlend\n              mode=\"normal\"\n              in=\"SourceGraphic\"\n              in2=\"effect1_dropShadow\"\n              result=\"shape\"\n            />\n          </filter>\n          <radialGradient\n            id=\"paint0_radial\"\n            cx=\"0\"\n            cy=\"0\"\n            r=\"1\"\n            gradientUnits=\"userSpaceOnUse\"\n            gradientTransform=\"translate(26 24) rotate(90) scale(22)\"\n          >\n            <stop stop-color=\"white\" stop-opacity=\"0\" />\n            <stop offset=\"1\" stop-color=\"white\" stop-opacity=\"0.42\" />\n          </radialGradient>\n        </defs></svg\n    ></span>\n  </div>\n</template>\n\n<script>\nimport { draw } from \"./draw.js\";\nimport { erase } from \"./erase.js\";\nimport { select } from \"./select.js\";\nimport { undoManager } from \"./UndoRedo.vue\";\n\nimport * as THREE from \"three\";\nimport { canvas, controls } from \"./Canvas.vue\";\nimport { renderer, scene, camera, cameraControls } from \"../App.vue\";\n\nexport default {\n  name: \"Input\",\n  data() {\n    return {\n      mouse: {\n        down: false,\n        tx: undefined, //x coord for threejs\n        ty: undefined, //y coord for threejs\n        cx: undefined, //x coord for canvas\n        cy: undefined, //y coord for canvas\n        force: 0,\n        touchLengthHistory: [0, 0],\n        multiTouched: false,\n        eventCancelled: false,\n      },\n      displayTouches: false,\n      touches: [],\n      movingCanvas: false,\n      isTransformingSelection: false,\n    };\n  },\n  props: {\n    selectedTool: String,\n    toolEnabled: Boolean,\n    mirror: [Boolean, String],\n    stroke: [Object],\n    fill: [Object],\n    radial: Boolean,\n    sectors: Number,\n    radialAxis: String,\n    localSymmetry: Boolean\n  },\n  emits: [\"mouse-coordinates\"],\n  methods: {\n    updateMouseCoordinates: function (event) {\n      if (event.touches) {\n        this.mouse.tx =\n          (event.changedTouches[0].pageX / window.innerWidth) * 2 - 1;\n        this.mouse.ty =\n          -(event.changedTouches[0].pageY / window.innerHeight) * 2 + 1;\n        this.mouse.cx = event.changedTouches[0].pageX;\n        this.mouse.cy = event.changedTouches[0].pageY;\n\n        this.mouse.touchLengthHistory.push(event.touches.length);\n        this.mouse.touchLengthHistory.shift();\n\n        if (event.touches[0] && event.touches[0][\"force\"] !== undefined) {\n          this.mouse.force = event.touches[0][\"force\"];\n        } else {\n          this.mouse.force = 0;\n        }\n      } else {\n        if (event.button == 0) {\n          this.mouse.tx = (event.clientX / window.innerWidth) * 2 - 1;\n          this.mouse.ty = -(event.clientY / window.innerHeight) * 2 + 1;\n          this.mouse.cx = event.clientX;\n          this.mouse.cy = event.clientY;\n        }\n      }\n    },\n    onStart: function (event) {\n      if ((event.button && event.button != 0) || this.toolEnabled === false) {\n        return;\n      }\n\n      this.touches = [];\n      //this is just to display the touches event\n      if (event.touches?.length > 0 && this.displayTouches == true) {\n        for (let i = 0; i < event.touches.length; i++) {\n          this.touches.push(event.touches[i]);\n        }\n      }\n\n      if (\n        event.button == 0 ||\n        event.touches.length == 1 ||\n        event.touches.force > 0\n      ) {\n        this.mouse.down = true;\n        this.mouse.eventCancelled = false;\n        this.mouse.multiTouched = false;\n        this.mouse.clickStartTime = Date.now(); // Track click duration\n        this.mouse.startCx = this.mouse.cx; // Track click position\n        this.mouse.startCy = this.mouse.cy;\n\n        let raycaster;\n        switch (this.selectedTool) {\n          case \"draw\": {\n            raycaster = new THREE.Raycaster();\n            raycaster.setFromCamera(\n              new THREE.Vector2(this.mouse.tx, this.mouse.ty),\n              camera\n            );\n            \n            // Transform Controls Logic\n            if (\n              (controls.mode === \"combined\" &&\n                controls.children.length > 0 &&\n                raycaster.intersectObjects(\n                  controls.children[0].children[10].children\n                )[0] !== undefined &&\n                controls.enabled === true) ||\n              (controls.mode === \"scale\" &&\n                controls.children.length > 0 &&\n                raycaster.intersectObjects(\n                  controls.children[0].children[5].children\n                )[0] !== undefined &&\n                controls.enabled === true)\n            ) {\n              this.movingCanvas = true;\n              cameraControls.enabled = false;\n              return;\n            } \n            \n            // Check if we hit the drawing canvas\n            const hitCanvas = raycaster.intersectObjects([canvas])[0] !== undefined;\n\n            if (hitCanvas) {\n               // Drawing Mode\n               if (controls.enabled === true) {\n                 controls.visible = false;\n                 renderer.render(scene, camera);\n               }\n               cameraControls.enabled = false; // Disable Orbit/Pan/Zoom while drawing\n               draw.onStart(\n                 this.mouse.tx,\n                 this.mouse.ty,\n                 0,\n                 this.mouse.force,\n                 true,\n                 this.mirror,\n                 this.stroke,\n                 this.fill,\n                 this.radial,\n                 this.sectors,\n                 this.radialAxis,\n                 this.localSymmetry\n               );\n            } else {\n               // Background Mode (Orbit)\n               // We do NOT call draw.onStart\n               // We ensure cameraControls is enabled\n               cameraControls.enabled = true;\n            }\n            break;\n          }\n          case \"erase\":\n            cameraControls.enabled = false;\n            erase.onStart(this.mouse.cx, this.mouse.cy);\n            break;\n          case \"select\":\n            if (select.transforming && select.transforming()) {\n                 this.isTransformingSelection = true;\n                 cameraControls.enabled = false;\n                 return;\n            }\n            this.isTransformingSelection = false;\n            cameraControls.enabled = false;\n            select.onStart(\n              this.mouse.tx,\n              this.mouse.ty,\n              this.mouse.cx,\n              this.mouse.cy,\n              event.ctrlKey\n            );\n            break;\n          default:\n            break;\n        }\n      } else {\n        //this means that we are escalating from a single touch to a multitouch and then we should cancel whatever input we started\n        this.mouse.multiTouched = true;\n        if (\n          this.mouse.touchLengthHistory[0] === 1 &&\n          this.mouse.touchLengthHistory[1] === 2\n        ) {\n          this.mouse.eventCancelled = true;\n          switch (this.selectedTool) {\n            case \"draw\":\n              draw.onCancel();\n              break;\n            case \"erase\":\n              erase.onCancel();\n              break;\n            case \"select\":\n              select.onCancel();\n              break;\n            default:\n              break;\n          }\n        }\n      }\n    },\n    onMove: function (event) {\n      if ((event.button && event.button != 0) || this.toolEnabled === false)\n        return;\n\n      this.touches = [];\n      if (event.touches?.length > 0 && this.displayTouches == true) {\n        for (let i = 0; i < event.touches.length; i++) {\n          this.touches.push(event.touches[i]);\n        }\n      }\n\n      if (this.mouse.down) {\n        if (event.button == 0 || event.touches.length == 1) {\n          switch (this.selectedTool) {\n            case \"draw\":\n              // Only draw if we actually started drawing (which means cameraControls is disabled)\n              if (cameraControls.enabled === false && this.movingCanvas === false) {\n                 // Ortho/Polar Constraint Logic (Shift Key)\n                 let tx = this.mouse.tx;\n                 let ty = this.mouse.ty;\n\n                 if (event.shiftKey) {\n                     const startCx = this.mouse.startCx;\n                     const startCy = this.mouse.startCy;\n                     const currentCx = this.mouse.cx;\n                     const currentCy = this.mouse.cy;\n\n                     const dx = currentCx - startCx;\n                     const dy = currentCy - startCy;\n                     \n                     // 1. Calculate current angle\n                     const currentAngle = Math.atan2(dy, dx);\n                     \n                     // 2. Snap to nearest 45 degrees (PI/4)\n                     const snapInterval = Math.PI / 4;\n                     const snappedAngle = Math.round(currentAngle / snapInterval) * snapInterval;\n                     \n                     // 3. Project current distance onto new angle\n                     const distance = Math.sqrt(dx*dx + dy*dy);\n                     const constrainedDx = distance * Math.cos(snappedAngle);\n                     const constrainedDy = distance * Math.sin(snappedAngle);\n                     \n                     // 4. Calculate new screen coordinates\n                     const constrainedCx = startCx + constrainedDx;\n                     const constrainedCy = startCy + constrainedDy;\n\n                     // 5. Convert back to normalized device coordinates (three.js needs these)\n                     tx = (constrainedCx / window.innerWidth) * 2 - 1;\n                     ty = -(constrainedCy / window.innerHeight) * 2 + 1;\n                 }\n\n                 draw.onMove(\n                  tx,\n                  ty,\n                  0,\n                  this.mouse.force,\n                  true\n                );\n              } else if (this.movingCanvas === true) {\n                // Moving transform controls, do nothing here\n                return;\n              }\n              break;\n            case \"erase\":\n              erase.onMove(this.mouse.cx, this.mouse.cy);\n              break;\n            case \"select\":\n              select.onMove(this.mouse.cx, this.mouse.cy);\n              break;\n            default:\n              break;\n          }\n        } else {\n          //cameraControls handle the multitouch\n        }\n      }\n    },\n    onEnd: function (event) {\n      if (this.toolEnabled === false) return;\n      this.touches = [];\n\n      // Right Click (Undo)\n      if (event.button === 2) {\n          if (undoManager.hasUndo()) {\n              undoManager.undo();\n              // Try a reactive update if needed, though undoManager handles logic\n              // Access vm to update UI if possible or just rely on undoManager callback\n              import(\"../App.vue\").then(module => {\n                  if (module.vm && module.vm.$refs.undoRedo) {\n                      module.vm.$refs.undoRedo.updateUi();\n                  }\n              })\n          }\n          return;\n      }\n\n      if (event.button && event.button != 0) return;\n\n      if (this.mouse.multiTouched || this.mouse.eventCancelled) {\n        if (controls.enabled === true && canvas.visible === true) {\n          controls.visible = true;\n          renderer.render(scene, camera);\n        }\n        cameraControls.enabled = true;\n        return;\n      } else {\n        switch (this.selectedTool) {\n          case \"draw\":\n            if (this.movingCanvas === true) {\n              this.movingCanvas = false;\n            } else {\n              if (cameraControls.enabled === false) {\n                 // We were drawing\n                 draw.onEnd(this.mirror);\n                 if (controls.enabled === true && canvas.visible === true) {\n                   controls.visible = true;\n                   renderer.render(scene, camera);\n                 }\n              } else {\n                 // We were Orbiting (cameraControls was enabled)\n                 // Check for \"Click\" (Toggle View) logic\n                 const clickDuration = Date.now() - this.mouse.clickStartTime;\n                 const dist = Math.sqrt(\n                   Math.pow(this.mouse.cx - this.mouse.startCx, 2) + \n                   Math.pow(this.mouse.cy - this.mouse.startCy, 2)\n                 );\n                 \n                 if (clickDuration < 300 && dist < 5) {\n                    this.toggleTopFrontView();\n                 }\n              }\n            }\n            break;\n          case \"erase\":\n            erase.onEnd();\n            break;\n          case \"select\":\n            if (this.isTransformingSelection) {\n                this.isTransformingSelection = false;\n                select.dragged = false; \n                if(select && select.s && select.s.controls) select.s.controls.axis = null;\n                cameraControls.enabled = true;\n                if (controls.enabled === true && canvas.visible === true) {\n                    controls.visible = true;\n                    renderer.render(scene, camera);\n                }\n                return;\n            }\n            select.onEnd(this.mouse.tx, this.mouse.ty);\n            break;\n          default:\n            break;\n        }\n      }\n      this.mouse.down = false;\n      this.mouse.distance = 0;\n      cameraControls.enabled = true; // Always restore camera controls\n    },\n    toggleTopFrontView: function() {\n        // Simple logic to toggle between Top and Front views\n        // This takes the current position and decides where to go\n        // Top: (0, Y, 0), Front: (0, 0, Z)\n        \n        let target = new THREE.Vector3();\n        cameraControls.getTarget(target);\n        \n        // Approximate current position\n        const pos = camera.position;\n        const isTop = Math.abs(pos.y) > Math.abs(pos.z) && Math.abs(pos.y) > Math.abs(pos.x);\n        \n        if (isTop) {\n            // Go to Front\n             cameraControls.rotateTo(0, Math.PI / 2, true);\n        } else {\n            // Go to Top\n             cameraControls.rotateTo(0, 0, true);\n        }\n    },\n    handleInput: function (event) {\n      if (event.type === 'contextmenu') {\n          event.preventDefault();\n          return;\n      }\n      this.updateMouseCoordinates(event);\n\n      switch (event.type) {\n        case \"touchstart\":\n          this.onStart(event);\n          break;\n        case \"touchmove\":\n          this.onMove(event);\n          break;\n        case \"touchend\":\n          if (this.toolEnabled === false) {\n            this.$emit(\"mouse-coordinates\", {\n              x: this.mouse.tx,\n              y: this.mouse.ty,\n            });\n          }\n          this.onEnd(event);\n          break;\n        case \"mousedown\":\n          this.onStart(event);\n          break;\n        case \"mousemove\":\n          this.onMove(event);\n          break;\n        case \"mouseup\":\n          if (this.toolEnabled === false) {\n            this.$emit(\"mouse-coordinates\", {\n              x: this.mouse.tx,\n              y: this.mouse.ty,\n            });\n          }\n          this.onEnd(event);\n          break;\n        default:\n        //nothing;\n      }\n    },\n  },\n  watch: {},\n  mounted() {\n    if (window.location.hash) {\n      var hash = window.location.hash.substring(1); //Puts hash in variable, and removes the # character\n      if (hash === \"displayTouches\") {\n        this.displayTouches = true;\n      }\n    }\n  },\n};\n</script>\n\n<style>\n#container {\n  height: 100%;\n  width: 100%;\n}\n\n.cursor {\n  position: absolute;\n  z-index: 6;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  touch-action: none;\n}\n\n#twod {\n  position: absolute;\n  z-index: 1;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n#threed {\n  width: 100%;\n  height: 100%;\n}\n</style>","<template>\n  <draggable-window \n    ref=\"win\"\n    title=\"Canvas\" \n    :initialX=\"initialX || 12\" \n    :initialY=\"initialY || 12\"\n    :visible=\"selectedTool == 'draw'\"\n    :reopenTrigger=\"reopenTrigger\"\n    :is-open=\"isOpen\"\n    @close=\"$emit('close')\"\n  >\n    <div class=\"canvas-controls\">\n      <!-- Transform Mode -->\n      <button \n        class=\"control-btn\"\n        @click=\"toggleTransformMode()\"\n        :disabled=\"!visible\"\n        :title=\"mode === 'combined' ? 'Move Mode' : 'Scale Mode'\"\n      >\n        <img v-if=\"mode === 'combined' ? 'Move Mode' : 'Scale Mode'\" src=\"@/assets/icons/translate.svg\" alt=\"Move\" />\n        <img v-if=\"mode === 'scale'\" src=\"@/assets/icons/scale.svg\" alt=\"Scale\" />\n        <span class=\"tooltip\">{{ mode === 'combined' ? 'Move Mode' : 'Scale Mode' }}</span>\n      </button>\n\n      <!-- Lock/Unlock -->\n      <button \n        class=\"control-btn\"\n        :class=\"{ active: !transformationEnabled }\"\n        @click=\"toggleControls()\"\n        :disabled=\"!visible\"\n        :title=\"transformationEnabled ? 'Unlocked' : 'Locked'\"\n      >\n        <img \n          :src=\"transformationEnabled ? require('@/assets/icons/lockControls.svg') : require('@/assets/icons/unlockControls.svg')\" \n          alt=\"Lock\"\n        />\n        <span class=\"tooltip\">{{ transformationEnabled ? 'Unlocked' : 'Locked' }}</span>\n      </button>\n\n      <!-- Visible/Hidden -->\n      <button \n        class=\"control-btn\"\n        :class=\"{ active: !visible }\"\n        @click=\"toggleVisibility()\"\n        :title=\"visible ? 'Visible' : 'Hidden'\"\n      >\n        <img \n          :src=\"visible ? require('@/assets/icons/hideCanvas.svg') : require('@/assets/icons/showCanvas.svg')\" \n          alt=\"Visibility\"\n        />\n        <span class=\"tooltip\">{{ visible ? 'Visible' : 'Hidden' }}</span>\n      </button>\n\n      <!-- Snap -->\n      <button \n        class=\"control-btn\"\n        :class=\"{ active: snap }\"\n        @click=\"toggleSnap()\"\n        :disabled=\"!visible\"\n        :title=\"snap ? 'Snap On' : 'Snap Off'\"\n      >\n        <img \n          :src=\"snap ? require('@/assets/icons/snapOn.svg') : require('@/assets/icons/snapOff.svg')\" \n          alt=\"Snap\"\n        />\n        <span class=\"tooltip\">{{ snap ? 'Snap On' : 'Snap Off' }}</span>\n      </button>\n\n      <!-- Reset -->\n      <button \n        class=\"control-btn\"\n        @click=\"resetTransformation()\"\n        :disabled=\"transformationResetDisabled || !visible\"\n        title=\"Reset Canvas\"\n      >\n        <img src=\"@/assets/icons/reset.svg\" alt=\"Reset\" />\n        <span class=\"tooltip\">Reset Canvas</span>\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport { reactive } from \"vue\";\nimport * as THREE from \"three\";\nimport { TransformControls } from \"./transformControls.js\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader.js\";\nimport { scene, renderer, camera, vm } from \"../App.vue\";\nimport DraggableWindow from \"./DraggableWindow.vue\";\n// import { generateMatcap } from \"./matcaps.js\";\n\n    export let canvas, controls, currentShape;\n    export let shapes = reactive([]); // List of all shapes managed by this component\n\n    let canvasMirror;\n    let geometry = new THREE.PlaneGeometry(5, 5);\n    let headGeometry;\n\n    export default {\n    name: \"Canvas\",\n    components: { DraggableWindow },\n    data() {\n        return {\n        window: window,\n        material: new THREE.MeshToonMaterial({\n            color: 0xe6edf5,\n            transparent: true,\n            opacity: 0.8,\n            side: THREE.DoubleSide,\n            polygonOffset: true,\n            polygonOffsetFactor: 2.5,\n            polygonOffsetUnits: -1,\n            emissive: new THREE.Color(\"rgb(255,255,255)\"),\n            emissiveIntensity: 0.3,\n        }),\n        startPosition: new THREE.Vector3(0.001, 0.001, 0.001),\n        startQuaternion: new THREE.Quaternion(0.001, 0.001, 0.001, 1),\n        startScale: new THREE.Vector3(1, 1, 1),\n        transformationResetDisabled: true,\n        transformationEnabled: true,\n        visible: true,\n        mode: \"combined\",\n        snap: false,\n        };\n    },\n    props: {\n        selectedShape: [String, Object], // Allow object for custom model selection\n        selectedTool: String,\n        mirror: [Boolean, String],\n        mouse: Object,\n        reopenTrigger: Number,\n        isOpen: Boolean,\n        initialX: Number,\n        initialY: Number,\n    },\n    emits: [\"selected-canvas-shape\", \"set-tool-enabled\", \"visibility-change\", \"close\"],\n    methods: {\n        getPosition() {\n        return { \n            x: this.$refs.win.currentX, \n            y: this.$refs.win.currentY \n        };\n        },\n        loadCustomModel(payload) {\n        let url, id;\n        if (typeof payload === 'object' && payload.url) {\n             url = payload.url;\n             id = payload.id;\n        } else {\n             url = payload;\n        }\n\n        if (!url) return;\n        const loader = new GLTFLoader();\n        loader.load(url, (gltf) => {\n            const model = gltf.scene;\n            \n            if (id) {\n                model.userData.customId = id;\n                model.name = \"Custom Model \" + id.substr(-4);\n            } else {\n                model.name = \"Custom Model\";\n            }\n\n            const box = new THREE.Box3().setFromObject(model);\n            const center = box.getCenter(new THREE.Vector3());\n            model.position.sub(center); \n            \n            scene.add(model);\n            shapes.push(model);\n            \n            this.selectObject(model);\n            renderer.render(scene, camera);\n        });\n        },\n        addPrimitive(type) {\n            let geo;\n            const mat = this.material.clone(); // Independent material\n            mat.visible = true;\n            mat.opacity = 0.8; \n\n            switch (type) {\n                case \"plane\":\n                    geo = new THREE.PlaneGeometry(5, 5);\n                    break;\n                case \"cube\":\n                    geo = new THREE.BoxGeometry(5, 5, 5);\n                    break;\n                case \"cylinder\":\n                    geo = new THREE.CylinderGeometry(2.5, 2.5, 5, 15);\n                    break;\n                case \"sphere\":\n                    geo = new THREE.SphereGeometry(2.5, 15, 15);\n                    break;\n                default:\n                    return;\n            }\n\n            const mesh = new THREE.Mesh(geo, mat);\n            mesh.name = type.charAt(0).toUpperCase() + type.slice(1);\n            \n            scene.add(mesh);\n            shapes.push(mesh);\n            this.selectObject(mesh);\n        },\n        addShape(mesh) {\n            // Apply Canvas Material\n            const mat = this.material.clone();\n            mat.visible = true;\n            mat.opacity = 0.8;\n            mesh.material = mat;\n            \n            // Ensure unique name\n            if (!mesh.name) mesh.name = \"Shape \" + Date.now();\n            \n            scene.add(mesh);\n            shapes.push(mesh);\n            this.selectObject(mesh);\n            renderer.render(scene, camera);\n        },\n        selectObject(object) {\n            if (!object) return;\n            \n            // Update the exported 'canvas' reference\n            // Note: Since 'canvas' is a 'let', we can reassign it.\n            // Check if controls are already attached to this object\n            if (controls.object === object) return;\n\n            controls.detach();\n            canvas = object;\n            controls.attach(canvas);\n            \n            // Update UI state if needed (e.g., reset button)\n            this.transformationResetDisabled = false; // Assume loaded models might be transformed eventually\n            \n            renderer.render(scene, camera);\n        },\n        setUp() {\n        const material = this.material;\n        canvas = new THREE.Mesh(geometry, material);\n        scene.add(canvas);\n        shapes.push(canvas);\n\n        controls = new TransformControls(camera, renderer.domElement);\n        controls.mode = \"combined\";\n        controls.addEventListener(\"change\", () => {\n            if (vm != undefined) {\n            vm.$refs.raycastCanvas.transformationResetDisabled = false;\n            }\n\n            if (canvasMirror !== undefined) {\n            var position = new THREE.Vector3();\n            canvas.getWorldPosition(position);\n            var quaternion = new THREE.Quaternion();\n            canvas.getWorldQuaternion(quaternion);\n            var scale = new THREE.Vector3();\n            canvas.getWorldScale(scale);\n            switch (vm.$refs.raycastCanvas.mirror) {\n                case \"x\":\n                canvasMirror.position.set(-position.x, position.y, position.z);\n                canvasMirror.quaternion.set(\n                    -quaternion.x,\n                    quaternion.y,\n                    quaternion.z,\n                    -quaternion.w\n                );\n                canvasMirror.scale.set(-scale.x, scale.y, scale.z);\n                canvasMirror.matrixWorldNeedsUpdate = true;\n                break;\n                case \"y\":\n                canvasMirror.position.set(position.x, -position.y, position.z);\n                canvasMirror.quaternion.set(\n                    quaternion.x,\n                    -quaternion.y,\n                    quaternion.z,\n                    -quaternion.w\n                );\n                canvasMirror.scale.set(scale.x, -scale.y, scale.z);\n                canvasMirror.matrixWorldNeedsUpdate = true;\n                break;\n                case \"z\":\n                canvasMirror.position.set(position.x, position.y, -position.z);\n                canvasMirror.quaternion.set(\n                    quaternion.x,\n                    quaternion.y,\n                    -quaternion.z,\n                    -quaternion.w\n                );\n                canvasMirror.scale.set(scale.x, scale.y, -scale.z);\n                canvasMirror.matrixWorldNeedsUpdate = true;\n                break;\n                default:\n                return;\n            }\n            }\n            renderer.render(scene, camera);\n        });\n        controls.enabled = true;\n        scene.add(controls);\n        controls.attach(canvas);\n        \n        // Add click listener for selection\n        // We'll attach to the renderer domElement or window.\n        // vm (App.vue) handles generic input, but let's add specific logic here.\n        renderer.domElement.addEventListener('pointerdown', this.onPointerDown);\n        \n        renderer.render(scene, camera);\n        },\n        onPointerDown(event) {\n            if (!this.visible || !this.transformationEnabled) return;\n            // Only select if tool is 'draw' or maybe always allowed if Gizmo is visible?\n            // User request implies selection for \"shapes\".\n            // If tool is 'draw', 'canvas' window is visible.\n            // We should check if we clicked on a shape.\n            \n            const rect = renderer.domElement.getBoundingClientRect();\n            const mouse = new THREE.Vector2();\n            mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;\n            mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;\n\n            const raycaster = new THREE.Raycaster();\n            raycaster.setFromCamera(mouse, camera);\n\n            // Raycast against all shapes\n            // Note: GLB models are Groups. Raycaster intersects meshes (recursive: true).\n            // We need to find which 'shape' (root object in shapes array) was hit.\n            const intersects = raycaster.intersectObjects(shapes, true);\n\n            if (intersects.length > 0) {\n                // Find the root shape that contains the intersected object\n                const hitObject = intersects[0].object;\n                let rootShape = null;\n                \n                // Climb up parents until we find an object in 'shapes'\n                let curr = hitObject;\n                while (curr) {\n                    if (shapes.includes(curr)) {\n                        rootShape = curr;\n                        break;\n                    }\n                    curr = curr.parent;\n                }\n\n                if (rootShape) {\n                    this.selectObject(rootShape);\n                }\n            }\n        },\n    resetTransformation() {\n      canvas.position.set(\n        this.startPosition.x,\n        this.startPosition.y,\n        this.startPosition.z\n      );\n      canvas.quaternion.set(\n        this.startQuaternion.x,\n        this.startQuaternion.y,\n        this.startQuaternion.z,\n        this.startQuaternion.w\n      );\n      canvas.scale.set(this.startScale.x, this.startScale.y, this.startScale.z);\n      renderer.render(scene, camera);\n      this.transformationResetDisabled = true;\n    },\n    toggleTransformMode() {\n      if (this.mode === \"combined\") {\n        this.mode = \"scale\";\n        controls.mode = \"scale\";\n        renderer.render(scene, camera);\n      } else {\n        this.mode = \"combined\";\n        controls.mode = \"combined\";\n        renderer.render(scene, camera);\n      }\n    },\n    toggleControls() {\n      if (controls.visible === true) {\n        this.transformationEnabled = false;\n        controls.enabled = false;\n        controls.visible = false;\n        renderer.render(scene, camera);\n      } else {\n        this.transformationEnabled = true;\n        controls.enabled = true;\n        controls.visible = true;\n        renderer.render(scene, camera);\n      }\n    },\n    toggleVisibility() {\n      if (canvas.visible === true) {\n        this.visible = false;\n        this.$emit('visibility-change', false);\n\n        if (this.transformationEnabled === true) {\n          controls.visible = false;\n        }\n\n        if (controls.enabled === true) {\n          controls.enabled = false;\n        }\n\n        canvas.visible = false;\n        renderer.render(scene, camera);\n      } else {\n        this.visible = true;\n        this.$emit('visibility-change', true);\n\n        if (this.transformationEnabled === true) {\n          controls.visible = true;\n        }\n\n        if (controls.enabled === false && this.transformationEnabled === true) {\n          controls.enabled = true;\n        }\n\n        canvas.visible = true;\n\n        renderer.render(scene, camera);\n      }\n    },\n    toggleSnap() {\n      if (this.snap === true) {\n        this.snap = !this.snap;\n        controls.translationSnap = null;\n        controls.rotationSnap = null;\n      } else {\n        this.snap = !this.snap;\n        controls.translationSnap = 1 / 3;\n        controls.rotationSnap = Math.PI / 6;\n      }\n    },\n    setUpMirror(val) {\n      switch (val) {\n        case \"x\":\n          canvasMirror = canvas.clone();\n          canvasMirror.applyMatrix4(canvas.matrixWorld.makeScale(-1, 1, 1));\n          scene.add(canvasMirror);\n          renderer.render(scene, camera);\n          break;\n        case \"y\":\n          break;\n        case \"z\":\n          break;\n        default:\n          break;\n      }\n    },\n    removeMirror() {\n      scene.remove(canvasMirror);\n    },\n    setMaterial(type) {\n         let newMat;\n         if (type === 'standard') {\n             newMat = new THREE.MeshToonMaterial({\n                color: 0xe6edf5,\n                transparent: true,\n                opacity: 0.8,\n                side: THREE.DoubleSide,\n                polygonOffset: true,\n                polygonOffsetFactor: 2.5,\n                polygonOffsetUnits: -1,\n                emissive: new THREE.Color(\"rgb(255,255,255)\"),\n                emissiveIntensity: 0.3,\n            });\n         } else {\n             let texture;\n             // Allow relative paths, http, or blobs. Basically anything that isn't 'standard'\n             if (type && type !== 'standard') {\n                 texture = new THREE.TextureLoader().load(type, () => {\n                     renderer.render(scene, camera);\n                 });\n                 \n                 newMat = new THREE.MeshMatcapMaterial({\n                     color: 0xffffff, // Ensure base color is white\n                     matcap: texture,\n                     transparent: true,\n                     opacity: 0.9,\n                     side: THREE.DoubleSide\n                 });\n             } else {\n                 return;\n             }\n         }\n         \n         this.material = newMat;\n         \n         // Update only the currently selected shape\n         if (canvas) {\n             if (canvas.isMesh) {\n                 canvas.material = newMat; \n             } else if (canvas.isGroup) {\n                 canvas.traverse(child => {\n                     if (child.isMesh) child.material = newMat;\n                 });\n             }\n         }\n         renderer.render(scene, camera);\n    },\n  },\n  watch: {\n    opacity: function (val) {\n      this.material.opacity = val;\n      if (val == 0) {\n        this.material.visible = false;\n      } else {\n        this.material.visible = true;\n      }\n      renderer.render(scene, camera);\n    },\n\n    selectedShape: function (val) {\n      if (!val) return;\n      if (val === 'custom') return; // Custom models are handled via loadCustomModel\n\n      // Handle custom model selection by ID\n      if (typeof val === 'object' && val.customId) {\n          const found = shapes.find(s => s.userData && s.userData.customId === val.customId);\n          if (found) {\n              this.selectObject(found);\n          }\n          return;\n      }\n\n      // If the current canvas is a Group (from GLB), we must replace it with a Mesh\n      // to allow applying primitive geometries.\n      if (!canvas.isMesh) {\n          // Keep reference to position/rotation/scale if we want to preserve them?\n          // For now, let's keep them.\n          const oldPos = canvas.position.clone();\n          const oldQuat = canvas.quaternion.clone();\n          const oldScale = canvas.scale.clone();\n          \n          // Remove from scene and shapes list\n          scene.remove(canvas);\n          const idx = shapes.indexOf(canvas);\n          if (idx !== -1) shapes.splice(idx, 1);\n          controls.detach();\n          \n          // Create new Mesh\n          canvas = new THREE.Mesh(new THREE.PlaneGeometry(1, 1), this.material);\n          canvas.position.copy(oldPos);\n          canvas.quaternion.copy(oldQuat);\n          canvas.scale.copy(oldScale);\n          \n          scene.add(canvas);\n          shapes.push(canvas);\n          controls.attach(canvas);\n      }\n\n      switch (val) {\n        case \"plane\":\n          if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.PlaneGeometry(5, 5);\n          break;\n        case \"cube\":\n          if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.BoxGeometry(5, 5, 5);\n          break;\n        case \"cylinder\":\n           if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.CylinderGeometry(2.5, 2.5, 5, 15);\n          break;\n        case \"sphere\":\n           if (canvas.geometry) canvas.geometry.dispose();\n          canvas.geometry = new THREE.SphereGeometry(2.5, 15, 15);\n          break;\n        case \"head\":\n          if (canvas.geometry) canvas.geometry.dispose();\n          if (headGeometry === undefined) {\n            const loader = new GLTFLoader();\n            loader.load(\"asaro.glb\", function (gltf) {\n              headGeometry = gltf.scene.children[0].geometry;\n              // Check if canvas is still valid/same\n              if (canvas.geometry) canvas.geometry.dispose();\n              canvas.geometry = headGeometry;\n              canvas.geometry.needsUpdate = true;\n              renderer.render(scene, camera);\n            });\n          } else {\n            canvas.geometry = headGeometry;\n            canvas.geometry.needsUpdate = true;\n            renderer.render(scene, camera);\n          }\n          break;\n        default:\n          break;\n      }\n      \n      if (canvas.geometry) canvas.geometry.needsUpdate = true;\n      renderer.render(scene, camera);\n    },\n\n    mirror: function (val) {\n      if (val === false) {\n        this.removeMirror();\n      } else {\n        this.setUpMirror(val);\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n.canvas-controls {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n  position: relative;\n}\n\n.separator {\n  width: 1px;\n  height: 32px;\n  background-color: rgba(255, 255, 255, 0.1);\n  margin: 0 4px;\n}\n\n.control-btn {\n  position: relative;\n  width: 40px;\n  height: 40px;\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  padding: 0;\n}\n\n.control-btn:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n.control-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.control-btn.active {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.3);\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);\n}\n\n.control-btn img {\n  width: 24px;\n  height: 24px;\n  filter: brightness(0) invert(1);\n}\n\n/* Tooltip */\n.tooltip {\n  position: absolute;\n  bottom: -32px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.9);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  white-space: nowrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s;\n  z-index: 1000;\n}\n\n.control-btn:hover .tooltip {\n  opacity: 1;\n}\n\n/* Arrow for tooltip */\n.tooltip::before {\n  content: '';\n  position: absolute;\n  top: -4px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 0;\n  height: 0;\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(0, 0, 0, 0.9);\n}\n\n/* Shape Dropdown */\n.shape-dropdown {\n  position: absolute;\n  top: 48px;\n  left: 0;\n  display: flex;\n  gap: 4px;\n  background: rgba(30, 30, 30, 0.95);\n  backdrop-filter: blur(16px);\n  padding: 8px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  z-index: 100;\n}\n\n.shape-option {\n  position: relative;\n  width: 40px;\n  height: 40px;\n  background: rgba(255, 255, 255, 0.05);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 6px;\n  padding: 0;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: all 0.2s;\n}\n\n.shape-option:hover {\n  background: rgba(255, 255, 255, 0.15);\n}\n\n.shape-option img {\n  width: 24px;\n  height: 24px;\n}\n</style>","import {\n    BoxGeometry,\n    BufferGeometry,\n    CylinderGeometry,\n    DoubleSide,\n    Euler,\n    Float32BufferAttribute,\n    Line,\n    LineBasicMaterial,\n    Matrix4,\n    Mesh,\n    MeshBasicMaterial,\n    Object3D,\n    OctahedronGeometry,\n    PlaneGeometry,\n    Quaternion,\n    Raycaster,\n    RingGeometry,\n    // SphereGeometry,\n    TorusGeometry,\n    Vector3,\n} from 'three';\n\nconst _raycaster = new Raycaster();\n\nconst _tempVector = new Vector3();\nconst _tempVector2 = new Vector3();\nconst _tempQuaternion = new Quaternion();\nconst _unit = {\n    X: new Vector3(1, 0, 0),\n    Y: new Vector3(0, 1, 0),\n    Z: new Vector3(0, 0, 1)\n};\n\nconst _changeEvent = { type: 'change' };\nconst _mouseDownEvent = { type: 'mouseDown' };\nconst _mouseUpEvent = { type: 'mouseUp', mode: null };\nconst _objectChangeEvent = { type: 'objectChange' };\n\nclass TransformControls extends Object3D {\n\n    constructor(camera, domElement) {\n\n        super();\n\n        if (domElement === undefined) {\n\n            console.warn('THREE.TransformControls: The second parameter \"domElement\" is now mandatory.');\n            domElement = document;\n\n        }\n\n        this.visible = false;\n        this.domElement = domElement;\n        this.domElement.style.touchAction = 'none'; // disable touch scroll\n\n        const _gizmo = new TransformControlsGizmo();\n        this._gizmo = _gizmo;\n        this.add(_gizmo);\n\n        const _plane = new TransformControlsPlane();\n        this._plane = _plane;\n        this.add(_plane);\n\n        const scope = this;\n\n        // Defined getter, setter and store for a property\n        function defineProperty(propName, defaultValue) {\n\n            let propValue = defaultValue;\n\n            Object.defineProperty(scope, propName, {\n\n                get: function () {\n\n                    return propValue !== undefined ? propValue : defaultValue;\n\n                },\n\n                set: function (value) {\n\n                    if (propValue !== value) {\n\n                        propValue = value;\n                        _plane[propName] = value;\n                        _gizmo[propName] = value;\n\n                        scope.dispatchEvent({ type: propName + '-changed', value: value });\n                        scope.dispatchEvent(_changeEvent);\n\n                    }\n\n                }\n\n            });\n\n            scope[propName] = defaultValue;\n            _plane[propName] = defaultValue;\n            _gizmo[propName] = defaultValue;\n\n        }\n\n        // Define properties with getters/setter\n        // Setting the defined property will automatically trigger change event\n        // Defined properties are passed down to gizmo and plane\n\n        defineProperty('camera', camera);\n        defineProperty('object', undefined);\n        defineProperty('enabled', true);\n        defineProperty('axis', null);\n        defineProperty('mode', 'translate');\n        defineProperty('translationSnap', null);\n        defineProperty('rotationSnap', null);\n        defineProperty('scaleSnap', null);\n        defineProperty('space', 'world');\n        defineProperty('size', 1);\n        defineProperty('dragging', false);\n        defineProperty('showX', true);\n        defineProperty('showY', true);\n        defineProperty('showZ', true);\n\n        // Reusable utility variables\n\n        const worldPosition = new Vector3();\n        const worldPositionStart = new Vector3();\n        const worldQuaternion = new Quaternion();\n        const worldQuaternionStart = new Quaternion();\n        const cameraPosition = new Vector3();\n        const cameraQuaternion = new Quaternion();\n        const pointStart = new Vector3();\n        const pointEnd = new Vector3();\n        const rotationAxis = new Vector3();\n        const rotationAngle = 0;\n        const eye = new Vector3();\n\n        // TODO: remove properties unused in plane and gizmo\n\n        defineProperty('worldPosition', worldPosition);\n        defineProperty('worldPositionStart', worldPositionStart);\n        defineProperty('worldQuaternion', worldQuaternion);\n        defineProperty('worldQuaternionStart', worldQuaternionStart);\n        defineProperty('cameraPosition', cameraPosition);\n        defineProperty('cameraQuaternion', cameraQuaternion);\n        defineProperty('pointStart', pointStart);\n        defineProperty('pointEnd', pointEnd);\n        defineProperty('rotationAxis', rotationAxis);\n        defineProperty('rotationAngle', rotationAngle);\n        defineProperty('eye', eye);\n\n        this._offset = new Vector3();\n        this._startNorm = new Vector3();\n        this._endNorm = new Vector3();\n        this._cameraScale = new Vector3();\n\n        this._parentPosition = new Vector3();\n        this._parentQuaternion = new Quaternion();\n        this._parentQuaternionInv = new Quaternion();\n        this._parentScale = new Vector3();\n\n        this._worldScaleStart = new Vector3();\n        this._worldQuaternionInv = new Quaternion();\n        this._worldScale = new Vector3();\n\n        this._positionStart = new Vector3();\n        this._quaternionStart = new Quaternion();\n        this._scaleStart = new Vector3();\n\n        this._getPointer = getPointer.bind(this);\n        this._onPointerDown = onPointerDown.bind(this);\n        this._onPointerHover = onPointerHover.bind(this);\n        this._onPointerMove = onPointerMove.bind(this);\n        this._onPointerUp = onPointerUp.bind(this);\n\n        this.domElement.addEventListener('pointerdown', this._onPointerDown);\n        this.domElement.addEventListener('pointermove', this._onPointerHover);\n        this.domElement.ownerDocument.addEventListener('pointerup', this._onPointerUp);\n\n    }\n\n    // updateMatrixWorld  updates key transformation variables\n    updateMatrixWorld() {\n\n        if (this.object !== undefined) {\n\n            this.object.updateMatrixWorld();\n\n            if (this.object.parent === null) {\n\n                console.error('TransformControls: The attached 3D object must be a part of the scene graph.');\n\n            } else {\n\n                this.object.parent.matrixWorld.decompose(this._parentPosition, this._parentQuaternion, this._parentScale);\n\n            }\n\n            this.object.matrixWorld.decompose(this.worldPosition, this.worldQuaternion, this._worldScale);\n\n            this._parentQuaternionInv.copy(this._parentQuaternion).invert();\n            this._worldQuaternionInv.copy(this.worldQuaternion).invert();\n\n        }\n\n        this.camera.updateMatrixWorld();\n        this.camera.matrixWorld.decompose(this.cameraPosition, this.cameraQuaternion, this._cameraScale);\n\n        this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize();\n\n        super.updateMatrixWorld(this);\n\n    }\n\n    pointerHover(pointer) {\n\n        if (this.object === undefined || this.dragging === true) return;\n\n        _raycaster.setFromCamera(pointer, this.camera);\n\n        const intersect = intersectObjectWithRay(this._gizmo.picker[this.mode], _raycaster);\n\n        if (intersect) {\n\n            this.axis = intersect.object.name;\n\n        } else {\n\n            this.axis = null;\n\n        }\n\n    }\n\n    pointerDown(pointer) {\n\n        if (this.object === undefined || this.dragging === true || pointer.button !== 0) return;\n\n        if (this.axis !== null) {\n\n            _raycaster.setFromCamera(pointer, this.camera);\n\n            const planeIntersect = intersectObjectWithRay(this._plane, _raycaster, true);\n\n            if (planeIntersect) {\n\n                let space = this.space;\n\n                if (this.mode === 'scale') {\n\n                    space = 'local';\n\n                } else if (this.axis === 'E' || this.axis === 'XYZE' || this.axis === 'XYZ') {\n\n                    space = 'world';\n\n                }\n\n                if (space === 'local' && this.mode === 'rotate') {\n\n                    const snap = this.rotationSnap;\n\n                    if (this.axis === 'X' && snap) this.object.rotation.x = Math.round(this.object.rotation.x / snap) * snap;\n                    if (this.axis === 'Y' && snap) this.object.rotation.y = Math.round(this.object.rotation.y / snap) * snap;\n                    if (this.axis === 'Z' && snap) this.object.rotation.z = Math.round(this.object.rotation.z / snap) * snap;\n\n                }\n\n                this.object.updateMatrixWorld();\n                this.object.parent.updateMatrixWorld();\n\n                this._positionStart.copy(this.object.position);\n                this._quaternionStart.copy(this.object.quaternion);\n                this._scaleStart.copy(this.object.scale);\n\n                this.object.matrixWorld.decompose(this.worldPositionStart, this.worldQuaternionStart, this._worldScaleStart);\n\n                this.pointStart.copy(planeIntersect.point).sub(this.worldPositionStart);\n\n            }\n\n            this.dragging = true;\n            _mouseDownEvent.mode = this.mode;\n            this.dispatchEvent(_mouseDownEvent);\n\n        }\n\n    }\n\n    pointerMove(pointer) {\n\n        let axis = this.axis;\n        let mode = this.mode;\n        const object = this.object;\n        let space = this.space;\n\n        switch (axis) {\n            case \"XT\":\n                axis = \"X\";\n                mode = \"translate\"\n                break;\n            case \"XR\":\n                axis = \"Y\";\n                mode = \"rotate\"\n                break;\n            case \"YT\":\n                axis = \"Y\";\n                mode = \"translate\"\n                break;\n            case \"YR\":\n                axis = \"Z\";\n                mode = \"rotate\"\n                break;\n            case \"ZT\":\n                axis = \"Z\";\n                mode = \"translate\"\n                break;\n            case \"ZR\":\n                axis = \"X\";\n                mode = \"rotate\"\n                break;\n            case \"XYZ\":\n                axis = \"XYZ\";\n                mode = \"translate\"\n                break;\n            default:\n                break;\n        }\n\n        if (mode === 'scale') {\n\n            space = 'local';\n\n        } else if (axis === 'E' || axis === 'XYZE' || axis === 'XYZ') {\n\n            space = 'world';\n\n        }\n\n        if (object === undefined || axis === null || this.dragging === false || pointer.button !== - 1) return;\n\n        _raycaster.setFromCamera(pointer, this.camera);\n\n        const planeIntersect = intersectObjectWithRay(this._plane, _raycaster, true);\n\n        if (!planeIntersect) return;\n\n        this.pointEnd.copy(planeIntersect.point).sub(this.worldPositionStart);\n\n        if (mode === 'translate') {\n\n            // Apply translate\n\n            this._offset.copy(this.pointEnd).sub(this.pointStart);\n\n            if (space === 'local' && axis !== 'XYZ') {\n\n                this._offset.applyQuaternion(this._worldQuaternionInv);\n\n            }\n\n            if (axis.indexOf('X') === - 1) this._offset.x = 0;\n            if (axis.indexOf('Y') === - 1) this._offset.y = 0;\n            if (axis.indexOf('Z') === - 1) this._offset.z = 0;\n\n            if (space === 'local' && axis !== 'XYZ') {\n\n                this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale);\n\n            } else {\n\n                this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale);\n\n            }\n\n            object.position.copy(this._offset).add(this._positionStart);\n\n            // Apply translation snap\n\n            if (this.translationSnap) {\n\n                if (space === 'local') {\n\n                    object.position.applyQuaternion(_tempQuaternion.copy(this._quaternionStart).invert());\n\n                    if (axis.search('X') !== - 1) {\n\n                        object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Y') !== - 1) {\n\n                        object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Z') !== - 1) {\n\n                        object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    object.position.applyQuaternion(this._quaternionStart);\n\n                }\n\n                if (space === 'world') {\n\n                    if (object.parent) {\n\n                        object.position.add(_tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n\n                    }\n\n                    if (axis.search('X') !== - 1) {\n\n                        object.position.x = Math.round(object.position.x / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Y') !== - 1) {\n\n                        object.position.y = Math.round(object.position.y / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (axis.search('Z') !== - 1) {\n\n                        object.position.z = Math.round(object.position.z / this.translationSnap) * this.translationSnap;\n\n                    }\n\n                    if (object.parent) {\n\n                        object.position.sub(_tempVector.setFromMatrixPosition(object.parent.matrixWorld));\n\n                    }\n\n                }\n\n            }\n\n        } else if (mode === 'scale') {\n\n            if (axis.search('XYZ') !== - 1) {\n\n                let d = this.pointEnd.length() / this.pointStart.length();\n\n                if (this.pointEnd.dot(this.pointStart) < 0) d *= - 1;\n\n                _tempVector2.set(d, d, d);\n\n            } else {\n\n                _tempVector.copy(this.pointStart);\n                _tempVector2.copy(this.pointEnd);\n\n                _tempVector.applyQuaternion(this._worldQuaternionInv);\n                _tempVector2.applyQuaternion(this._worldQuaternionInv);\n\n                _tempVector2.divide(_tempVector);\n\n                if (axis.search('X') === - 1) {\n\n                    _tempVector2.x = 1;\n\n                }\n\n                if (axis.search('Y') === - 1) {\n\n                    _tempVector2.y = 1;\n\n                }\n\n                if (axis.search('Z') === - 1) {\n\n                    _tempVector2.z = 1;\n\n                }\n\n            }\n\n            // Apply scale\n\n            object.scale.copy(this._scaleStart).multiply(_tempVector2);\n\n            if (this.scaleSnap) {\n\n                if (axis.search('X') !== - 1) {\n\n                    object.scale.x = Math.round(object.scale.x / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n\n                }\n\n                if (axis.search('Y') !== - 1) {\n\n                    object.scale.y = Math.round(object.scale.y / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n\n                }\n\n                if (axis.search('Z') !== - 1) {\n\n                    object.scale.z = Math.round(object.scale.z / this.scaleSnap) * this.scaleSnap || this.scaleSnap;\n\n                }\n\n            }\n\n        } else if (mode === 'rotate') {\n\n            this._offset.copy(this.pointEnd).sub(this.pointStart);\n\n            const ROTATION_SPEED = 20 / this.worldPosition.distanceTo(_tempVector.setFromMatrixPosition(this.camera.matrixWorld));\n\n            if (axis === 'E') {\n\n                this.rotationAxis.copy(this.eye);\n                this.rotationAngle = this.pointEnd.angleTo(this.pointStart);\n\n                this._startNorm.copy(this.pointStart).normalize();\n                this._endNorm.copy(this.pointEnd).normalize();\n\n                this.rotationAngle *= (this._endNorm.cross(this._startNorm).dot(this.eye) < 0 ? 1 : - 1);\n\n            } else if (axis === 'XYZE') {\n\n                this.rotationAxis.copy(this._offset).cross(this.eye).normalize();\n                this.rotationAngle = this._offset.dot(_tempVector.copy(this.rotationAxis).cross(this.eye)) * ROTATION_SPEED;\n\n            } else if (axis === 'X' || axis === 'Y' || axis === 'Z') {\n\n                this.rotationAxis.copy(_unit[axis]);\n\n                _tempVector.copy(_unit[axis]);\n\n                if (space === 'local') {\n\n                    _tempVector.applyQuaternion(this.worldQuaternion);\n\n                }\n\n                this.rotationAngle = this._offset.dot(_tempVector.cross(this.eye).normalize()) * ROTATION_SPEED;\n\n            }\n\n            // Apply rotation snap\n\n            if (this.rotationSnap) this.rotationAngle = Math.round(this.rotationAngle / this.rotationSnap) * this.rotationSnap;\n\n            // Apply rotate\n            if (space === 'local' && axis !== 'E' && axis !== 'XYZE') {\n\n                object.quaternion.copy(this._quaternionStart);\n                object.quaternion.multiply(_tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle)).normalize();\n\n            } else {\n\n                this.rotationAxis.applyQuaternion(this._parentQuaternionInv);\n                object.quaternion.copy(_tempQuaternion.setFromAxisAngle(this.rotationAxis, this.rotationAngle));\n                object.quaternion.multiply(this._quaternionStart).normalize();\n\n            }\n\n        }\n\n        this.dispatchEvent(_changeEvent);\n        this.dispatchEvent(_objectChangeEvent);\n\n    }\n\n    pointerUp(pointer) {\n\n        if (pointer.button !== 0) return;\n\n        if (this.dragging && (this.axis !== null)) {\n\n            _mouseUpEvent.mode = this.mode;\n            this.dispatchEvent(_mouseUpEvent);\n\n        }\n\n        this.dragging = false;\n        this.axis = null;\n\n    }\n\n    dispose() {\n\n        this.domElement.removeEventListener('pointerdown', this._onPointerDown);\n        this.domElement.removeEventListener('pointermove', this._onPointerHover);\n        this.domElement.ownerDocument.removeEventListener('pointermove', this._onPointerMove);\n        this.domElement.ownerDocument.removeEventListener('pointerup', this._onPointerUp);\n\n        this.traverse(function (child) {\n\n            if (child.geometry) child.geometry.dispose();\n            if (child.material) child.material.dispose();\n\n        });\n\n    }\n\n    // Set current object\n    attach(object) {\n\n        this.object = object;\n        this.visible = true;\n\n        return this;\n\n    }\n\n    // Detatch from object\n    detach() {\n\n        this.object = undefined;\n        this.visible = false;\n        this.axis = null;\n\n        return this;\n\n    }\n\n    // TODO: deprecate\n\n    getMode() {\n\n        return this.mode;\n\n    }\n\n    setMode(mode) {\n\n        this.mode = mode;\n\n    }\n\n    setTranslationSnap(translationSnap) {\n\n        this.translationSnap = translationSnap;\n\n    }\n\n    setRotationSnap(rotationSnap) {\n\n        this.rotationSnap = rotationSnap;\n\n    }\n\n    setScaleSnap(scaleSnap) {\n\n        this.scaleSnap = scaleSnap;\n\n    }\n\n    setSize(size) {\n\n        this.size = size;\n\n    }\n\n    setSpace(space) {\n\n        this.space = space;\n\n    }\n\n    update() {\n\n        console.warn('THREE.TransformControls: update function has no more functionality and therefore has been deprecated.');\n\n    }\n\n}\n\nTransformControls.prototype.isTransformControls = true;\n\n// mouse / touch event handlers\n\nfunction getPointer(event) {\n\n    if (this.domElement.ownerDocument.pointerLockElement) {\n\n        return {\n            x: 0,\n            y: 0,\n            button: event.button\n        };\n\n    } else {\n\n        const rect = this.domElement.getBoundingClientRect();\n\n        return {\n            x: (event.clientX - rect.left) / rect.width * 2 - 1,\n            y: - (event.clientY - rect.top) / rect.height * 2 + 1,\n            button: event.button\n        };\n\n    }\n\n}\n\nfunction onPointerHover(event) {\n\n    if (!this.enabled) return;\n\n    switch (event.pointerType) {\n\n        case 'mouse':\n        case 'pen':\n            this.pointerHover(this._getPointer(event));\n            break;\n\n    }\n\n}\n\nfunction onPointerDown(event) {\n\n    if (!this.enabled) return;\n\n    this.domElement.ownerDocument.addEventListener('pointermove', this._onPointerMove);\n\n    this.pointerHover(this._getPointer(event));\n    this.pointerDown(this._getPointer(event));\n\n}\n\nfunction onPointerMove(event) {\n\n    if (!this.enabled) return;\n\n    this.pointerMove(this._getPointer(event));\n\n}\n\nfunction onPointerUp(event) {\n\n    if (!this.enabled) return;\n\n    this.domElement.ownerDocument.removeEventListener('pointermove', this._onPointerMove);\n\n    this.pointerUp(this._getPointer(event));\n\n}\n\nfunction intersectObjectWithRay(object, raycaster, includeInvisible) {\n\n    const allIntersections = raycaster.intersectObject(object, true);\n\n    for (let i = 0; i < allIntersections.length; i++) {\n\n        if (allIntersections[i].object.visible || includeInvisible) {\n\n            return allIntersections[i];\n\n        }\n\n    }\n\n    return false;\n\n}\n\n//\n\n// Reusable utility variables\n\nconst _tempEuler = new Euler();\nconst _alignVector = new Vector3(0, 1, 0);\nconst _zeroVector = new Vector3(0, 0, 0);\nconst _lookAtMatrix = new Matrix4();\nconst _tempQuaternion2 = new Quaternion();\nconst _identityQuaternion = new Quaternion();\nconst _dirVector = new Vector3();\nconst _tempMatrix = new Matrix4();\n\nconst _unitX = new Vector3(1, 0, 0);\nconst _unitY = new Vector3(0, 1, 0);\nconst _unitZ = new Vector3(0, 0, 1);\n\nconst _v1 = new Vector3();\nconst _v2 = new Vector3();\nconst _v3 = new Vector3();\n\nclass TransformControlsGizmo extends Object3D {\n\n    constructor() {\n\n        super();\n\n        this.type = 'TransformControlsGizmo';\n\n        // shared materials\n\n        const gizmoMaterial = new MeshBasicMaterial({\n            depthTest: false,\n            depthWrite: false,\n            fog: false,\n            toneMapped: false,\n            transparent: true\n        });\n\n        const gizmoLineMaterial = new LineBasicMaterial({\n            depthTest: false,\n            depthWrite: false,\n            fog: false,\n            toneMapped: false,\n            transparent: true\n        });\n\n        // Make unique material for each axis/color\n\n        const matInvisible = gizmoMaterial.clone();\n        matInvisible.opacity = 0.15;\n\n        const matHelper = gizmoLineMaterial.clone();\n        matHelper.opacity = 1;\n        matHelper.color.setHex(0xFFD880);\n\n        const matRed = gizmoMaterial.clone();\n        matRed.color.setHex(0xFF8080);\n        matRed.side = DoubleSide;\n\n        const matRedArrow = gizmoMaterial.clone();\n        matRedArrow.color.setHex(0xFF8080);\n\n        const matGreen = gizmoMaterial.clone();\n        matGreen.color.setHex(0x80FFC9);\n        matGreen.side = DoubleSide;\n\n        const matGreenArrow = gizmoMaterial.clone();\n        matGreenArrow.color.setHex(0x80FFC9);\n\n        const matBlue = gizmoMaterial.clone();\n        matBlue.color.setHex(0x809CFF);\n        matBlue.side = DoubleSide;\n\n        const matBlueArrow = gizmoMaterial.clone();\n        matBlueArrow.color.setHex(0x809CFF);\n\n        const matRedTransparent = gizmoMaterial.clone();\n        matRedTransparent.color.setHex(0xFF8080);\n        matRedTransparent.opacity = 0.5;\n        matRedTransparent.name = \"matRedTransparent\";\n\n        const matGreenTransparent = gizmoMaterial.clone();\n        matGreenTransparent.color.setHex(0x80FFC9);\n        matGreenTransparent.opacity = 0.5;\n\n        const matBlueTransparent = gizmoMaterial.clone();\n        matBlueTransparent.color.setHex(0x809CFF);\n        matBlueTransparent.opacity = 0.5;\n\n        const matWhiteTransparent = gizmoMaterial.clone();\n        matWhiteTransparent.opacity = 0.25;\n\n        const matYellowTransparent = gizmoMaterial.clone();\n        matYellowTransparent.color.setHex(0xFFD880);\n        matYellowTransparent.opacity = 0.5;\n\n        const matYellow = gizmoMaterial.clone();\n        matYellow.color.setHex(0xFFD880);\n\n        const matGray = gizmoMaterial.clone();\n        matGray.color.setHex(0x787878);\n\n        // reusable geometry\n\n        const arrowGeometry = new CylinderGeometry(0, 0.055, 0.125, 12);\n        arrowGeometry.translate(0, 0.05, 0);\n\n        const arrowPickerGeometry = new CylinderGeometry(0.02, 0.06, 0.15, 12);\n        arrowPickerGeometry.translate(0, 0.05, 0);\n\n        const scaleHandleGeometry = new BoxGeometry(0.08, 0.08, 0.08);\n        scaleHandleGeometry.translate(0, 0.04, 0);\n\n        const lineGeometry = new BufferGeometry();\n        lineGeometry.setAttribute('position', new Float32BufferAttribute([0, 0, 0, 1, 0, 0], 3));\n\n        const lineGeometry2 = new CylinderGeometry(0.0075, 0.0075, 0.5, 3);\n        lineGeometry2.translate(0, 0.25, 0);\n\n        function CircleGeometry(radius) {\n            const geometry = new RingGeometry(radius + 0.01, radius + 0.1, 10, 10, 0.5, Math.PI / 2 - 1);\n            geometry.rotateY(Math.PI / 2);\n            geometry.rotateX(Math.PI / 2);\n            return geometry;\n        }\n\n        // Special geometry for transform helper. If scaled with position vector it spans from [0,0,0] to position\n\n        function TranslateHelperGeometry() {\n\n            const geometry = new BufferGeometry();\n\n            geometry.setAttribute('position', new Float32BufferAttribute([0, 0, 0, 1, 1, 1], 3));\n\n            return geometry;\n\n        }\n\n        // Gizmo definitions - custom hierarchy definitions for setupGizmo() function\n\n        const gizmoTranslate = {\n            X: [\n                [new Mesh(arrowGeometry, matRed), [0.5, 0, 0], [0, 0, - Math.PI / 2]],\n                // [new Mesh(arrowGeometry, matRed), [- 0.5, 0, 0], [0, 0, Math.PI / 2]],\n                // [new Mesh(lineGeometry2, matRed), [0, 0, 0], [0, 0, - Math.PI / 2]]\n            ],\n            Y: [\n                [new Mesh(arrowGeometry, matGreen), [0, 0.5, 0]],\n                // [new Mesh(arrowGeometry, matGreen), [0, - 0.5, 0], [Math.PI, 0, 0]],\n                // [new Mesh(lineGeometry2, matGreen)]\n            ],\n            Z: [\n                [new Mesh(arrowGeometry, matBlue), [0, 0, 0.5], [Math.PI / 2, 0, 0]],\n                // [new Mesh(arrowGeometry, matBlue), [0, 0, - 0.5], [- Math.PI / 2, 0, 0]],\n                // [new Mesh(lineGeometry2, matBlue), null, [Math.PI / 2, 0, 0]]\n            ],\n            // XYZ: [\n            //     [new Mesh(new OctahedronGeometry(0.1, 0), matWhiteTransparent.clone()), [0, 0, 0]]\n            // ],\n            // XY: [\n            //     [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matBlueTransparent.clone()), [0.15, 0.15, 0]]\n            // ],\n            // YZ: [\n            //     [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matRedTransparent.clone()), [0, 0.15, 0.15], [0, Math.PI / 2, 0]]\n            // ],\n            // XZ: [\n            //     [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matGreenTransparent.clone()), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]]\n            // ]\n        };\n\n        const pickerTranslate = {\n            X: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0.3, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [- 0.3, 0, 0], [0, 0, Math.PI / 2]]\n            ],\n            Y: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0.3, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, - 0.3, 0], [0, 0, Math.PI]]\n            ],\n            Z: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, 0.3], [Math.PI / 2, 0, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, - 0.3], [- Math.PI / 2, 0, 0]]\n            ],\n            // XYZ: [\n            //     [new Mesh(new OctahedronGeometry(0.2, 0), matInvisible)]\n            // ],\n            // XY: [\n            //     [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0.15, 0]]\n            // ],\n            // YZ: [\n            //     [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0, 0.15, 0.15], [0, Math.PI / 2, 0]]\n            // ],\n            // XZ: [\n            //     [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]]\n            // ]\n        };\n\n        const helperTranslate = {\n            START: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            END: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            DELTA: [\n                [new Line(TranslateHelperGeometry(), matHelper), null, null, null, 'helper']\n            ],\n            X: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ],\n            Y: [\n                [new Line(lineGeometry, matHelper.clone()), [0, - 1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], 'helper']\n            ],\n            Z: [\n                [new Line(lineGeometry, matHelper.clone()), [0, 0, - 1e3], [0, - Math.PI / 2, 0], [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        const gizmoRotate = {\n            // XYZE: [\n            //     [new Mesh(CircleGeometry(0.5, 1), matGray), null, [0, Math.PI / 2, 0]]\n            // ],\n            X: [\n                [new Mesh(CircleGeometry(0.5, 0.5), matRed)]\n            ],\n            Y: [\n                [new Mesh(CircleGeometry(0.5, 0.5), matGreen), null, [0, 0, - Math.PI / 2]]\n            ],\n            Z: [\n                [new Mesh(CircleGeometry(0.5, 0.5), matBlue), null, [0, Math.PI / 2, 0]]\n            ],\n            // E: [\n            //     [new Mesh(CircleGeometry(0.75, 1), matYellowTransparent), null, [0, Math.PI / 2, 0]]\n            // ]\n        };\n\n        const helperRotate = {\n            AXIS: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        const pickerRotate = {\n            // XYZE: [\n            //     [new Mesh(new SphereGeometry(0.25, 10, 8), matInvisible)]\n            // ],\n            X: [\n                [new Mesh(new TorusGeometry(0.5, 0.1, 4, 24), matInvisible), [0, 0, 0], [0, - Math.PI / 2, - Math.PI / 2]],\n            ],\n            Y: [\n                [new Mesh(new TorusGeometry(0.5, 0.1, 4, 24), matInvisible), [0, 0, 0], [Math.PI / 2, 0, 0]],\n            ],\n            Z: [\n                [new Mesh(new TorusGeometry(0.5, 0.1, 4, 24), matInvisible), [0, 0, 0], [0, 0, - Math.PI / 2]],\n            ],\n            // E: [\n            //     [new Mesh(new TorusGeometry(0.75, 0.1, 2, 24), matInvisible)]\n            // ]\n        };\n\n        const gizmoScale = {\n            X: [\n                [new Mesh(scaleHandleGeometry, matRed), [0.5, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(lineGeometry2, matRed), [0, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(scaleHandleGeometry, matRed), [- 0.5, 0, 0], [0, 0, Math.PI / 2]],\n            ],\n            Y: [\n                [new Mesh(scaleHandleGeometry, matGreen), [0, 0.5, 0]],\n                [new Mesh(lineGeometry2, matGreen)],\n                [new Mesh(scaleHandleGeometry, matGreen), [0, - 0.5, 0], [0, 0, Math.PI]],\n            ],\n            Z: [\n                [new Mesh(scaleHandleGeometry, matBlue), [0, 0, 0.5], [Math.PI / 2, 0, 0]],\n                [new Mesh(lineGeometry2, matBlue), [0, 0, 0], [Math.PI / 2, 0, 0]],\n                [new Mesh(scaleHandleGeometry, matBlue), [0, 0, - 0.5], [- Math.PI / 2, 0, 0]]\n            ],\n            XY: [\n                [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matBlueTransparent), [0.15, 0.15, 0]]\n            ],\n            YZ: [\n                [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matRedTransparent), [0, 0.15, 0.15], [0, Math.PI / 2, 0]]\n            ],\n            XZ: [\n                [new Mesh(new BoxGeometry(0.15, 0.15, 0.01), matGreenTransparent), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]]\n            ],\n            XYZ: [\n                [new Mesh(new BoxGeometry(0.1, 0.1, 0.1), matWhiteTransparent.clone())],\n            ]\n        };\n\n        const pickerScale = {\n            X: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0.3, 0, 0], [0, 0, - Math.PI / 2]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [- 0.3, 0, 0], [0, 0, Math.PI / 2]]\n            ],\n            Y: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0.3, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, - 0.3, 0], [0, 0, Math.PI]]\n            ],\n            Z: [\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, 0.3], [Math.PI / 2, 0, 0]],\n                [new Mesh(new CylinderGeometry(0.2, 0, 0.6, 4), matInvisible), [0, 0, - 0.3], [- Math.PI / 2, 0, 0]]\n            ],\n            XY: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0.15, 0]],\n            ],\n            YZ: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0, 0.15, 0.15], [0, Math.PI / 2, 0]],\n            ],\n            XZ: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.01), matInvisible), [0.15, 0, 0.15], [- Math.PI / 2, 0, 0]],\n            ],\n            XYZ: [\n                [new Mesh(new BoxGeometry(0.2, 0.2, 0.2), matInvisible), [0, 0, 0]],\n            ]\n        };\n\n        const helperScale = {\n            X: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ],\n            Y: [\n                [new Line(lineGeometry, matHelper.clone()), [0, - 1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], 'helper']\n            ],\n            Z: [\n                [new Line(lineGeometry, matHelper.clone()), [0, 0, - 1e3], [0, - Math.PI / 2, 0], [1e6, 1, 1], 'helper']\n            ]\n        };\n\n        const gizmoCombined = {\n            XT: [\n                [new Mesh(arrowGeometry, matRedArrow), [0.2, 0, 0], [0, 0, - Math.PI / 2]],\n            ],\n            XR: [\n                [new Mesh(CircleGeometry(0.15, 0.5), matRed), null, [0, Math.PI / 2, Math.PI / 2]],\n            ],\n            YT: [\n                [new Mesh(arrowGeometry, matGreenArrow), [0, 0.2, 0]],\n            ],\n            YR: [\n                [new Mesh(CircleGeometry(0.15, 0.5), matGreen), null, [Math.PI / 2, Math.PI, Math.PI / 2]],\n            ],\n            ZT: [[new Mesh(arrowGeometry, matBlueArrow), [0, 0, 0.2], [Math.PI / 2, 0, 0]]\n            ],\n            ZR: [[new Mesh(CircleGeometry(0.15, 0.5), matBlue), null, [0, 0, 0]],\n            ],\n            XYZ: [\n                [new Mesh(new OctahedronGeometry(0.07, 0), matYellowTransparent.clone()), [0, 0, 0]]\n            ],\n        }\n\n        const pickerCombined = gizmoCombined;\n\n        const helperCombined = {\n            START: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            END: [\n                [new Mesh(new OctahedronGeometry(0.01, 2), matHelper), null, null, null, 'helper']\n            ],\n            DELTA: [\n                [new Line(TranslateHelperGeometry(), matHelper), null, null, null, 'helper']\n            ],\n            XT: [\n                [new Line(lineGeometry, matHelper.clone()), [- 1e3, 0, 0], null, [1e6, 1, 1], 'helper']\n            ],\n            YT: [\n                [new Line(lineGeometry, matHelper.clone()), [0, - 1e3, 0], [0, 0, Math.PI / 2], [1e6, 1, 1], 'helper']\n            ],\n            ZT: [\n                [new Line(lineGeometry, matHelper.clone()), [0, 0, - 1e3], [0, - Math.PI / 2, 0], [1e6, 1, 1], 'helper']\n            ],\n        }\n\n        // Creates an Object3D with gizmos described in custom hierarchy definition.\n\n        function setupGizmo(gizmoMap) {\n\n            const gizmo = new Object3D();\n            // gizmo.renderOrder = 1000;\n\n            for (const name in gizmoMap) {\n\n                for (let i = gizmoMap[name].length; i--;) {\n\n                    const object = gizmoMap[name][i][0].clone();\n                    const position = gizmoMap[name][i][1];\n                    const rotation = gizmoMap[name][i][2];\n                    const scale = gizmoMap[name][i][3];\n                    const tag = gizmoMap[name][i][4];\n\n                    // name and tag properties are essential for picking and updating logic.\n                    object.name = name;\n                    object.tag = tag;\n\n                    if (position) {\n                        object.position.set(position[0], position[1], position[2]);\n                    }\n\n                    if (rotation) {\n                        object.rotation.set(rotation[0], rotation[1], rotation[2]);\n                    }\n\n                    if (scale) {\n                        object.scale.set(scale[0], scale[1], scale[2]);\n                    }\n\n                    object.updateMatrix();\n\n                    const tempGeometry = object.geometry.clone();\n                    tempGeometry.applyMatrix4(object.matrix);\n                    object.geometry = tempGeometry;\n                    // object.renderOrder = Infinity;\n\n                    object.position.set(0, 0, 0);\n                    object.rotation.set(0, 0, 0);\n                    object.scale.set(1, 1, 1);\n\n                    gizmo.add(object);\n\n                }\n\n            }\n\n            return gizmo;\n\n        }\n\n        // Gizmo creation\n\n        this.gizmo = {};\n        this.picker = {};\n        this.helper = {};\n\n        this.add(this.gizmo['translate'] = setupGizmo(gizmoTranslate));\n        this.add(this.gizmo['rotate'] = setupGizmo(gizmoRotate));\n        this.add(this.gizmo['scale'] = setupGizmo(gizmoScale));\n        this.add(this.picker['translate'] = setupGizmo(pickerTranslate));\n        this.add(this.picker['rotate'] = setupGizmo(pickerRotate));\n        this.add(this.picker['scale'] = setupGizmo(pickerScale));\n        this.add(this.helper['translate'] = setupGizmo(helperTranslate));\n        this.add(this.helper['rotate'] = setupGizmo(helperRotate));\n        this.add(this.helper['scale'] = setupGizmo(helperScale));\n\n        this.add(this.gizmo['combined'] = setupGizmo(gizmoCombined));\n        this.add(this.picker['combined'] = setupGizmo(pickerCombined));\n        this.add(this.helper['combined'] = setupGizmo(helperCombined));\n\n        // Pickers should be hidden always\n\n        this.picker['translate'].visible = false;\n        this.picker['rotate'].visible = false;\n        this.picker['scale'].visible = false;\n        this.picker['combined'].visible = false;\n\n    }\n\n    // updateMatrixWorld will update transformations and appearance of individual handles\n\n    updateMatrixWorld(force) {\n\n        const space = (this.mode === 'scale') ? 'local' : this.space; // scale always oriented to local rotation\n\n        const quaternion = (space === 'local') ? this.worldQuaternion : _identityQuaternion;\n\n        // Show only gizmos for current transform mode\n\n        this.gizmo['translate'].visible = this.mode === 'translate';\n        this.gizmo['rotate'].visible = this.mode === 'rotate';\n        this.gizmo['scale'].visible = this.mode === 'scale';\n        this.gizmo['combined'].visible = this.mode === 'combined';\n\n        this.helper['translate'].visible = this.mode === 'translate';\n        this.helper['rotate'].visible = this.mode === 'rotate';\n        this.helper['scale'].visible = this.mode === 'scale';\n        this.helper['combined'].visible = this.mode === 'combined';\n\n\n        let handles = [];\n        handles = handles.concat(this.picker[this.mode].children);\n        handles = handles.concat(this.gizmo[this.mode].children);\n        handles = handles.concat(this.helper[this.mode].children);\n\n        for (let i = 0; i < handles.length; i++) {\n\n            const handle = handles[i];\n\n            // hide aligned to camera\n\n            handle.visible = true;\n            handle.renderOrder = 10000;\n            handle.rotation.set(0, 0, 0);\n            handle.position.copy(this.worldPosition);\n\n            let factor;\n\n            if (this.camera.isOrthographicCamera) {\n\n                factor = (this.camera.top - this.camera.bottom) / this.camera.zoom;\n\n            } else {\n\n                factor = this.worldPosition.distanceTo(this.cameraPosition) * Math.min(1.9 * Math.tan(Math.PI * this.camera.fov / 360) / this.camera.zoom, 7);\n\n            }\n\n            handle.scale.set(1, 1, 1).multiplyScalar(factor * this.size / 4);\n\n            // TODO: simplify helpers and consider decoupling from gizmo\n\n            if (handle.tag === 'helper') {\n\n                handle.visible = false;\n\n                if (handle.name === 'AXIS') {\n\n                    handle.position.copy(this.worldPositionStart);\n                    handle.visible = !!this.axis;\n\n                    if (this.axis === 'X') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, 0, 0));\n                        handle.quaternion.copy(quaternion).multiply(_tempQuaternion);\n\n                        if (Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n\n                            handle.visible = false;\n\n                        }\n\n                    }\n\n                    if (this.axis === 'Y') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, 0, Math.PI / 2));\n                        handle.quaternion.copy(quaternion).multiply(_tempQuaternion);\n\n                        if (Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n\n                            handle.visible = false;\n\n                        }\n\n                    }\n\n                    if (this.axis === 'Z') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, Math.PI / 2, 0));\n                        handle.quaternion.copy(quaternion).multiply(_tempQuaternion);\n\n                        if (Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye)) > 0.9) {\n\n                            handle.visible = false;\n\n                        }\n\n                    }\n\n                    if (this.axis === 'XYZE') {\n\n                        _tempQuaternion.setFromEuler(_tempEuler.set(0, Math.PI / 2, 0));\n                        _alignVector.copy(this.rotationAxis);\n                        handle.quaternion.setFromRotationMatrix(_lookAtMatrix.lookAt(_zeroVector, _alignVector, _unitY));\n                        handle.quaternion.multiply(_tempQuaternion);\n                        handle.visible = this.dragging;\n\n                    }\n\n                    if (this.axis === 'E') {\n\n                        handle.visible = false;\n\n                    }\n\n\n                } else if (handle.name === 'START') {\n\n                    handle.position.copy(this.worldPositionStart);\n                    handle.visible = this.dragging;\n\n                } else if (handle.name === 'END') {\n\n                    handle.position.copy(this.worldPosition);\n                    handle.visible = this.dragging;\n\n                } else if (handle.name === 'DELTA') {\n\n                    handle.position.copy(this.worldPositionStart);\n                    handle.quaternion.copy(this.worldQuaternionStart);\n                    _tempVector.set(1e-10, 1e-10, 1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(- 1);\n                    _tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert());\n                    handle.scale.copy(_tempVector);\n                    handle.visible = this.dragging;\n\n                } else {\n\n                    handle.quaternion.copy(quaternion);\n\n                    if (this.dragging) {\n\n                        handle.position.copy(this.worldPositionStart);\n\n                    } else {\n\n                        handle.position.copy(this.worldPosition);\n\n                    }\n\n                    if (this.axis) {\n\n                        handle.visible = this.axis.search(handle.name) !== - 1;\n\n                    }\n\n                }\n\n                // If updating helper, skip rest of the loop\n                continue;\n\n            }\n\n            // Align handles to current local or world rotation\n\n            handle.quaternion.copy(quaternion);\n\n            if (this.mode === 'translate' || this.mode === 'scale' || this.mode === 'combined') {\n\n                // Hide translate and scale axis facing the camera\n\n                const AXIS_FLIP_TRESHOLD = 0.2;\n                const PLANE_HIDE_TRESHOLD = 0.2;\n\n                if (handle.name === 'XT' || handle.name === 'XR') {\n\n                    if (Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye)) > AXIS_FLIP_TRESHOLD) {\n\n                        // handle.scale.set(1e-10, 1e-10, 1e-10);\n                        // handle.scale.set(-handle.scale.x,handle.scale.y,handle.scale.z);\n                        // handle.visible = false;\n                        handle.renderOrder = 10001\n\n                    }\n\n                }\n\n                if (handle.name === 'YT' || handle.name === 'YR') {\n\n                    if (Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye)) > AXIS_FLIP_TRESHOLD) {\n\n                        // handle.scale.set(1e-10, 1e-10, 1e-10);\n                        // handle.visible = false;\n                        //handle.scale.set(handle.scale.x,-handle.scale.y,handle.scale.z);\n                        handle.renderOrder = 10001\n\n                    }\n\n                }\n\n                if (handle.name === 'ZT' || handle.name === 'ZR') {\n\n                    if (Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye)) > AXIS_FLIP_TRESHOLD) {\n\n                        // handle.scale.set(1e-10, 1e-10, 1e-10);\n                        // handle.visible = false;\n                        //handle.scale.set(handle.scale.x,handle.scale.y,-handle.scale.z);\n                        handle.renderOrder = 10001\n\n                    }\n\n                }\n\n                if (handle.name === 'XY') {\n\n                    if (Math.abs(_alignVector.copy(_unitZ).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n\n                    }\n\n                }\n\n                if (handle.name === 'YZ') {\n\n                    if (Math.abs(_alignVector.copy(_unitX).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n\n                    }\n\n                }\n\n                if (handle.name === 'XZ') {\n\n                    if (Math.abs(_alignVector.copy(_unitY).applyQuaternion(quaternion).dot(this.eye)) < PLANE_HIDE_TRESHOLD) {\n\n                        handle.scale.set(1e-10, 1e-10, 1e-10);\n                        handle.visible = false;\n\n                    }\n\n                }\n\n            } else if (this.mode === 'rotate') {\n\n                // Align handles to current local or world rotation\n\n                _tempQuaternion2.copy(quaternion);\n                _alignVector.copy(this.eye).applyQuaternion(_tempQuaternion.copy(quaternion).invert());\n\n                if (handle.name.search('E') !== - 1) {\n\n                    handle.quaternion.setFromRotationMatrix(_lookAtMatrix.lookAt(this.eye, _zeroVector, _unitY));\n\n                }\n\n                if (handle.name === 'X') {\n\n                    _tempQuaternion.setFromAxisAngle(_unitX, Math.atan2(- _alignVector.y, _alignVector.z));\n                    _tempQuaternion.multiplyQuaternions(_tempQuaternion2, _tempQuaternion);\n                    handle.quaternion.copy(_tempQuaternion);\n\n                }\n\n                if (handle.name === 'Y') {\n\n                    _tempQuaternion.setFromAxisAngle(_unitY, Math.atan2(_alignVector.x, _alignVector.z));\n                    _tempQuaternion.multiplyQuaternions(_tempQuaternion2, _tempQuaternion);\n                    handle.quaternion.copy(_tempQuaternion);\n\n                }\n\n                if (handle.name === 'Z') {\n\n                    _tempQuaternion.setFromAxisAngle(_unitZ, Math.atan2(_alignVector.y, _alignVector.x));\n                    _tempQuaternion.multiplyQuaternions(_tempQuaternion2, _tempQuaternion);\n                    handle.quaternion.copy(_tempQuaternion);\n\n                }\n\n            }\n\n            // Hide disabled axes\n            handle.visible = handle.visible && (handle.name.indexOf('X') === - 1 || this.showX);\n            handle.visible = handle.visible && (handle.name.indexOf('Y') === - 1 || this.showY);\n            handle.visible = handle.visible && (handle.name.indexOf('Z') === - 1 || this.showZ);\n            handle.visible = handle.visible && (handle.name.indexOf('E') === - 1 || (this.showX && this.showY && this.showZ));\n\n            // highlight selected axis\n            handle.material._color = handle.material._color || handle.material.color.clone();\n            handle.material._opacity = handle.material._opacity || handle.material.opacity;\n\n            handle.material.color.copy(handle.material._color);\n            handle.material.opacity = handle.material._opacity;\n\n            if (this.enabled && this.axis) {\n\n                if (handle.name === this.axis) {\n\n                    handle.material.color.setHex(0xFFD880);\n                    handle.material.opacity = 1;\n                }\n\n                // else if (this.axis.split('').some(function (a) {\n\n                //     return handle.name === a;\n\n                // })) {\n\n                //     handle.material.color.setHex(0xffff00);\n                //     handle.material.opacity = 1.0;\n\n                // }\n\n            }\n\n        }\n\n        super.updateMatrixWorld(force);\n\n    }\n\n}\n\nTransformControlsGizmo.prototype.isTransformControlsGizmo = true;\n\n//\n\nclass TransformControlsPlane extends Mesh {\n\n    constructor() {\n\n        super(\n            new PlaneGeometry(100000, 100000, 2, 2),\n            new MeshBasicMaterial({ visible: false, wireframe: true, side: DoubleSide, transparent: true, opacity: 0.1, toneMapped: false })\n        );\n\n        this.type = 'TransformControlsPlane';\n\n    }\n\n    updateMatrixWorld(force) {\n\n        let space = this.space;\n\n        this.position.copy(this.worldPosition);\n\n        if (this.mode === 'scale') space = 'local'; // scale always oriented to local rotation\n\n        _v1.copy(_unitX).applyQuaternion(space === 'local' ? this.worldQuaternion : _identityQuaternion);\n        _v2.copy(_unitY).applyQuaternion(space === 'local' ? this.worldQuaternion : _identityQuaternion);\n        _v3.copy(_unitZ).applyQuaternion(space === 'local' ? this.worldQuaternion : _identityQuaternion);\n\n        // Align the plane for current transform mode, axis and space.\n\n        _alignVector.copy(_v2);\n\n        switch (this.mode) {\n\n            case 'translate':\n            case 'scale':\n                switch (this.axis) {\n\n                    case 'X':\n                        _alignVector.copy(this.eye).cross(_v1);\n                        _dirVector.copy(_v1).cross(_alignVector);\n                        break;\n                    case 'Y':\n                        _alignVector.copy(this.eye).cross(_v2);\n                        _dirVector.copy(_v2).cross(_alignVector);\n                        break;\n                    case 'Z':\n                        _alignVector.copy(this.eye).cross(_v3);\n                        _dirVector.copy(_v3).cross(_alignVector);\n                        break;\n                    case 'XY':\n                        _dirVector.copy(_v3);\n                        break;\n                    case 'YZ':\n                        _dirVector.copy(_v1);\n                        break;\n                    case 'XZ':\n                        _alignVector.copy(_v3);\n                        _dirVector.copy(_v2);\n                        break;\n                    case 'XYZ':\n                    case 'E':\n                        _dirVector.set(0, 0, 0);\n                        break;\n\n                }\n\n                break;\n            case 'rotate':\n            default:\n                // special case for rotate\n                _dirVector.set(0, 0, 0);\n\n        }\n\n        if (_dirVector.length() === 0) {\n\n            // If in rotate mode, make the plane parallel to camera\n            this.quaternion.copy(this.cameraQuaternion);\n\n        } else {\n\n            _tempMatrix.lookAt(_tempVector.set(0, 0, 0), _dirVector, _alignVector);\n\n            this.quaternion.setFromRotationMatrix(_tempMatrix);\n\n        }\n\n        super.updateMatrixWorld(force);\n\n    }\n\n}\n\nTransformControlsPlane.prototype.isTransformControlsPlane = true;\n\nexport { TransformControls, TransformControlsGizmo, TransformControlsPlane };\n","<template>\r\n  <div\r\n    class=\"draggable-window\"\r\n    :class=\"{ minimized: minimized }\"\r\n    :style=\"{ top: currentY + 'px', left: currentX + 'px' }\"\r\n    v-show=\"visible && !userClosed\"\r\n  >\r\n    <div class=\"window-header\" @mousedown=\"startDrag\" @touchstart=\"startDragTouch\">\r\n      <div class=\"drag-handle\">\r\n        <div class=\"handle-dots\">\r\n          <span></span><span></span><span></span>\r\n        </div>\r\n        <span class=\"title\">{{ title }}</span>\r\n      </div>\r\n      <div class=\"controls\">\r\n        <button \r\n          class=\"control-btn minimize\" \r\n          @click.stop=\"toggleMinimize\" \r\n          @mousedown.stop \r\n          @touchstart.stop\r\n        >\r\n          {{ minimized ? '+' : '' }}\r\n        </button>\r\n        <button \r\n          class=\"control-btn close\" \r\n          @click.stop=\"close\" \r\n          @mousedown.stop \r\n          @touchstart.stop\r\n        >\r\n          \r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div class=\"window-content\" v-show=\"!minimized\" v-bind=\"$attrs\">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"DraggableWindow\",\r\n  inheritAttrs: false,\r\n  props: {\r\n    title: {\r\n      type: String,\r\n      default: \"Window\",\r\n    },\r\n    initialX: {\r\n      type: Number,\r\n      default: 100,\r\n    },\r\n    initialY: {\r\n      type: Number,\r\n      default: 100,\r\n    },\r\n    visible: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    reopenTrigger: {\r\n      type: Number,\r\n      default: 0,\r\n    },\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: {\r\n      type: Boolean,\r\n      default: undefined,\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      isDragging: false,\r\n      currentX: this.initialX,\r\n      currentY: this.initialY,\r\n      dragOffsetX: 0,\r\n      dragOffsetY: 0,\r\n      minimized: false,\r\n      userClosed: this.isOpen !== undefined ? !this.isOpen : !this.startOpen,\r\n    };\r\n  },\r\n  methods: {\r\n    startDrag(event) {\r\n      if (event.target.closest('.controls')) return;\r\n      this.isDragging = true;\r\n      this.dragOffsetX = event.clientX - this.currentX;\r\n      this.dragOffsetY = event.clientY - this.currentY;\r\n      document.addEventListener(\"mousemove\", this.onDrag);\r\n      document.addEventListener(\"mouseup\", this.stopDrag);\r\n    },\r\n    onDrag(event) {\r\n      if (this.isDragging) {\r\n        this.currentX = event.clientX - this.dragOffsetX;\r\n        this.currentY = event.clientY - this.dragOffsetY;\r\n      }\r\n    },\r\n    stopDrag() {\r\n      this.isDragging = false;\r\n      document.removeEventListener(\"mousemove\", this.onDrag);\r\n      document.removeEventListener(\"mouseup\", this.stopDrag);\r\n    },\r\n    // Touch support\r\n    startDragTouch(event) {\r\n      if (event.target.closest('.controls')) return;\r\n      const touch = event.touches[0];\r\n      this.isDragging = true;\r\n      this.dragOffsetX = touch.clientX - this.currentX;\r\n      this.dragOffsetY = touch.clientY - this.currentY;\r\n      document.addEventListener(\"touchmove\", this.onDragTouch);\r\n      document.addEventListener(\"touchend\", this.stopDragTouch);\r\n    },\r\n    onDragTouch(event) {\r\n       if (this.isDragging) {\r\n         event.preventDefault(); // Prevent scrolling while dragging\r\n         const touch = event.touches[0];\r\n         this.currentX = touch.clientX - this.dragOffsetX;\r\n         this.currentY = touch.clientY - this.dragOffsetY;\r\n       }\r\n    },\r\n    stopDragTouch() {\r\n       this.isDragging = false;\r\n       document.removeEventListener(\"touchmove\", this.onDragTouch);\r\n       document.removeEventListener(\"touchend\", this.stopDragTouch);\r\n    },\r\n    toggleMinimize() {\r\n      this.minimized = !this.minimized;\r\n    },\r\n    close() {\r\n      this.userClosed = true;\r\n      this.$emit(\"close\");\r\n    },\r\n  },\r\n  watch: {\r\n    reopenTrigger() {\r\n      this.userClosed = false;\r\n    },\r\n    isOpen(val) {\r\n      if (val !== undefined) {\r\n         this.userClosed = !val;\r\n      }\r\n    },\r\n    initialX(val) {\r\n      this.currentX = val;\r\n    },\r\n    initialY(val) {\r\n      this.currentY = val;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.draggable-window {\r\n  position: absolute;\r\n  z-index: 1000;\r\n  background: rgba(20, 20, 25, 0.65);\r\n  backdrop-filter: blur(24px) saturate(180%);\r\n  -webkit-backdrop-filter: blur(24px) saturate(180%);\r\n  border-radius: 20px;\r\n  box-shadow: \r\n    0 4px 6px -1px rgba(0, 0, 0, 0.1), \r\n    0 2px 4px -1px rgba(0, 0, 0, 0.06),\r\n    0 24px 60px -12px rgba(0, 0, 0, 0.5),\r\n    inset 0 1px 0 rgba(255, 255, 255, 0.1);\r\n  border: 1px solid rgba(255, 255, 255, 0.08);\r\n  display: flex;\r\n  flex-direction: column;\r\n  min-width: 180px;\r\n  transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.2s ease, width 0.2s ease, height 0.2s ease;\r\n  overflow: visible;\r\n  user-select: none;\r\n  font-family: 'Inter', -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Helvetica, Arial, sans-serif;\r\n  color: #f0f0f0;\r\n  pointer-events: auto;\r\n}\r\n\r\n.minimized {\r\n  height: auto !important;\r\n  width: auto !important;\r\n  min-width: auto;\r\n  border-radius: 14px;\r\n  background: rgba(30, 30, 35, 0.85);\r\n  border: 1px solid rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.window-header {\r\n  height: 44px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  padding: 0 14px;\r\n  cursor: grab;\r\n  background: linear-gradient(to bottom, rgba(255,255,255,0.06), transparent);\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\r\n  border-top-left-radius: 20px;\r\n  border-top-right-radius: 20px;\r\n}\r\n\r\n.window-header:active {\r\n  cursor: grabbing;\r\n}\r\n\r\n.drag-handle {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-grow: 1;\r\n}\r\n\r\n.handle-dots {\r\n  display: flex;\r\n  margin-right: 12px;\r\n  gap: 4px;\r\n}\r\n\r\n.handle-dots span {\r\n  width: 5px;\r\n  height: 5px;\r\n  background-color: rgba(255, 255, 255, 0.15);\r\n  border-radius: 50%;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.draggable-window:hover .handle-dots span {\r\n  background-color: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.title {\r\n  font-size: 13px;\r\n  font-weight: 600;\r\n  letter-spacing: 0.3px;\r\n  color: rgba(255, 255, 255, 0.9);\r\n  pointer-events: none;\r\n  text-shadow: 0 1px 2px rgba(0,0,0,0.5);\r\n}\r\n\r\n.controls {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.control-btn {\r\n  width: 22px;\r\n  height: 22px;\r\n  border-radius: 50%;\r\n  border: none;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  font-size: 14px;\r\n  cursor: pointer;\r\n  padding: 0;\r\n  line-height: 1;\r\n  background-color: rgba(255, 255, 255, 0.08);\r\n  color: rgba(255, 255, 255, 0.6);\r\n  transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);\r\n  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.05);\r\n}\r\n\r\n.control-btn:hover {\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n  color: white;\r\n  transform: scale(1.05);\r\n}\r\n\r\n.control-btn:active {\r\n  transform: scale(0.95);\r\n}\r\n\r\n.control-btn.close:hover {\r\n  background-color: rgba(255, 95, 87, 0.8);\r\n  color: white;\r\n}\r\n\r\n.window-content {\r\n  padding: 18px;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n</style>\r\n","import { render } from \"./DraggableWindow.vue?vue&type=template&id=8e2218ae&scoped=true\"\nimport script from \"./DraggableWindow.vue?vue&type=script&lang=js\"\nexport * from \"./DraggableWindow.vue?vue&type=script&lang=js\"\n\nimport \"./DraggableWindow.vue?vue&type=style&index=0&id=8e2218ae&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-8e2218ae\"]])\n\nexport default __exports__","import { render } from \"./Canvas.vue?vue&type=template&id=67a0d07b&scoped=true\"\nimport script from \"./Canvas.vue?vue&type=script&lang=js\"\nexport * from \"./Canvas.vue?vue&type=script&lang=js\"\n\nimport \"./Canvas.vue?vue&type=style&index=0&id=67a0d07b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-67a0d07b\"]])\n\nexport default __exports__","import * as THREE from \"three\";\nimport { MeshLineRaycast } from \"meshline\";\nimport { scene } from \"../App.vue\";\n\nlet mirror = {\n    updateMirrorOf: function (obj, activeScene, localCanvas) {\n        if (obj.type === \"Group\") {\n            obj.children.forEach((child) => {\n                mirror.updateMirrorOf(child, activeScene, localCanvas);\n            });\n        } else if (obj.userData.mirrors && Array.isArray(obj.userData.mirrors)) {\n            obj.userData.mirrors.forEach(mirrorData => {\n                let mirroredObject = activeScene.getObjectByProperty(\n                    \"uuid\",\n                    mirrorData.uuid\n                );\n                if (!mirroredObject) return;\n\n                const axis = mirrorData.axis;\n\n                if (localCanvas) {\n                    const m = localCanvas.matrixWorld;\n                    const mInv = m.clone().invert();\n                    let sx = 1, sy = 1, sz = 1;\n                    if (axis === \"x\") sx = -1;\n                    else if (axis === \"y\") sy = -1;\n                    else if (axis === \"z\") sz = -1;\n                    const mFlip = new THREE.Matrix4().makeScale(sx, sy, sz);\n                    const transform = m.clone().multiply(mFlip).multiply(mInv);\n\n                    mirroredObject.position.copy(obj.position);\n                    mirroredObject.quaternion.copy(obj.quaternion);\n                    mirroredObject.scale.copy(obj.scale);\n                    mirroredObject.applyMatrix4(transform);\n                } else {\n                    var position = new THREE.Vector3();\n                    obj.getWorldPosition(position);\n                    var quaternion = new THREE.Quaternion();\n                    obj.getWorldQuaternion(quaternion);\n                    var scale = new THREE.Vector3();\n                    obj.getWorldScale(scale);\n\n                    switch (axis) {\n                        case \"x\":\n                            mirroredObject.position.set(-position.x, position.y, position.z);\n                            mirroredObject.quaternion.set(-quaternion.x, quaternion.y, quaternion.z, -quaternion.w);\n                            mirroredObject.scale.set(-scale.x, scale.y, scale.z);\n                            break;\n                        case \"y\":\n                            mirroredObject.position.set(position.x, -position.y, position.z);\n                            mirroredObject.quaternion.set(quaternion.x, -quaternion.y, quaternion.z, -quaternion.w);\n                            mirroredObject.scale.set(scale.x, -scale.y, scale.z);\n                            break;\n                        case \"z\":\n                            mirroredObject.position.set(position.x, position.y, -position.z);\n                            mirroredObject.quaternion.set(quaternion.x, quaternion.y, -quaternion.z, -quaternion.w);\n                            mirroredObject.scale.set(scale.x, scale.y, -scale.z);\n                            break;\n                    }\n                }\n                // Recursive update for nested mirrors (X then Y)\n                mirror.updateMirrorOf(mirroredObject, activeScene, localCanvas);\n            });\n            obj.matrixWorldNeedsUpdate = true;\n        }\n    },\n    object: function (obj, axis, activeScene, localCanvas) {\n        var clone = obj.clone();\n        clone.layers.set(1);\n        clone.raycast = MeshLineRaycast;\n\n        if (!obj.userData.mirrors) obj.userData.mirrors = [];\n        obj.userData.mirrors.push({ uuid: clone.uuid, axis: axis });\n\n        // The clone also needs to know it's a mirror and what axis it came from \n        // to support multi-axis update (A mirrors to B, then B mirrors to D)\n        clone.userData.mirrorParent = obj.uuid;\n        clone.userData.mirrorAxisFromParent = axis;\n\n        if (localCanvas) {\n            const m = localCanvas.matrixWorld;\n            const mInv = m.clone().invert();\n            let sx = 1, sy = 1, sz = 1;\n            if (axis === \"x\") sx = -1;\n            else if (axis === \"y\") sy = -1;\n            else if (axis === \"z\") sz = -1;\n            const mFlip = new THREE.Matrix4().makeScale(sx, sy, sz);\n            const transform = m.clone().multiply(mFlip).multiply(mInv);\n            clone.applyMatrix4(transform);\n        } else {\n            const mFlip = new THREE.Matrix4().makeScale(\n                axis === \"x\" ? -1 : 1,\n                axis === \"y\" ? -1 : 1,\n                axis === \"z\" ? -1 : 1\n            );\n            clone.applyMatrix4(mFlip);\n        }\n        activeScene.add(clone);\n        return clone;\n    },\n    eraseMirrorOf: function (obj) {\n        if (obj.userData.mirrors) {\n            obj.userData.mirrors.forEach(m => {\n                let mirroredObject = scene.getObjectByProperty(\"uuid\", m.uuid);\n                if (mirroredObject) {\n                    mirror.eraseMirrorOf(mirroredObject);\n                    scene.remove(mirroredObject);\n                }\n            });\n        }\n    },\n};\n\nexport { mirror };","\n<template>\n  <draggable-window title=\"History\" :initialX=\"12\" :initialY=\"window.innerHeight - 100\" :reopenTrigger=\"reopenTrigger\" :start-open=\"startOpen\" :is-open=\"isOpen\" @close=\"$emit('close')\">\n    <div class=\"history-controls\">\n      <button @click=\"undo\" :disabled=\"undoDisabled\">\n        <img src=\"@/assets/icons/undo.svg\" alt=\"undo\" />\n      </button>\n      <button @click=\"redo\" :disabled=\"redoDisabled\">\n        <img src=\"@/assets/icons/redo.svg\" alt=\"redo\" />\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport UndoManager from \"undo-manager\";\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nexport let undoManager = new UndoManager();\nexport let undoRedoComponent;\n\nexport default {\n  name: \"UndoRedo\",\n  components: { DraggableWindow },\n  props: {\n    reopenTrigger: Number,\n    startOpen: {\n      type: Boolean,\n      default: true,\n    },\n    isOpen: Boolean,\n  },\n  emits: [\"selected-tool\", \"close\"],\n  data() {\n    return {\n      window: window,\n      undoDisabled: true,\n      redoDisabled: true,\n    };\n  },\n  methods: {\n    undo: function () {\n      undoManager.undo();\n      this.updateUi();\n    },\n    redo: function () {\n      undoManager.redo();\n      this.updateUi();\n    },\n    setTool: function (val) {\n      this.$emit(\"selected-tool\", val);\n    },\n    updateUi: function () {\n      this.undoDisabled = !undoManager.hasUndo();\n      this.redoDisabled = !undoManager.hasRedo();\n    },\n  },\n  watch: {},\n  mounted() {\n    undoRedoComponent = this;\n  },\n};\n</script>\n\n<style scoped>\n.history-controls {\n  display: flex;\n}\n\nbutton {\n  background-color: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px; /* Reset radius for individual buttons */\n  height: 40px;\n  width: 40px; /* Make them square */\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  padding: 0;\n  cursor: pointer;\n  margin-right: 4px;\n}\n\nbutton:last-child {\n  margin-right: 0;\n}\n\nbutton:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\nbutton:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\nbutton > img {\n  width: 24px;\n  height: 24px;\n  filter: brightness(0) invert(1);\n}\n</style>","import { render } from \"./UndoRedo.vue?vue&type=template&id=0bd31b88&scoped=true\"\nimport script from \"./UndoRedo.vue?vue&type=script&lang=js\"\nexport * from \"./UndoRedo.vue?vue&type=script&lang=js\"\n\nimport \"./UndoRedo.vue?vue&type=style&index=0&id=0bd31b88&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0bd31b88\"]])\n\nexport default __exports__","import * as THREE from \"three\";\nimport { scene, renderer, camera } from \"../App.vue\";\nimport { mirror } from \"./mirror.js\"\nimport { MeshLineMaterial } from \"meshline\";\nimport { draw } from \"./draw.js\";\nimport { undoManager, undoRedoComponent } from \"./UndoRedo.vue\"\n\nlet erase = {\n    e: undefined,\n    GPUPickHelper: class {\n        constructor() {\n            this.pickingTexture = new THREE.WebGLRenderTarget(1, 1);\n            this.pixelBuffer = new Uint8Array(4);\n            this.pickedObject = null;\n            this.pickedObjectSavedColor = 0;\n        }\n        calcPointsInBetween(x1, y1, x2, y2) {\n            var coordinatesArray = new Array();\n            // Define differences and error check\n            var dx = Math.abs(x2 - x1);\n            var dy = Math.abs(y2 - y1);\n            var sx = x1 < x2 ? 1 : -1;\n            var sy = y1 < y2 ? 1 : -1;\n            var err = dx - dy;\n            // Set first coordinates\n            coordinatesArray.push(new THREE.Vector2(x1, y1));\n            // Main loop\n            while (!(x1 == x2 && y1 == y2)) {\n                var e2 = err << 1;\n                if (e2 > -dy) {\n                    err -= dy;\n                    x1 += sx;\n                }\n                if (e2 < dx) {\n                    err += dx;\n                    y1 += sy;\n                }\n                // Set coordinates\n                coordinatesArray.push(new THREE.Vector2(x1, y1));\n            }\n            // Return the result\n            return coordinatesArray;\n        }\n        pick(cssPosition, scene, camera) {\n            const { pickingTexture, pixelBuffer } = this;\n            // set the view offset to represent just a single pixel under the mouse\n            const pixelRatio = renderer.getPixelRatio();\n            camera.setViewOffset(\n                renderer.getContext().drawingBufferWidth, // full width\n                renderer.getContext().drawingBufferHeight, // full top\n                (cssPosition.x * pixelRatio) | 0, // rect x\n                (cssPosition.y * pixelRatio) | 0, // rect y\n                1, // rect width\n                1 // rect height\n            );\n            // render the scene\n            renderer.setRenderTarget(pickingTexture);\n            renderer.render(scene, camera);\n            renderer.setRenderTarget(null);\n\n            // clear the view offset so rendering returns to normal\n            camera.clearViewOffset();\n            //read the pixel\n            renderer.readRenderTargetPixels(\n                pickingTexture,\n                0, // x\n                0, // y\n                1, // width\n                1, // height\n                pixelBuffer\n            );\n\n            const id = (pixelBuffer[0] << 16) | (pixelBuffer[1] << 8) | pixelBuffer[2];\n            const intersectedObject = erase.e.idToObject[id];\n\n            if (intersectedObject) {\n                return intersectedObject;\n            }\n        }\n        pickArea(x1, y1, x2, y2, scene, camera) {\n            const { pickingTexture, pixelBuffer } = this;\n            const width = () => {\n                if (x2 - x1 < 0) {\n                    return -(x2 - x1);\n                } else if (x2 - x1 == 0) {\n                    return 1;\n                } else {\n                    return x2 - x1;\n                }\n            };\n            const height = () => {\n                if (y2 - y1 < 0) {\n                    return -(y2 - y1);\n                } else if (y2 - y1 == 0) {\n                    return 1;\n                } else {\n                    return y2 - y1;\n                }\n            };\n            let intersectObjects = new Array();\n\n            // set the view offset to represent just a single pixel under the mouse\n            const pixelRatio = renderer.getPixelRatio();\n            camera.setViewOffset(\n                renderer.getContext().drawingBufferWidth, // full width\n                renderer.getContext().drawingBufferHeight, // full top\n                (x1 * pixelRatio) | 0, // rect x\n                (y1 * pixelRatio) | 0, // rect y\n                (width() * pixelRatio) | 1, // height\n                (height() * pixelRatio) | 1 // width\n            );\n            // render the scene\n            if (this.pickingTexture.width !== ((width() * pixelRatio) | 1) || this.pickingTexture.height !== ((height() * pixelRatio) | 1)) {\n                this.pickingTexture.setSize((width() * pixelRatio) | 1, (height() * pixelRatio) | 1);\n            }\n            renderer.setRenderTarget(pickingTexture);\n            renderer.render(scene, camera);\n            renderer.setRenderTarget(null);\n\n            // clear the view offset so rendering returns to normal\n            camera.clearViewOffset();\n            //read the pixel\n\n            this.calcPointsInBetween(0, 0, width(), height()).forEach((point) => {\n                renderer.readRenderTargetPixels(\n                    pickingTexture,\n                    point.x, // x\n                    point.y, // y\n                    1, // width\n                    1, // height\n                    pixelBuffer\n                );\n                const id =\n                    (pixelBuffer[0] << 16) | (pixelBuffer[1] << 8) | pixelBuffer[2];\n                const intersectedObject = erase.e.idToObject[id];\n                if (\n                    intersectedObject != undefined &&\n                    intersectObjects.indexOf(intersectedObject) < 0\n                ) {\n                    intersectObjects.push(intersectedObject);\n                }\n            });\n            return intersectObjects;\n        }\n    },\n    eraser: class {\n        constructor() {\n            this.pscene = new THREE.Scene();\n            this.pscene.background = new THREE.Color(0);\n            this.idToObject = {};\n            this.id = 1;\n            this.picker = new erase.GPUPickHelper()\n        }\n        setupPicking() {\n            scene.traverse((children) => {\n                if (children.layers && children.layers.mask == 2) {\n                    var clone = children.clone();\n                    // Fix: ensure lineWidth is valid for MeshLineMaterial\n                    let lw = 0.1;\n                    if (clone.material && clone.material.lineWidth) {\n                        lw = clone.material.lineWidth;\n                    } else if (clone.userData && clone.userData.stroke && clone.userData.stroke.lineWidth) {\n                        lw = clone.userData.stroke.lineWidth;\n                    }\n\n                    var cloneMaterial = new MeshLineMaterial({\n                        lineWidth: lw,\n                        sizeAttenuation: 1,\n                        color: new THREE.Color(this.id),\n                        side: THREE.DoubleSide,\n                        fog: false,\n                    });\n                    clone.material = cloneMaterial;\n                    this.pscene.add(clone);\n                    this.idToObject[this.id] = children;\n                    this.id = this.id + 1;\n                }\n            });\n        }\n        resetPicking() {\n            if (this.pscene != null) {\n                this.idToObject = {};\n                this.id = 1;\n                // Proper cleanup\n                while (this.pscene.children.length > 0) {\n                    const child = this.pscene.children[0];\n                    this.pscene.remove(child);\n                    if (child.material) child.material.dispose();\n                }\n            }\n        }\n        start(cx, cy) {\n            var pickedObjects = this.picker.pickArea(\n                cx - 5,\n                cy - 5,\n                cx + 5,\n                cy + 5,\n                this.pscene,\n                camera\n            );\n\n            if (pickedObjects != undefined && pickedObjects.length > 0) {\n                pickedObjects.forEach((object) => {\n                    erase.deleteObject(object)\n                });\n            }\n\n            renderer.render(scene, camera)\n        }\n        move(cx, cy) {\n\n            var pickedObjects = this.picker.pickArea(\n                cx - 5,\n                cy - 5,\n                cx + 5,\n                cy + 5,\n                this.pscene,\n                camera\n            );\n            if (pickedObjects != undefined && pickedObjects.length > 0) {\n                pickedObjects.forEach((object) => {\n                    erase.deleteObject(object);\n                });\n            }\n            renderer.render(scene, camera)\n        }\n        end() {\n            renderer.render(scene, camera);\n            //actually nothing here\n        }\n        cancel() {\n            // for (let i = 0; i < this.numberOfErasedObjects; i++) {\n            //     undoManager.undo();\n            // }\n            // erase.e = undefined;\n            // erase.e = new erase.eraser();\n            // renderer.render(scene, camera)\n        }\n    },\n    deleteObject: function (object) {\n        //ignore triggers for objects already deleted\n        if (scene.getObjectByProperty(\n            \"uuid\",\n            object.uuid\n        ) == undefined && object.parent == null) { return } // Check if it's detachable\n\n        // Improve robustness: if object in layer, scene.getObjectByProperty might find it.\n        // But we want to confirm it is still in the scene graph.\n\n        let uuid = object.uuid;\n        // Check geometry safety\n        if (!object.geometry) return;\n\n        let vertices = object.geometry.points || []; // shark3d uses .points ?\n        // If points is undefined, maybe use attributes.position logic from before?\n        // shark3d code uses object.geometry.points. \n        // Let's assume geometry.points exists for now as per shark3d.\n\n        let stroke = object.userData.stroke;\n        let fill = object.userData.fill;\n        let position = new THREE.Vector3();\n        let mirrorOn = false;\n        object.getWorldPosition(position);\n        let quaternion = new THREE.Quaternion();\n        object.getWorldQuaternion(quaternion);\n        let scale = new THREE.Vector3();\n        object.getWorldScale(scale);\n\n        let matrix = object.matrix;\n\n        if (object.parent) object.parent.remove(object);\n\n        mirror.eraseMirrorOf(object);\n        if (object.material) {\n            if (object.material.map) object.material.map.dispose();\n            object.material.dispose();\n        }\n\n        if (object.userData && object.userData.fill && object.userData.fill.show_fill && object.children.length > 0) {\n            if (object.children[0].material) object.children[0].material.dispose();\n        }\n\n        undoManager.add({\n            undo: function () {\n                // Warning: fromVertices might not handle vertices format if it expects array of Vectors.\n                // shark3d uses object.geometry.points.\n                draw.fromVertices(\n                    vertices,\n                    stroke,\n                    fill,\n                    mirrorOn,\n                    uuid,\n                    //true\n                    position,\n                    quaternion,\n                    scale,\n                    matrix\n                );\n                renderer.render(scene, camera);\n            },\n            redo: function () {\n                const obj = scene.getObjectByProperty(\"uuid\", uuid);\n                if (obj) erase.deleteObject(obj);\n                renderer.render(scene, camera);\n            }\n        });\n\n        if (undoRedoComponent && undoRedoComponent.$.ctx) undoRedoComponent.$.ctx.updateUi();\n\n    },\n    onStart: function (cx, cy) {\n        this.e = new this.eraser();\n        this.e.resetPicking();\n        this.e.setupPicking();\n        this.e.start(cx, cy);\n    },\n    onMove: function (cx, cy) {\n        if (this.e) this.e.move(cx, cy);\n    },\n    onEnd: function () {\n        if (this.e) {\n            this.e.end();\n            this.e.resetPicking();\n        }\n    },\n    onCancel: function () {\n        //this.e ? this.e.cancel() : null;\n    }\n}\n\nexport { erase }","// {\n//     vertices: [],\n//     stroke: { show_stroke: true, force: [0], color: 'red', width: 3 },\n//     fill: { show_fill: false, color: 'black' },\n//   }\n\nimport * as THREE from \"three\";\nimport { Earcut } from 'three/src/extras/Earcut.js';\nimport { MeshLine, MeshLineMaterial, MeshLineRaycast } from \"meshline\";\n// import { generateMatcap } from \"./matcaps.js\";\n// import { generateMatcap } from \"./matcaps.js\";\nimport { scene, drawingScene, renderer, camera, vm } from \"../App.vue\";\nimport { canvas, currentShape } from \"./Canvas.vue\";\nimport { erase } from \"./erase.js\"\nimport { mirror } from \"./mirror.js\"\nimport { undoManager, undoRedoComponent } from \"./UndoRedo.vue\"\n\n// let pencil = new THREE.TextureLoader().load(\n//     \"/pencilVectorWide.png\"\n// )\n// let texture = new THREE.TextureLoader().load(\n//     \"/mesh.jpg\"\n// )\n// let texture = new THREE.TextureLoader().load(\n//     \"/watercolor.jpg\"\n// )\n// texture.wrapS = THREE.RepeatWrapping;\n// texture.wrapT = THREE.RepeatWrapping;\n// texture.repeat.set(1, 1);\n\n// Helper to generate brush textures (simplified for Original, no matcaps)\n// eslint-disable-next-line no-unused-vars\nfunction generateBrushTexture(type, materialType) {\n    if (type === 'solid') return null;\n    const canvas = document.createElement('canvas');\n    canvas.width = 64; canvas.height = 64;\n    const ctx = canvas.getContext('2d');\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, 64, 64);\n    ctx.globalCompositeOperation = 'destination-in';\n    if (type === 'soft') {\n        const gradient = ctx.createLinearGradient(0, 0, 0, 64);\n        gradient.addColorStop(0, 'rgba(255, 255, 255, 0)');\n        gradient.addColorStop(0.5, 'rgba(255, 255, 255, 1)');\n        gradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, 64, 64);\n    } else if (type === 'noise') {\n        const imgData = ctx.createImageData(64, 64);\n        for (let i = 0; i < imgData.data.length; i += 4) {\n            imgData.data[i] = 0; imgData.data[i + 1] = 0; imgData.data[i + 2] = 0;\n            imgData.data[i + 3] = Math.random() * 255;\n        }\n        const tempC = document.createElement('canvas');\n        tempC.width = 64; tempC.height = 64;\n        tempC.getContext('2d').putImageData(imgData, 0, 0);\n        ctx.drawImage(tempC, 0, 0);\n    } else {\n        ctx.fillStyle = 'white';\n        ctx.fillRect(0, 0, 64, 64);\n    }\n    const texture = new THREE.CanvasTexture(canvas);\n    texture.wrapS = THREE.RepeatWrapping;\n    texture.wrapT = THREE.RepeatWrapping;\n    return texture;\n}\n\n// Helper function to get the active layer group\nfunction getActiveLayerGroup() {\n    if (vm && vm.getActiveLayerGroup) {\n        return vm.getActiveLayerGroup() || scene;\n    }\n    return scene;\n}\n\nlet draw = {\n    l: undefined,\n    draw: class {\n        constructor(stroke, fill) {\n            // Defaults to ensure visibility if stroke object is empty\n            this.stroke = {\n                ...stroke,\n                show_stroke: stroke.show_stroke !== false, // Default to true if undefined\n                lineWidth: stroke.lineWidth || 0.1,        // Default to visible width\n                color: stroke.color || '#000000',          // Default to black\n                opacity: stroke.opacity !== undefined ? stroke.opacity : 1,\n            };\n            this.line = new MeshLine();\n            this.geometry = new THREE.BufferGeometry();\n            this.vertices = new Float32Array([]);\n            this.geometry.setAttribute(\"position\", new THREE.BufferAttribute(this.vertices, 3));\n\n            this.material = new MeshLineMaterial({\n                lineWidth: this.stroke.show_stroke ? this.stroke.lineWidth : 0.005,\n                sizeAttenuation: 1,\n                color: this.stroke.show_stroke ? this.stroke.color : 0xFFFFFF,\n                side: THREE.DoubleSide,\n                fog: true,\n                wireframe: false,\n                alphaTest: this.stroke.opacity < 1 ? 0 : 0.5,\n                blending: THREE.NormalBlending,\n                transparent: true,\n                depthWrite: this.stroke.opacity >= 1,\n                depthTest: true,\n                repeat: new THREE.Vector2(this.stroke.textureScale || 1, 1),\n                opacity: this.stroke.opacity !== undefined ? this.stroke.opacity : 1,\n                resolution: new THREE.Vector2(window.innerWidth, window.innerHeight),\n                dashArray: this.stroke.dashArray || 0,\n                dashOffset: this.stroke.dashOffset || 0,\n                dashRatio: this.stroke.dashRatio || 0.5,\n            });\n\n            // If soft brush or noise, we need specific material settings\n            if (this.stroke.brushType === 'soft' || this.stroke.brushType === 'noise') {\n                this.material.alphaTest = 0;\n                this.material.depthWrite = false;\n            }\n            this.mesh = new THREE.Mesh(this.line, this.material);\n            this.uuid = this.mesh.uuid;\n\n            this.mesh.raycast = MeshLineRaycast;\n            this.mesh.layers.set(1);\n            this.bufferPoints = new Array();\n            this.size = stroke.smoothing || 4;\n\n            this.mesh.userData.vertices = new Array();\n            this.mesh.userData.stroke = {\n                show_stroke: stroke.show_stroke,\n                color: stroke.color,\n                lineWidth: stroke.lineWidth,\n                opacity: stroke.opacity !== undefined ? stroke.opacity : 1,\n                brushType: stroke.brushType,\n                taper: stroke.taper !== undefined ? stroke.taper : 3,\n                smoothing: stroke.smoothing || 4,\n                textureScale: stroke.textureScale || 1,\n                wiggle: stroke.wiggle || 0,\n                animationSpeed: stroke.animationSpeed || 0,\n                dashArray: stroke.dashArray || 0,\n                dashOffset: stroke.dashOffset || 0,\n                dashRatio: stroke.dashRatio || 0.5,\n            };\n            this.mesh.userData.stroke.force = new Array();\n            this.mesh.userData.fill = { show_fill: fill.show_fill, color: fill.color };\n\n            let position = new THREE.Vector3();\n            canvas.getWorldPosition(position);\n            let quaternion = new THREE.Quaternion();\n            canvas.getWorldQuaternion(quaternion);\n            let scale = new THREE.Vector3();\n            canvas.getWorldScale(scale);\n\n            this.mesh.userData.canvas = { shape: currentShape, position: position, quaternion: quaternion, scale: scale };\n\n            this.fill = fill;\n            this.fillGeometry = new THREE.BufferGeometry();\n            this.fillVertices = new Float32Array([]);\n            this.fillGeometry.setAttribute(\"position\", new THREE.BufferAttribute(this.fillVertices, 3));\n            this.uvsX = [];\n            this.uvsY = [];\n            this.uvs = [];\n            this.triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3)), 1);\n            this.face = null;\n            this.fillGeometry.setIndex(this.triangles);\n            this.fillMaterial = new THREE.MeshBasicMaterial({\n                color: this.fill.color,\n                side: THREE.DoubleSide,\n                wireframe: false,\n                polygonOffset: this.stroke.show_stroke ? true : false,\n                polygonOffsetFactor: this.stroke.lineWidth * 1000,\n                depthTest: true,\n                polygonOffsetUnits: -1,\n                transparent: this.fill.show_fill ? true : false,\n                opacity: this.fill.show_fill ? 0.05 : 0,\n                fog: true,\n                // map: texture\n            });\n            this.fillMesh = new THREE.Mesh(this.fillGeometry, this.fillMaterial);\n            this.fillMesh.layers.set(1);\n        }\n        start(mirrorOn, radial, sectors, radialAxis, localSymmetry) {\n            this.radial = radial;\n            this.sectors = sectors;\n            this.radialAxis = radialAxis || 'y';\n            this.localSymmetry = localSymmetry;\n\n            if (this.stroke.show_stroke === false && this.fill.show_stroke === false) return\n\n            drawingScene.add(this.mesh);\n\n            if (this.fill.show_fill) {\n                this.mesh.add(this.fillMesh)\n            }\n\n            if (mirrorOn && typeof mirrorOn === 'string') {\n                const axes = mirrorOn.split('');\n                let currentObjects = [this.mesh];\n                axes.forEach(axis => {\n                    let nextObjects = [];\n                    currentObjects.forEach(obj => {\n                        let clone = mirror.object(obj, axis, drawingScene, this.localSymmetry ? canvas : null);\n                        if (clone) nextObjects.push(clone);\n                    });\n                    currentObjects = currentObjects.concat(nextObjects);\n                });\n            }\n            // console.log(x, y, z, unproject, force)\n\n        }\n        move(x, y, z, force, unproject) {\n\n            if (this.stroke.show_stroke === false && this.fill.show_fill === false) return\n            this.addVertex(x, y, z, force, unproject)\n        }\n        end_internal(mirrorOn, render) {\n            const layerGroup = getActiveLayerGroup();\n            layerGroup.add(this.mesh);\n            drawingScene.clear();\n\n            this.geometry.verticesNeedsUpdate = true;\n            this.stroke.show_stroke ? '' : this.mesh.material.opacity = 0;\n            this.fill.show_fill ? this.fillMesh.material.transparent = false : '';\n            this.fill.show_fill ? this.fillMesh.material.opacity = 1 : '';\n\n            this.mesh.position.set(\n                this.mesh.geometry.boundingSphere.center.x,\n                this.mesh.geometry.boundingSphere.center.y,\n                this.mesh.geometry.boundingSphere.center.z\n            );\n\n            this.geometry.center();\n            this.setGeometry(\"tail\");\n            this.geometry.needsUpdate = true;\n\n            if (mirrorOn && typeof mirrorOn === 'string') {\n                const axes = mirrorOn.split('');\n                let currentObjects = [this.mesh];\n                axes.forEach(axis => {\n                    let nextObjects = [];\n                    currentObjects.forEach(obj => {\n                        let clone = mirror.object(obj, axis, layerGroup, this.localSymmetry ? canvas : null);\n                        if (clone) nextObjects.push(clone);\n                    });\n                    currentObjects = currentObjects.concat(nextObjects);\n                });\n            }\n\n            // Radial Symmetry Logic\n            if (this.radial && this.sectors > 1) {\n                const angleStep = (Math.PI * 2) / this.sectors;\n                const m = this.localSymmetry ? canvas.matrixWorld : null;\n                const mInv = m ? m.clone().invert() : null;\n\n                const createRadialCopies = (targetMesh) => {\n                    for (let i = 1; i < this.sectors; i++) {\n                        const angle = angleStep * i;\n                        const clone = targetMesh.clone();\n                        clone.layers.set(1);\n                        clone.raycast = MeshLineRaycast;\n\n                        let rotMatrix = new THREE.Matrix4();\n                        if (this.radialAxis === 'x') {\n                            rotMatrix.makeRotationX(angle);\n                        } else if (this.radialAxis === 'z') {\n                            rotMatrix.makeRotationZ(angle);\n                        } else {\n                            rotMatrix.makeRotationY(angle);\n                        }\n\n                        if (this.localSymmetry && m && mInv) {\n                            const transform = m.clone().multiply(rotMatrix).multiply(mInv);\n                            clone.applyMatrix4(transform);\n                        } else {\n                            clone.position.applyMatrix4(rotMatrix);\n                            if (this.radialAxis === 'x') clone.rotateX(angle);\n                            else if (this.radialAxis === 'z') clone.rotateZ(angle);\n                            else clone.rotateY(angle);\n                        }\n\n                        layerGroup.add(clone);\n                    }\n                };\n\n                createRadialCopies(this.mesh);\n\n                // For multi-axis mirroring, we should rotate all generated mirror copies\n                layerGroup.children.forEach(child => {\n                    if (child.userData && (child.userData.mirror || child.userData.mirrors || child.userData.mirrorParent) && child.parent === layerGroup) {\n                        createRadialCopies(child);\n                    }\n                });\n            }\n\n            let vert = this.geometry.attributes.position.array;\n            this.fillGeometry.setAttribute('position', new THREE.BufferAttribute(vert, 3));\n            let triangles;\n\n            var planeVector = (new THREE.Vector3(0, 0, 1)).applyQuaternion(this.fillMesh.quaternion);\n            var cameraVector = (new THREE.Vector3(0, 0, -1)).applyQuaternion(camera.quaternion);\n\n            if (planeVector.angleTo(cameraVector) > Math.PI / 2) { triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3)), 1) } else { triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3).reverse()), 1) }\n            this.fillGeometry.setIndex(triangles);\n            this.fillGeometry.computeBoundingSphere();\n\n\n            if (render === true) {\n                renderer.autoClear = true;\n                renderer.render(scene, camera);\n            }\n        }\n        end(mirrorOn) {\n\n            if (this.stroke.show_stroke === false && this.fill.show_stroke === false) return\n            if (this.geometry.attributes.position.array.length < 3) return\n\n            this.end_internal(mirrorOn, true);\n\n            let uuid = this.uuid;\n            let vertices = this.geometry.attributes.position.array;\n            let stroke = this.mesh.userData.stroke;\n            let fill = this.mesh.userData.fill;\n            let position = new THREE.Vector3();\n            this.mesh.getWorldPosition(position);\n            let quaternion = new THREE.Quaternion();\n            this.mesh.getWorldQuaternion(quaternion);\n            let scale = new THREE.Vector3();\n            this.mesh.getWorldScale(scale);\n\n            let matrix = this.mesh.matrix;\n\n            undoManager.add({\n                undo: function () {\n                    erase.deleteObject(scene.getObjectByProperty(\n                        \"uuid\",\n                        uuid\n                    ))\n                    renderer.render(scene, camera);\n                },\n                redo: function () {\n                    draw.fromVertices(\n                        vertices,\n                        stroke,\n                        fill,\n                        mirrorOn,\n                        uuid,\n                        //true\n                        position,\n                        quaternion,\n                        scale,\n                        matrix,\n                        true\n                    );\n                }\n            });\n\n            undoRedoComponent.$.ctx.updateUi();\n\n        }\n        addVertex(x, y, z, force, unproject) {\n\n            var v3 = new THREE.Vector3(x, y, z);\n            if (unproject) {\n                v3.unproject(camera);\n            }\n            var v4 = new THREE.Vector4(v3.x, v3.y, v3.z, force);\n            let raycaster = new THREE.Raycaster();\n            raycaster.setFromCamera(new THREE.Vector2(x, y), camera);\n            try {\n                var intersectedObject = raycaster.intersectObjects([canvas])[0];\n                var nt = intersectedObject.point;\n                if (this.face === null) {\n                    if (\n                        (Math.sign(intersectedObject.face.normal.y) === -1 || Object.is(Math.sign(intersectedObject.face.normal.y), -0))\n                        ||\n                        (Math.sign(intersectedObject.face.normal.z) === -1 || Object.is(Math.sign(intersectedObject.face.normal.z), -0))\n                    ) {\n                        this.face = 'back'\n                    } else {\n                        this.face = 'front'\n                    }\n                }\n                let normal = { x: 0, y: 0, z: 0 };\n                let wiggleVal = this.stroke.wiggle || 0;\n                let wx = (Math.random() - 0.5) * wiggleVal;\n                let wy = (Math.random() - 0.5) * wiggleVal;\n                let wz = (Math.random() - 0.5) * wiggleVal;\n                v4 = new THREE.Vector4(nt.x + normal.x + wx, nt.y + normal.y + wy, nt.z + normal.z + wz, force);\n            } catch (err) {\n                //expected if the line leaves the 3d canvas\n                // console.log(err);\n                return\n            }\n\n            function map(n, start1, stop1, start2, stop2) {\n                return (\n                    ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2\n                );\n            }\n\n            if (unproject) {\n                this.appendToBuffer(v4);\n                let pt = this.getAveragePoint(0);\n                if (pt) {\n                    //stroke\n                    this.mesh.userData.vertices.push([pt.x, pt.y, pt.z]);\n                    this.mesh.userData.stroke.force.push(pt.w);\n\n                    this.geometry.attributes.position.array = this.Float32Concat(this.geometry.attributes.position.array, new Float32Array([pt.x, pt.y, pt.z]));\n\n                    this.uvsX.push(pt.x)\n                    this.uvsY.push(pt.y)\n\n                    this.geometry.attributes.position.count = this.geometry.attributes.position.count + 3\n                    this.geometry.attributes.position.needsUpdate = true;\n\n                    if (this.geometry.attributes.position.count > 3 && this.fill != false) {\n                        let vert = this.geometry.attributes.position.array;\n                        this.fillGeometry.setAttribute('position', new THREE.BufferAttribute(vert, 3));\n                        this.fillGeometry.attributes.position.needsUpdate = true;\n                        this.fillGeometry.computeBoundingSphere();\n\n                        const uvLowestX = Math.min(...this.uvsX);\n                        const uvHighestX = Math.max(...this.uvsX);\n                        const uvLowestY = Math.min(...this.uvsY);\n                        const uvHighestY = Math.max(...this.uvsY);\n\n                        this.uvs = []\n                        for (let u = 0; u < this.uvsX.length; u++) {\n                            let x = map(this.uvsX[u], uvLowestX, uvHighestX, 0.01, 0.99)\n                            let y = map(this.uvsY[u], uvLowestY, uvHighestY, 0.01, 0.99)\n                            this.uvs.push(x, y);\n                        }\n\n                        this.fillGeometry.setAttribute('uv', new THREE.Float32BufferAttribute(this.uvs, 2));\n                        this.fillGeometry.attributes.uv.needsUpdate = true;\n\n                        let triangles = new THREE.BufferAttribute(new Uint16Array(Earcut.triangulate(this.fillGeometry.attributes.position.array, null, 3)), 1);\n                        this.fillGeometry.index = triangles;\n                        this.fillGeometry.index.needsUpdate = true;\n\n                        this.fillGeometry.needsUpdate = true;\n                    }\n\n                }\n            } else {\n                this.mesh.userData.stroke.force.push(force);\n                this.geometry.attributes.position.array = this.Float32Concat(this.geometry.attributes.position.array, new Float32Array([v3.x, v3.y, v3.z]));\n                this.geometry.attributes.position.count = this.geometry.attributes.position.count + 3\n                this.geometry.attributes.position.needsUpdate = true;\n\n            }\n            this.setGeometry();\n            renderer.autoClear = false;\n            renderer.clearDepth();\n            renderer.render(drawingScene, camera);\n        }\n        Float32Concat(first, second) {\n            var firstLength = first.length,\n                result = new Float32Array(firstLength + second.length);\n\n            result.set(first);\n            result.set(second, firstLength);\n\n            return result;\n        }\n        appendToBuffer(pt) {\n            this.bufferPoints.push(pt);\n            while (this.bufferPoints.length > this.size) {\n                this.bufferPoints.shift();\n            }\n        }\n        getAveragePoint(offset) {\n            var len = this.bufferPoints.length;\n            if (len % 2 === 1 || len >= this.size) {\n                var totalX = 0;\n                var totalY = 0;\n                var totalZ = 0;\n                var totalW = 0;\n                var pt, i;\n                var count = 0;\n                for (i = offset; i < len; i++) {\n                    count++;\n                    pt = this.bufferPoints[i];\n                    totalX += pt.x;\n                    totalY += pt.y;\n                    totalZ += pt.z;\n                    totalW += pt.w;\n                }\n                return {\n                    x: totalX / count,\n                    y: totalY / count,\n                    z: totalZ / count,\n                    w: totalW / count,\n                };\n            }\n            return null;\n        }\n        setGeometry(end) {\n            this.line.setPoints(\n                this.geometry.attributes.position.array,\n                (p) => {\n                    let length = this.geometry.attributes.position.array.length / 3;\n                    let force = this.mesh.userData.stroke.force;\n                    function map(n, start1, stop1, start2, stop2) {\n                        return (\n                            ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2\n                        );\n                    }\n                    let index = Math.round(p * (length - 1));\n                    let minWidth = 0;\n                    let baseWidth = 3;\n                    let width = force[index] * 16;\n                    let tailLength = this.stroke.taper !== undefined ? this.stroke.taper : 3;\n\n                    //Beginning of the line\n                    if (index < tailLength) {\n                        return map(\n                            index,\n                            0, // Start from index 0\n                            tailLength,\n                            minWidth,\n                            baseWidth + width\n                        );\n                    }\n                    //End of the line\n                    else if (index > length - tailLength && end == \"tail\") {\n                        return map(\n                            index,\n                            length - tailLength,\n                            length - 1,\n                            baseWidth + width,\n                            minWidth\n                        );\n                    }\n                    //bulk of the line\n                    else {\n                        return baseWidth + width;\n                    }\n                }\n            );\n        }\n        setUvs() {\n            function map(n, start1, stop1, start2, stop2) {\n                return (\n                    ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2\n                );\n            }\n\n            const uvLowestX = Math.min(...this.uvsX);\n            const uvHighestX = Math.max(...this.uvsX);\n            const uvLowestY = Math.min(...this.uvsY);\n            const uvHighestY = Math.max(...this.uvsY);\n            this.uvs = []\n            for (let u = 0; u < this.uvsX.length; u++) {\n                let x = map(this.uvsX[u], uvLowestX, uvHighestX, 0.01, 0.99)\n                let y = map(this.uvsY[u], uvLowestY, uvHighestY, 0.01, 0.99)\n                this.uvs.push(x, y);\n            }\n\n            this.fillGeometry.setAttribute('uv', new THREE.Float32BufferAttribute(this.uvs, 2));\n            this.fillGeometry.attributes.uv.needsUpdate = true;\n        }\n        cancel() {\n            drawingScene.remove(this.mesh);\n            mirror.eraseMirrorOf(this.mesh);\n            this.mesh.material.dispose();\n            draw.l = undefined;\n            draw.l = new draw.draw();\n            drawingScene.clear();\n            renderer.render(drawingScene, camera);\n            renderer.autoClear = true;\n            renderer.render(scene, camera);\n        }\n    },\n    onStart: function (x, y, z, force, unproject, mirrorOn, stroke, fill, radial, sectors, radialAxis, localSymmetry) {\n        //this draw acceppts two arguments: stroke and fill. stroke: { show_stroke: bool, color: 'red', lineWidth: 3 }, fill: { show_fill: bool, color: 'black' },\n        //I should gate the possibility of drawing something without stroke or fill\n        this.l = new this.draw(stroke, fill);\n        this.l.start(mirrorOn, radial, sectors, radialAxis, localSymmetry);\n    },\n    onMove: function (x, y, z, force, unproject) {\n        this.l.move(x, y, z, force, unproject);\n    },\n    onEnd: function (mirrorOn) {\n        this.l.end(mirrorOn);\n    },\n    onEnd_internal: function (mirrorOn, render) {\n        this.l.end_internal(mirrorOn, render);\n    },\n    onCancel: function () {\n        this.l ? this.l.cancel() : null;\n    },\n    fromVertices(vertices, stroke, fill, mirrorOn, uuid, position, quaternion, scale, matrix, render) {\n\n        let verticesArray = [];\n        // Check if vertices is array of Vector3 or flat array\n        if (vertices.length > 0 && vertices[0].isVector3) {\n            vertices.forEach((v3) => {\n                verticesArray.push(v3.x || 0, v3.y || 0, v3.z || 0);\n            });\n        } else {\n            // Assume it is already flat\n            verticesArray = Array.from(vertices);\n        }\n\n        this.l = new this.draw(stroke, fill);\n        this.onStart(0, 0, 0, 0, false, mirrorOn, stroke, fill);\n\n        const float32Vertices = new Float32Array(verticesArray);\n        this.l.geometry.setAttribute('position', new THREE.BufferAttribute(float32Vertices, 3));\n        this.l.geometry.attributes.position.count = float32Vertices.length / 3;\n        this.l.geometry.attributes.position.needsUpdate = true;\n\n        // Defaults for optional transforms\n        if (!matrix) matrix = new THREE.Matrix4();\n        if (!position) position = new THREE.Vector3(0, 0, 0);\n        if (!quaternion) quaternion = new THREE.Quaternion();\n        if (!scale) scale = new THREE.Vector3(1, 1, 1);\n\n        for (let i = 0; i < float32Vertices.length / 3; i++) {\n            let v3 = new THREE.Vector3().fromArray(float32Vertices, i * 3).applyMatrix4(matrix);\n            this.l.uvsX.push(v3.x)\n            this.l.uvsY.push(v3.y)\n        }\n\n        this.l.setUvs();\n\n        // If 'force' is missing from stroke data (e.g. new shape), fill it\n        if (!stroke.force || stroke.force.length === 0) {\n            this.l.mesh.userData.stroke.force = new Array(Math.floor(float32Vertices.length / 3)).fill(0.5); // Default pressure\n        } else {\n            this.l.mesh.userData.stroke.force = stroke.force;\n        }\n        this.l.setGeometry();\n\n        if (uuid) { this.l.mesh.uuid = uuid; }\n        this.onEnd_internal(mirrorOn, false);\n        if (matrix) {\n            this.l.mesh.applyMatrix4(matrix)\n        }\n        if (position) {\n            this.l.mesh.position.set(\n                position.x,\n                position.y,\n                position.z\n            );\n        }\n        if (quaternion) {\n            this.l.mesh.quaternion.set(\n                quaternion._x,\n                quaternion._y,\n                quaternion._z,\n                quaternion._w\n            );\n        }\n        if (scale) {\n            this.l.mesh.scale.set(\n                scale.x,\n                scale.y,\n                scale.z\n            );\n        }\n        // Direct scene add for simplicity in restore or fetch active layer if needed\n        let lg = getActiveLayerGroup();\n        lg.add(this.l.mesh);\n\n        if (render === true) { renderer.render(scene, camera) }\n    },\n    updateStroke: function (mesh, stroke) {\n        if (!mesh || !mesh.userData.stroke) return;\n\n        // Simplified update for Original\n        // Update UserData\n        Object.assign(mesh.userData.stroke, stroke);\n\n        // Update Material\n        const mat = mesh.material;\n        if (stroke.color) mat.color.setStyle(stroke.color);\n        if (stroke.lineWidth !== undefined) {\n            mat.lineWidth = stroke.lineWidth;\n            if (mat.uniforms.lineWidth) mat.uniforms.lineWidth.value = stroke.lineWidth;\n        }\n\n        if (stroke.opacity !== undefined) {\n            mat.opacity = stroke.opacity;\n            mat.transparent = true;\n            if (mat.uniforms.opacity) mat.uniforms.opacity.value = stroke.opacity;\n        }\n\n        if (stroke.dashArray !== undefined) {\n            mat.dashArray = stroke.dashArray;\n            if (mat.uniforms.dashArray) mat.uniforms.dashArray.value = stroke.dashArray;\n        }\n        if (stroke.dashOffset !== undefined) {\n            mat.dashOffset = stroke.dashOffset;\n            if (mat.uniforms.dashOffset) mat.uniforms.dashOffset.value = stroke.dashOffset;\n        }\n        if (stroke.dashRatio !== undefined) {\n            mat.dashRatio = stroke.dashRatio;\n            if (mat.uniforms.dashRatio) mat.uniforms.dashRatio.value = stroke.dashRatio;\n        }\n\n        if (stroke.textureScale !== undefined) {\n            mat.repeat.x = stroke.textureScale;\n            if (mat.uniforms.repeat) mat.uniforms.repeat.value.x = stroke.textureScale;\n        }\n\n        // No matcap support in Original\n        // update texture if stroke.brushType changes (basic types)\n\n        const brushTexture = generateBrushTexture(\n            stroke.brushType || mesh.userData.stroke.brushType,\n            'standard'\n        );\n\n        if (mat.map && mat.map !== brushTexture) mat.map.dispose();\n\n        if (brushTexture) {\n            mat.map = brushTexture;\n            mat.alphaMap = brushTexture;\n            mat.useMap = 1;\n            mat.transparent = true;\n\n            if (stroke.brushType === 'soft' || stroke.brushType === 'noise') {\n                mat.alphaTest = 0;\n                mat.depthWrite = false;\n            } else {\n                mat.alphaTest = 0.5;\n                mat.depthWrite = true;\n            }\n\n            if (mat.uniforms.map) mat.uniforms.map.value = brushTexture;\n            if (mat.uniforms.alphaMap) mat.uniforms.alphaMap.value = brushTexture;\n\n            // Re-apply opacity logic just in case\n            if (mat.opacity < 1) {\n                mat.alphaTest = 0;\n                mat.depthWrite = false;\n            }\n        }\n    },\n    updateFill: function (mesh, fill) {\n        if (!mesh || !mesh.userData.fill) return;\n        Object.assign(mesh.userData.fill, fill);\n        // ... fill update logic if needed\n    },\n    animateLines: function (delta) {\n        let animated = false;\n        if (!scene) return false;\n\n        const updateMesh = (mesh) => {\n            if (mesh.userData && mesh.userData.stroke && mesh.userData.stroke.animationSpeed > 0) {\n                if (mesh.material.uniforms && mesh.material.uniforms.dashOffset) {\n                    mesh.material.uniforms.dashOffset.value -= mesh.userData.stroke.animationSpeed * delta;\n                    animated = true;\n                }\n            }\n        };\n\n        scene.traverse((child) => {\n            if (child.isMesh && child.userData.stroke) {\n                updateMesh(child);\n            }\n        });\n\n        return animated;\n    }\n}\n\n\nexport { draw }","import { scene, renderer, camera } from \"../App.vue\";\n\nlet loop = false;\n\nlet animate = function () {\n    if (loop) {\n        requestAnimationFrame(animate);\n        renderer.render(scene, camera);\n    }\n};\n\nlet startAnimating = function () {\n    loop = true;\n    animate();\n}\n\nlet stopAnimating = function () {\n    loop = false;\n}\n\nexport { startAnimating, stopAnimating, loop } ","import * as THREE from \"three\";\nimport { scene, renderer, camera, vm } from \"../App.vue\";\nimport { TransformControls } from \"./transformControls.js\";\nimport { mirror } from \"./mirror.js\"\nimport { erase } from \"./erase.js\"\n// import { MeshLineRaycast } from \"three.meshline\"; // Unused import\nimport { startAnimating, stopAnimating, loop } from \"./animate.js\"\nimport { undoManager, undoRedoComponent } from \"./UndoRedo.vue\"\n\nlet select = {\n    s: undefined,\n    dragged: false,\n    transformMode: \"combined\",\n    vertexSelection: class {\n        constructor() {\n            this.start = new THREE.Vector2();\n            this.end = new THREE.Vector2();\n            this.cssStart = new THREE.Vector2();\n            this.cssEnd = new THREE.Vector2();\n        }\n        pointInRect(x, y, z1, z2, z3, z4) {\n            let x1 = Math.min(z1, z3);\n            let x2 = Math.max(z1, z3);\n            let y1 = Math.min(z2, z4);\n            let y2 = Math.max(z2, z4);\n            if (x1 <= x && x <= x2 && y1 <= y && y <= y2) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n        getObjectBoundingBoxPoints(object) {\n            let bb;\n            if (object.geometry.boundingBox != undefined) {\n                bb = object.geometry.boundingBox;\n            } else {\n                return;\n            }\n\n            var points = [\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n                new THREE.Vector3(),\n            ];\n\n            points[0].set(bb.min.x, bb.min.y, bb.min.z); // 000\n            points[1].set(bb.min.x, bb.min.y, bb.max.z); // 001\n            points[2].set(bb.min.x, bb.max.y, bb.min.z); // 010\n            points[3].set(bb.min.x, bb.max.y, bb.max.z); // 011\n            points[4].set(bb.max.x, bb.min.y, bb.min.z); // 100\n            points[5].set(bb.max.x, bb.min.y, bb.max.z); // 101\n            points[6].set(bb.max.x, bb.max.y, bb.min.z); // 110\n            points[7].set(bb.max.x, bb.max.y, bb.max.z); // 111\n            points[8].set(\n                object.geometry.boundingSphere.center.x,\n                object.geometry.boundingSphere.center.y,\n                object.geometry.boundingSphere.center.z\n            ); //does it make sense to add this?\n\n            points.forEach((point) => {\n                point.applyMatrix4(object.matrixWorld); // Use world matrix for accurate projection\n                point.project(camera);\n            });\n\n            return points;\n        }\n        select() {\n            let selectedObjects = new Array();\n\n            const traverse = (children) => {\n                children.forEach((object) => {\n                    if (object.isGroup) {\n                        traverse(object.children);\n                    }\n\n                    if (object.layers.mask == 2 && object.visible) {\n                        //get the projected bounding points of the rectangle\n                        let boundingBoxPoints = this.getObjectBoundingBoxPoints(object)\n                        if (boundingBoxPoints != undefined) {\n                            for (var j = boundingBoxPoints.length; j--;) {\n                                //check if any of the points is part of the selection\n                                let point = boundingBoxPoints[j];\n                                if (\n                                    this.pointInRect(\n                                        point.x,\n                                        point.y,\n                                        this.start.x,\n                                        this.start.y,\n                                        this.end.x,\n                                        this.end.y\n                                    )\n                                ) {\n                                    //If even one point is inside of the selection, it's worth checking for all the vertices (points), otherwise not\n                                    if (object.geometry && object.geometry.points) {\n                                        for (var k = object.geometry.points.length; k--;) {\n                                            let p = new THREE.Vector3(\n                                                object.geometry.points[k].x,\n                                                object.geometry.points[k].y,\n                                                object.geometry.points[k].z\n                                            );\n                                            p.applyMatrix4(object.matrixWorld); // Use matrixWorld for nested objects\n                                            p.project(camera);\n\n                                            if (\n                                                this.pointInRect(\n                                                    p.x,\n                                                    p.y,\n                                                    this.start.x,\n                                                    this.start.y,\n                                                    this.end.x,\n                                                    this.end.y\n                                                )\n                                            ) {\n                                                selectedObjects.push(object);\n                                                return;\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                        }\n                    }\n                });\n            }\n            traverse(scene.children);\n            return selectedObjects;\n        }\n    },\n    selection: class {\n        constructor() {\n            this.selected = new Array();\n            this.undoRedoSelection = new Array();\n            this.undoRedoMatrix = undefined;\n            this.selector = new select.vertexSelection()\n            this.helper = undefined;\n            this.controls = undefined;\n            this.group;\n            this.raycaster = new THREE.Raycaster();\n            this.raycaster.params.Line.threshold = 0.3;\n            this.raycaster.layers.set(1);\n            this.color = \"red\";\n        }\n        start(tx, ty, cx, cy) {\n            this.raycaster.setFromCamera(new THREE.Vector2(tx, ty), camera);\n            try {\n                var intersects = this.raycaster.intersectObjects(scene.children, true);\n                if (intersects.length > 0) {\n                    var intersectedObject = intersects[0].object;\n                    console.log(\"Selection Hit:\", intersectedObject);\n                    this.selected.push(intersectedObject);\n                } else {\n                    console.log(\"Selection Miss\");\n                }\n            } catch (err) {\n                console.error(\"Selection Error\", err);\n            }\n            this.selector.start.x = tx;\n            this.selector.start.y = ty;\n            this.selector.cssStart.x = cx;\n            this.selector.cssStart.y = cy;\n        }\n        move(cx, cy) {\n            if (this.selected.length == 0) {\n                console.log(cx, cy)\n            }\n        }\n        end(tx, ty) {\n            this.selector.end.x = tx;\n            this.selector.end.y = ty;\n            let objectsInRect = this.selector.select();\n\n\n            try {\n                objectsInRect.forEach((object) => {\n                    this.selected.push(object);\n                });\n            } catch (err) {\n                //console.log(err)\n            }\n\n            // Dedup selection\n            this.selected = [...new Set(this.selected)];\n\n\n            if (this.selected.length == 0) {\n                this.deselect();\n                return\n            } else {\n                this.select(this.selected);\n            }\n            renderer.render(scene, camera)\n        }\n        select(selection, matrix) {\n\n            //this.undoRedoMatrix = undefined;\n\n            this.select_internal(selection, matrix)\n\n            let previouslySelected = this.undoRedoSelection;\n            //let originalMatrix = this.undoRedoMatrix;\n            this.selected.forEach(object => {\n                previouslySelected.push(object.uuid)\n            })\n\n            undoManager.add({\n                undo: function () {\n                    console.log(\"undoing select\")\n                    select.s.deselect();\n                    renderer.render(scene, camera);\n                },\n                redo: function () {\n                    console.log(\"redoing select\")\n                    let selection = [];\n                    previouslySelected.forEach(uuid => {\n                        selection.push(scene.getObjectByProperty(\n                            \"uuid\",\n                            uuid\n                        ))\n                    })\n                    select.s.select(selection);\n                    renderer.render(scene, camera);\n                }\n            });\n            undoRedoComponent.$.ctx.updateUi();\n\n            // this.selected = new Array(); // Don't clear selection!\n        }\n        select_internal(selection, matrix) {\n            console.log(\"select_internal called with:\", selection.length, \"items\");\n            //selection can not be zero so it's either 1 or more than 1\n            //It's a single element\n            if (selection.length == 1) {\n                this.toggleSelectionColor(selection[0], true);\n                this.controls = new TransformControls(camera, renderer.domElement);\n                this.controls.mode = select.transformMode;\n                this.controls.attach(selection[0]);\n                this.controls.addEventListener(\"mouseDown\", function () {\n                    startAnimating();\n                    var position = new THREE.Vector3();\n                    this.object.getWorldPosition(position);\n                    var quaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(quaternion);\n                    var scale = new THREE.Vector3();\n                    this.object.getWorldScale(scale);\n                    this.userData.startingTransform = {\n                        position: position,\n                        quaternion: quaternion,\n                        scale: scale\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(false);\n\n                })\n                this.controls.addEventListener(\"change\", function () {\n                    if (!loop) {\n                        if (select.s && select.s.helper) select.s.helper.update();\n                        renderer.render(scene, camera);\n                    }\n                })\n                this.controls.addEventListener(\"objectChange\", function () {\n                    mirror.updateMirrorOf(this.object, scene);\n                    if (select.s && select.s.helper) select.s.helper.update();\n                    if (vm && vm.setSelectionPosition) {\n                        vm.setSelectionPosition({\n                            x: this.object.position.x,\n                            y: this.object.position.y,\n                            z: this.object.position.z\n                        });\n                    }\n                });\n                this.controls.addEventListener(\"mouseUp\", function () {\n                    stopAnimating();\n                    var endPosition = new THREE.Vector3();\n                    this.object.getWorldPosition(endPosition);\n                    var endQuaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(endQuaternion);\n                    var endScale = new THREE.Vector3();\n                    this.object.getWorldScale(endScale);\n\n                    let startPosition = this.userData.startingTransform.position;\n                    let startQuaternion = this.userData.startingTransform.quaternion;\n                    let startScale = this.userData.startingTransform.scale;\n\n                    if (!startPosition.equals(endPosition) || !startQuaternion.equals(endQuaternion) || !startScale.equals(endScale)) {\n                        undoManager.add({\n                            undo: function () {\n                                select.s.controls.object.position.copy(startPosition);\n                                select.s.controls.object.quaternion.copy(startQuaternion);\n                                select.s.controls.object.scale.copy(startScale);\n                                select.s.helper.update();\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n                                select.s.helper.update();\n                                renderer.render(scene, camera);\n                            },\n                            redo: function () {\n                                select.s.controls.object.position.copy(endPosition);\n                                select.s.controls.object.quaternion.copy(endQuaternion);\n                                select.s.controls.object.scale.copy(endScale)\n                                select.s.helper.update();\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n                                select.s.helper.update();\n                                renderer.render(scene, camera);\n                            }\n                        });\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(true);\n                    let position = select.s.calculateTransfromToolbarPosition();\n                    vm.$.ctx.setTransformToolbarPosition({\n                        left: position.x,\n                        top: position.y,\n                        location: position.location,\n                    })\n                    select.s.helper.update();\n\n                    renderer.render(scene, camera);\n                })\n                this.helper = new THREE.BoxHelper(\n                    selection[0],\n                    new THREE.Color(this.color)\n                );\n                scene.add(this.controls);\n                scene.add(this.helper);\n                this.helper.geometry.computeBoundingBox();\n                this.helper.update();\n\n                vm.$.ctx.setTransformToolbarDisplay(true)\n                let position = this.calculateTransfromToolbarPosition();\n                vm.$.ctx.setTransformToolbarPosition({\n                    left: position.x,\n                    top: position.y,\n                    location: position.location,\n                })\n            }\n            //It's a group\n            else {\n                this.group = new THREE.Group();\n                scene.add(this.group);\n                //we pass a matrix into the selection only to restore the group matrix properly on undo. This way worldTransformations can be applied in referse efficiently \n                if (matrix) {\n                    this.group.applyMatrix4(matrix);\n                    this.undoRedoMatrix = this.group.matrix\n                } else {\n                    this.undoRedoMatrix = this.group.matrix\n                }\n                //calculate where is the center for the selected objects so we can set the center of the group before we attach objects to it;\n                var center = new THREE.Vector3();\n                selection.forEach((obj) => {\n                    this.toggleSelectionColor(obj, true);\n                    center.add(obj.position);\n                });\n                center.divideScalar(selection.length);\n                this.group.position.set(center.x, center.y, center.z);\n                //Clone all the elements in the selection to the temporary groups\n                selection.forEach((element) => {\n                    var clone = element.clone();\n                    scene.add(clone);\n                    this.group.attach(clone);\n                    clone.userData.uuid = element.uuid;\n                    clone.visible = false;\n                });\n                this.controls = new TransformControls(camera, renderer.domElement);\n                this.controls.mode = select.transformMode;\n                this.controls.attach(this.group);\n                this.controls.addEventListener(\"mouseDown\", function () {\n                    startAnimating();\n                    var position = new THREE.Vector3();\n                    this.object.getWorldPosition(position);\n                    var quaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(quaternion);\n                    var scale = new THREE.Vector3();\n                    this.object.getWorldScale(scale);\n\n                    this.userData.startingTransform = {\n                        position: position,\n                        quaternion: quaternion,\n                        scale: scale\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(false);\n\n                })\n                this.controls.addEventListener(\"change\", function () {\n                    if (!loop) {\n                        if (select.s && select.s.helper) select.s.helper.update();\n                        renderer.render(scene, camera);\n                    }\n                })\n                this.controls.addEventListener(\"objectChange\", function () {\n                    if (select.s && select.s.helper) select.s.helper.update();\n                    if (vm && vm.setSelectionPosition && this.object) {\n                        vm.setSelectionPosition({\n                            x: this.object.position.x,\n                            y: this.object.position.y,\n                            z: this.object.position.z\n                        });\n                    }\n                    this.object.children.forEach((obj) => {\n                        var position = new THREE.Vector3();\n                        obj.getWorldPosition(position);\n                        var quaternion = new THREE.Quaternion();\n                        obj.getWorldQuaternion(quaternion);\n                        var scale = new THREE.Vector3();\n                        obj.getWorldScale(scale);\n                        var selectedObj = scene.getObjectByProperty(\"uuid\", obj.userData.uuid);\n                        selectedObj.position.copy(position);\n                        selectedObj.quaternion.copy(quaternion);\n                        selectedObj.scale.copy(scale);\n                        mirror.updateMirrorOf(selectedObj, scene);\n                    });\n                });\n                this.controls.addEventListener(\"mouseUp\", function () {\n                    stopAnimating();\n\n                    var endPosition = new THREE.Vector3();\n                    this.object.getWorldPosition(endPosition);\n                    var endQuaternion = new THREE.Quaternion();\n                    this.object.getWorldQuaternion(endQuaternion);\n                    var endScale = new THREE.Vector3();\n                    this.object.getWorldScale(endScale);\n\n                    let startPosition = this.userData.startingTransform.position;\n                    let startQuaternion = this.userData.startingTransform.quaternion;\n                    let startScale = this.userData.startingTransform.scale;\n\n                    var delta = endQuaternion.clone().invert();\n                    delta.multiply(startQuaternion);\n\n                    if (!startPosition.equals(endPosition) || !startQuaternion.equals(endQuaternion) || !startScale.equals(endScale)) {\n\n                        //There is a problem when we are coming back from a deselect because the object position, scale, quaternion is reset. I think it's possible to adjust these to be deltas\n                        undoManager.add({\n                            undo: function () {\n\n                                select.s.controls.object.position.copy(startPosition);\n                                select.s.controls.object.quaternion.copy(startQuaternion);\n                                select.s.controls.object.scale.copy(startScale);\n\n                                select.s.helper.update();\n\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n\n                                select.s.helper.update();\n\n                                select.s.controls.object.children.forEach((obj) => {\n                                    var position = new THREE.Vector3();\n                                    obj.getWorldPosition(position);\n                                    var quaternion = new THREE.Quaternion();\n                                    obj.getWorldQuaternion(quaternion);\n                                    var scale = new THREE.Vector3();\n                                    obj.getWorldScale(scale);\n                                    var selectedObj = scene.getObjectByProperty(\"uuid\", obj.userData.uuid);\n                                    selectedObj.position.copy(position);\n                                    selectedObj.quaternion.copy(quaternion);\n                                    selectedObj.scale.copy(scale);\n                                    mirror.updateMirrorOf(selectedObj, scene);\n                                });\n\n                                renderer.render(scene, camera);\n                            },\n                            redo: function () {\n                                select.s.controls.object.position.copy(endPosition);\n                                select.s.controls.object.quaternion.copy(endQuaternion);\n                                select.s.controls.object.scale.copy(endScale)\n\n                                select.s.helper.update();\n\n                                vm.$.ctx.setTransformToolbarDisplay(true)\n                                let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                                vm.$.ctx.setTransformToolbarPosition({\n                                    left: transfromToolbarPosition.x,\n                                    top: transfromToolbarPosition.y,\n                                    location: transfromToolbarPosition.location,\n                                })\n\n                                select.s.helper.update();\n\n                                select.s.controls.object.children.forEach((obj) => {\n                                    var position = new THREE.Vector3();\n                                    obj.getWorldPosition(position);\n                                    var quaternion = new THREE.Quaternion();\n                                    obj.getWorldQuaternion(quaternion);\n                                    var scale = new THREE.Vector3();\n                                    obj.getWorldScale(scale);\n                                    var selectedObj = scene.getObjectByProperty(\"uuid\", obj.userData.uuid);\n                                    selectedObj.position.copy(position);\n                                    selectedObj.quaternion.copy(quaternion);\n                                    selectedObj.scale.copy(scale);\n                                    mirror.updateMirrorOf(selectedObj, scene);\n                                });\n\n                                renderer.render(scene, camera);\n                            }\n                        });\n                    }\n\n                    vm.$.ctx.setTransformToolbarDisplay(true)\n                    let transfromToolbarPosition = select.s.calculateTransfromToolbarPosition();\n                    vm.$.ctx.setTransformToolbarPosition({\n                        left: transfromToolbarPosition.x,\n                        top: transfromToolbarPosition.y,\n                        location: transfromToolbarPosition.location,\n                    })\n                    select.s.helper.update();\n\n                    renderer.render(scene, camera);\n                })\n                scene.add(this.controls);\n                this.helper = new THREE.BoxHelper(\n                    this.group,\n                    new THREE.Color(this.color)\n                );\n                scene.add(this.helper);\n                this.helper.geometry.computeBoundingBox();\n                this.helper.update();\n            }\n\n            vm.$.ctx.setTransformToolbarDisplay(true)\n\n            if (vm && vm.setSelectionPosition && this.controls.object) {\n                let p = new THREE.Vector3();\n                this.controls.object.getWorldPosition(p);\n                vm.setSelectionPosition({ x: p.x, y: p.y, z: p.z });\n            }\n\n            let position = this.calculateTransfromToolbarPosition();\n            vm.$.ctx.setTransformToolbarPosition({\n                left: position.x,\n                top: position.y,\n                location: position.location,\n            })\n            this.helper.update();\n            renderer.render(scene, camera)\n\n        }\n        toggleSelectionColor(object, bool) {\n            if (bool) {\n                object.material.color = new THREE.Color(this.color);\n            } else {\n                object.userData.stroke != false ? object.material.color = new THREE.Color(object.userData.stroke.color) : '';\n            }\n        }\n        deselect() {\n            if (this.controls != undefined) {\n\n                this.deselect_internal();\n\n                let previouslySelected = this.undoRedoSelection;\n                this.selected.forEach(object => {\n                    previouslySelected.push(object.uuid)\n                })\n                let previousMatrix = this.undoRedoMatrix;\n\n                //TODO: deselect should update setTransformationToolbar on its own\n                undoManager.add({\n                    undo: function () {\n                        console.log(\"undoing deselect\")\n                        let selection = [];\n                        previouslySelected.forEach(uuid => {\n                            selection.push(scene.getObjectByProperty(\n                                \"uuid\",\n                                uuid\n                            ))\n                        })\n                        select.s = new select.selection();\n                        select.s.select(selection, previousMatrix);\n                        renderer.render(scene, camera);\n                    },\n                    redo: function () {\n\n                        console.log(\"redo deselect\")\n\n                        select.s.deselect()\n                        renderer.render(scene, camera);\n                    }\n                });\n\n                undoRedoComponent.$.ctx.updateUi();\n\n                renderer.render(scene, camera)\n            }\n        }\n        deselect_internal() {\n            if (this.controls && this.controls.object) {\n                switch (true) {\n                    case this.controls.object.type == \"Mesh\":\n                        this.undoRedoSelection = new Array();\n                        this.undoRedoSelection.push(this.controls.object.uuid); //for undo\n                        this.toggleSelectionColor(this.controls.object, false);\n                        //clear references to controls and helper\n                        scene.remove(this.controls);\n                        scene.remove(this.helper);\n                        this.controls.detach();\n                        this.controls.dispose();\n                        this.controls = undefined;\n                        this.helper = undefined;\n                        break;\n                    case this.controls.object.type == \"Group\":\n                        this.undoRedoSelection = new Array();\n                        this.undoRedoMatrix = this.controls.object.matrix;\n                        this.controls.object.children.forEach;\n                        for (var i = 0; i < this.controls.object.children.length; i++) {\n                            this.undoRedoSelection.push(this.controls.object.children[i].userData.uuid)\n                            this.toggleSelectionColor(this.controls.object.children[i], false);\n                        }\n                        scene.remove(this.group);\n                        //clear references to controls and helper\n                        scene.remove(this.controls);\n                        scene.remove(this.helper);\n                        this.controls.detach();\n                        this.controls.dispose();\n                        this.controls = undefined;\n                        this.helper = undefined;\n                        break;\n                    default:\n                    //do nothing, nothing is selected\n                }\n            } else {\n                // Fallback cleanup if object is missing but controls exist\n                if (this.controls) {\n                    scene.remove(this.controls);\n                    this.controls.detach();\n                    this.controls.dispose();\n                    this.controls = undefined;\n                }\n                if (this.helper) {\n                    scene.remove(this.helper);\n                    this.helper = undefined;\n                }\n                if (this.group) {\n                    scene.remove(this.group);\n                }\n            }\n            if (vm && vm.$.ctx) {\n                vm.$.ctx.setTransformToolbarDisplay(false);\n            }\n        }\n        duplicate() {\n            // Simplified Duplicate: Like Copy/Paste but instant\n            console.log(\"Duplicate (Clone in place) triggered\");\n\n            // If dragging, apply transform first?\n            // Assuming stationary duplication for now.\n\n            let previousSelectedArray = [];\n            let sourceObjects = [];\n\n            // Identify objects\n            if (this.controls && this.controls.object) {\n                if (this.controls.object.type == \"Mesh\") {\n                    // Single object\n                    sourceObjects.push(this.controls.object);\n                } else if (this.controls.object.type == \"Group\") {\n                    // Multiple objects\n                    this.controls.object.children.forEach((child) => {\n                        let original = scene.getObjectByProperty(\"uuid\", child.userData.uuid);\n                        if (original) sourceObjects.push(original);\n                    });\n                }\n            } else if (this.selected.length > 0) {\n                sourceObjects = this.selected;\n            }\n\n            sourceObjects.forEach(obj => previousSelectedArray.push(obj.uuid));\n\n            let duplicateArray = [];\n\n            // Clone loop\n            sourceObjects.forEach(obj => {\n                let clone = obj.clone();\n                clone.uuid = THREE.MathUtils.generateUUID();\n\n                // Safe material clone\n                if (clone.material) {\n                    try {\n                        clone.material = clone.material.clone();\n                    } catch (e) {\n                        // Fallback if material cloning fails\n                        console.warn(\"Clone material failed\", e);\n                    }\n                }\n\n                // Slight offset to indicate duplication happened\n                // clone.position.addScalar(0.5); \n                // Wait, user used 'copy paste' as reference. \n                // Copy paste usually puts it exactly on top or slightly offset.\n                // Let's create a small random offset or standard offset to avoid Z-fighting/confusion\n                clone.position.x += 1;\n                clone.position.y += 0;\n\n                scene.add(clone);\n                duplicateArray.push(clone);\n\n                // Mirror handling if needed\n                if (clone.userData.mirrorAxis) {\n                    mirror.object(clone, clone.userData.mirrorAxis, scene);\n                }\n            });\n\n            // Select new objects\n            this.deselect_internal();\n            this.selected = duplicateArray;\n            this.select_internal(this.selected);\n            renderer.render(scene, camera);\n\n            // Undo logic\n            undoManager.add({\n                undo: function () {\n                    select.s.deselect_internal();\n                    duplicateArray.forEach(o => erase.deleteObject(o));\n\n                    // Select previous\n                    let prevSel = [];\n                    previousSelectedArray.forEach(id => {\n                        let o = scene.getObjectByProperty(\"uuid\", id);\n                        if (o) prevSel.push(o);\n                    });\n                    if (prevSel.length) {\n                        select.s = new select.selection();\n                        select.s.select(prevSel);\n                    }\n                    renderer.render(scene, camera);\n                },\n                redo: function () {\n                    if (select.s) select.s.duplicate();\n                }\n            });\n            undoRedoComponent.$.ctx.updateUi();\n        }\n        calculateTransfromToolbarPosition() {\n            // FIXED POSITION: Bottom Center for Transform Toolbar\n            // x: Center of screen\n            // y: Bottom of screen with 250px padding\n            return {\n                x: window.innerWidth / 2,\n                y: window.innerHeight - 250,\n                location: \"fixed\"\n            };\n        }\n        cancel() {\n            this.s = undefined;\n            return;\n        }\n    },\n    transforming: function () {\n        if (this.s != undefined) {\n            if (this.s.controls === undefined) {\n                return false\n            } else {\n                if (this.s.controls.axis == null && this.s.controls.dragging == false && this.dragged == false) {\n                    return false\n                } else {\n                    return true\n                }\n            }\n        } else {\n            return false\n        }\n    },\n    onStart: function (tx, ty, cx, cy, ctrlKey) {\n        if (this.transforming() == false) {\n            let previousSelection = [];\n\n            if (this.s != undefined) {\n                if (ctrlKey) {\n                    if (this.s.controls && this.s.controls.object) {\n                        if (this.s.controls.object.type === \"Mesh\") {\n                            previousSelection.push(this.s.controls.object);\n                        } else if (this.s.controls.object.type === \"Group\") {\n                            this.s.controls.object.children.forEach(child => {\n                                let uuid = child.userData.uuid;\n                                if (scene) {\n                                    let original = scene.getObjectByProperty(\"uuid\", uuid);\n                                    if (original) previousSelection.push(original);\n                                }\n                            });\n                        }\n                    }\n                }\n                this.s.deselect();\n            }\n            this.s = new this.selection();\n\n            if (previousSelection.length > 0) {\n                this.s.selected = previousSelection;\n                // Restore highlight\n                previousSelection.forEach(obj => {\n                    this.s.toggleSelectionColor(obj, true);\n                });\n            }\n\n            this.s.start(tx, ty, cx, cy)\n        }\n\n    },\n    onMove: function (cx, cy) {\n        if (this.transforming() == false) {\n            this.s.move(cx, cy)\n        } else {\n            this.dragged = true;\n        }\n    },\n    onEnd: function (tx, ty) {\n        if (this.transforming() == false) {\n            if (this.s) this.s.end(tx, ty);\n        }\n        this.dragged = false;\n    },\n    onCancel: function () {\n        this.s ? this.s.cancel() : null;\n    }\n}\n\nexport { select }","import { render } from \"./Input.vue?vue&type=template&id=1fc15250\"\nimport script from \"./Input.vue?vue&type=script&lang=js\"\nexport * from \"./Input.vue?vue&type=script&lang=js\"\n\nimport \"./Input.vue?vue&type=style&index=0&id=1fc15250&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <draggable-window ref=\"win\" title=\"Tools\" :initialX=\"initialX || (window.innerWidth / 2 - 300)\" :initialY=\"initialY || 12\" :reopenTrigger=\"reopenTrigger\" :is-open=\"isOpen\" @close=\"$emit('close')\">\n    <div class=\"tools-container\">\n      <!-- Drawing Tools -->\n      <div class=\"tool-group\">\n        <button \n          class=\"tool-btn\"\n          :class=\"{ active: tool === 'select' }\"\n          @click=\"setTool('select', true)\"\n          :title=\"'Select'\"\n        >\n          <img src=\"@/assets/icons/Cursor.svg\" alt=\"Select\" />\n          <span class=\"tooltip\">Select</span>\n        </button>\n        <button \n          class=\"tool-btn\"\n          :class=\"{ active: tool === 'draw' }\"\n          @click=\"setTool('draw', true)\"\n          :title=\"'Draw'\"\n        >\n          <img src=\"@/assets/icons/draw.svg\" alt=\"Draw\" />\n          <span class=\"tooltip\">Draw</span>\n        </button>\n        \n        <button \n          class=\"tool-btn\"\n          :class=\"{ active: tool === 'erase' }\"\n          @click=\"setTool('erase', true)\"\n          :title=\"'Erase'\"\n        >\n          <img src=\"@/assets/icons/erase.svg\" alt=\"Erase\" />\n          <span class=\"tooltip\">Erase</span>\n        </button>\n      </div>\n\n      <div class=\"separator\"></div>\n\n      <!-- Brush Presets -->\n      <div class=\"tool-group brushes\">\n        <button \n          v-for=\"brush in brushes\" \n          :key=\"brush.name\"\n          class=\"tool-btn brush-btn\"\n          @click=\"selectPreset(brush)\"\n          :title=\"brush.name\"\n        >\n          <span class=\"brush-emoji\">{{ brush.icon }}</span>\n          <span class=\"tooltip\">{{ brush.name }}</span>\n        </button>\n      </div>\n\n      <div class=\"separator\"></div>\n\n      <!-- Properties Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"toggleProperties\"\n        title=\"Properties\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Properties</span>\n      </button>\n\n      <!-- Scene Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"toggleScene\"\n        title=\"Scene\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Scene</span>\n      </button>\n\n      <!-- 2D Shapes Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"$emit('toggle-2d-shapes')\"\n        title=\"2D Shapes\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">Shapes</span>\n      </button>\n\n      <div class=\"separator\"></div>\n\n      <!-- AR Toggle -->\n      <button \n        class=\"tool-btn\"\n        @click=\"$emit('toggle-ar')\"\n        title=\"AR Mode\"\n        :class=\"{ active: isArActive }\"\n      >\n        <span class=\"properties-icon\"></span>\n        <span class=\"tooltip\">AR Mode</span>\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nexport default {\n  name: \"ToolSelector\",\n  components: { DraggableWindow },\n  data() {\n    return {\n      tool: undefined,\n      window: window,\n      brushes: [\n        { \n          name: \"Pencil\", \n          icon: \"\", \n          settings: { strokeWidth: 2, strokeColor: { r: 50, g: 50, b: 50 }, stroke: true, fill: false }\n        },\n        { \n          name: \"Pen\", \n          icon: \"\", \n          settings: { strokeWidth: 5, strokeColor: { r: 0, g: 0, b: 0 }, stroke: true, fill: false }\n        },\n        { \n          name: \"Marker\", \n          icon: \"\", \n          settings: { strokeWidth: 20, strokeColor: { r: 255, g: 0, b: 0 }, stroke: true, fill: false }\n        },\n        { \n          name: \"Dashed Pencil\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 2, \n            strokeColor: { r: 50, g: 50, b: 50 }, \n            stroke: true, \n            fill: false,\n            dashArray: 0.1,\n            dashRatio: 0.5,\n          }\n        },\n        { \n          name: \"Highlighter\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 30, \n            strokeColor: { r: 255, g: 255, b: 0 }, \n            stroke: true, \n            fill: false,\n            opacity: 0.3,\n            transparent: true,\n            depthTest: false,\n            alphaTest: 0.01,\n          }\n        },\n        { \n          name: \"Ghost Ink\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 4, \n            strokeColor: { r: 200, g: 200, b: 255 }, \n            stroke: true, \n            fill: false,\n            opacity: 0.3,\n            transparent: true,\n            alphaTest: 0.0,\n          }\n        },\n        { \n          name: \"Cinta\", \n          icon: \"\", \n          settings: { \n            strokeWidth: 2, \n            strokeColor: { r: 255, g: 0, b: 100 }, \n            fillColor: { r: 255, g: 100, b: 150 },\n            stroke: true, \n            fill: true,\n          }\n        }\n      ]\n    };\n  },\n  props: {\n    selectedTool: String,\n    reopenTrigger: Number,\n    isOpen: Boolean,\n    initialX: Number,\n    initialY: Number,\n    isArActive: Boolean,\n  },\n  emits: [\"selected-tool\", \"set-preset\", \"toggle-properties\", \"toggle-scene\", \"toggle-2d-shapes\", \"toggle-ar\", \"close\"],\n  watch: {\n    selectedTool: function (val) {\n      this.tool = val;\n    },\n  },\n  methods: {\n    getPosition() {\n       return { \n         x: this.$refs.win.currentX, \n         y: this.$refs.win.currentY \n       };\n    },\n    setTool: function (val, emit) {\n      this.tool = val;\n      if (emit) {\n        this.$emit(\"selected-tool\", val);\n      }\n    },\n    selectPreset: function(brush) {\n      // Ensure we're in draw mode when selecting a brush\n      this.setTool('draw', true);\n      this.$emit(\"set-preset\", brush.settings);\n    },\n    toggleProperties: function() {\n      this.$emit(\"toggle-properties\");\n    },\n    toggleScene: function() {\n      this.$emit(\"toggle-scene\");\n    },\n  },\n  mounted() {\n    this.setTool(this.selectedTool);\n  },\n};\n</script>\n\n<style scoped>\n.tools-container {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.tool-group {\n  display: flex;\n  gap: 4px;\n}\n\n.tool-group.brushes {\n  gap: 4px;\n}\n\n.separator {\n  width: 1px;\n  height: 32px;\n  background-color: rgba(255, 255, 255, 0.1);\n}\n\n.tool-btn {\n  position: relative;\n  width: 40px;\n  height: 40px;\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  border-radius: 8px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all 0.2s;\n  padding: 0;\n}\n\n.tool-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n  border-color: rgba(255, 255, 255, 0.2);\n}\n\n.tool-btn.active {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.3);\n  box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);\n}\n\n.tool-btn img {\n  width: 24px;\n  height: 24px;\n  filter: brightness(0) invert(1);\n}\n\n.brush-emoji {\n  font-size: 20px;\n  line-height: 1;\n}\n\n.properties-icon {\n  font-size: 20px;\n  line-height: 1;\n}\n\n/* Tooltip */\n.tooltip {\n  position: absolute;\n  bottom: -32px;\n  left: 50%;\n  transform: translateX(-50%);\n  background: rgba(0, 0, 0, 0.9);\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  white-space: nowrap;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.2s;\n  z-index: 1000;\n}\n\n.tool-btn:hover .tooltip {\n  opacity: 1;\n}\n\n/* Arrow for tooltip */\n.tooltip::before {\n  content: '';\n  position: absolute;\n  top: -4px;\n  left: 50%;\n  transform: translateX(-50%);\n  width: 0;\n  height: 0;\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-bottom: 4px solid rgba(0, 0, 0, 0.9);\n}\n</style>","import { render } from \"./ToolSelector.vue?vue&type=template&id=c0c8064c&scoped=true\"\nimport script from \"./ToolSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ToolSelector.vue?vue&type=script&lang=js\"\n\nimport \"./ToolSelector.vue?vue&type=style&index=0&id=c0c8064c&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c0c8064c\"]])\n\nexport default __exports__","<template>\n  <draggable-window \n    title=\"View\" \n    :initialX=\"window.innerWidth - 170\"   \n    :initialY=\"12\"\n    :reopenTrigger=\"reopenTrigger\"\n    :is-open=\"isOpen\"\n    @close=\"$emit('close')\"\n  >\n    <div class=\"viewport-controls\">\n      <div\n        @touchstart=\"handleInput\"\n        @touchmove=\"handleInput\"\n        @touchend=\"handleInput\"\n        @mousedown=\"handleInput\"\n        @mousemove=\"handleInput\"\n        @mouseup=\"handleInput\"\n        class=\"viewport-cube\"\n      >\n        <canvas id=\"viewportCanvas\"></canvas>\n      </div>\n      \n      <button \n        class=\"reset-btn\"\n        @click=\"resetCamera()\"\n        @touchstart=\"resetCamera()\"\n        :disabled=\"cameraResetDisabled\"\n      >\n        <img src=\"@/assets/icons/reset.svg\" alt=\"Reset camera\" />\n        <span>Reset Camera</span>\n      </button>\n    </div>\n  </draggable-window>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { cameraControls } from \"../App.vue\";\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nlet viewPortRenderer, viewPortScene, viewPortCamera;\n\nexport default {\n  name: \"ViewportCube\",\n  components: { DraggableWindow },\n  props: {\n    quaternion: Array,\n    cameraResetDisabled: Boolean,\n    reopenTrigger: Number,\n    isOpen: Boolean,\n  },\n  emits: [\"close\"],\n  data() {\n    return {\n      window: window,\n      mouse: {\n        down: false,\n        tx: 0,\n        ty: 0,\n        cx: 0,\n        cy: 0,\n        dragStartPosition: new THREE.Vector2(),\n        lastDragPosition: new THREE.Vector2(),\n        force: 0,\n      },\n    };\n  },\n  methods: {\n    updateMouseCoordinates: function (event) {\n      const canvas = document.getElementById(\"viewportCanvas\");\n      const rect = canvas.getBoundingClientRect();\n      \n      if (event.touches) {\n        const touch = event.changedTouches[0];\n        this.mouse.tx = ((touch.clientX - rect.left) / 150) * 2 - 1;\n        this.mouse.ty = -((touch.clientY - rect.top) / 150) * 2 + 1;\n        this.mouse.cx = touch.clientX - rect.left;\n        this.mouse.cy = touch.clientY - rect.top;\n\n        if (event.touches[0] && event.touches[0][\"force\"] !== undefined) {\n          this.mouse.force = event.touches[0][\"force\"];\n        } else {\n          this.mouse.force = 0;\n        }\n      } else {\n        if (event.button == 0) {\n          this.mouse.tx = ((event.clientX - rect.left) / 150) * 2 - 1;\n          this.mouse.ty = -((event.clientY - rect.top) / 150) * 2 + 1;\n          this.mouse.cx = event.clientX - rect.left;\n          this.mouse.cy = event.clientY - rect.top;\n        }\n      }\n    },\n    render: function () {\n      viewPortRenderer.render(viewPortScene, viewPortCamera);\n    },\n    init: function () {\n      viewPortRenderer = new THREE.WebGLRenderer({\n        antialias: true,\n        alpha: true,\n        canvas: document.getElementById(\"viewportCanvas\"),\n      });\n      viewPortRenderer.setPixelRatio(window.devicePixelRatio);\n      viewPortRenderer.setSize(150, 150);\n\n      viewPortCamera = new THREE.OrthographicCamera();\n      viewPortCamera.position.set(0, 0, 10);\n      viewPortCamera.zoom = 160;\n\n      viewPortScene = new THREE.Scene();\n\n      this.addViewPortCube();\n\n      this.render();\n    },\n    addViewPortCube: function () {\n      let right = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/right.png\")\n      );\n      let left = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/left.png\")\n      );\n      let top = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/top.png\")\n      );\n      let bottom = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/bottom.png\")\n      );\n      let front = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/front.png\")\n      );\n      let back = new THREE.TextureLoader().load(\n        require(\"@/assets/viewport/back.png\"),\n        () => {\n          this.render();\n        }\n      );\n\n      const materials = [\n        new THREE.MeshBasicMaterial({ map: right }),\n        new THREE.MeshBasicMaterial({ map: left }),\n        new THREE.MeshBasicMaterial({ map: top }),\n        new THREE.MeshBasicMaterial({ map: bottom }),\n        new THREE.MeshBasicMaterial({ map: front }),\n        new THREE.MeshBasicMaterial({ map: back }),\n      ];\n\n      const geometry = new THREE.BoxGeometry(1, 1, 1);\n      const cube = new THREE.Mesh(geometry, materials);\n      viewPortScene.add(cube);\n    },\n    rotate: function (deltaX, deltaY) {\n      let w = 150;\n      var PI_2 = Math.PI * 2;\n      var speed = 0.5;\n      var theta = (PI_2 * speed * deltaX) / w;\n      var phi = (PI_2 * speed * deltaY) / w;\n      cameraControls.rotate(theta, phi, false);\n    },\n    evalFaceIndexAndRepositionCamera: function (index) {\n      let target = new THREE.Vector3();\n      target = cameraControls.getTarget(target);\n      let adj = 0.0001;\n\n      let lookAt = function (x, y, z) {\n        cameraControls.dampingFactor = 0.5;\n        cameraControls.enabled = false;\n        cameraControls.setLookAt(x, y, z, target.x, target.y, target.z, true);\n        cameraControls.enabled = true;\n        setTimeout(() => {\n          cameraControls.dampingFactor = 20;\n        }, 100);\n      };\n\n      switch (index) {\n        case 0:\n        case 1:\n          lookAt(target.x + 10, target.y + adj, target.z + adj);\n          break;\n        case 2:\n        case 3:\n          lookAt(target.x - 10, target.y + adj, target.z + adj);\n          break;\n        case 4:\n        case 5:\n          lookAt(target.x, target.y + 10, target.z + adj);\n          break;\n        case 6:\n        case 7:\n          lookAt(target.x, target.y - 10, target.z + adj);\n          break;\n        case 8:\n        case 9:\n          lookAt(target.x + adj, target.y, target.z + 10);\n          break;\n        case 10:\n        case 11:\n          lookAt(target.x + adj, target.y, target.z - 10);\n          break;\n        default:\n      }\n    },\n    onTapStart: function () {\n      this.mouse.down = true;\n      this.mouse.dragStartPosition = new THREE.Vector2(\n        this.mouse.cx,\n        this.mouse.cy\n      );\n      this.mouse.lastDragPosition = new THREE.Vector2(\n        this.mouse.cx,\n        this.mouse.cy\n      );\n      document.addEventListener(\"mousemove\", this.handleInput);\n      document.addEventListener(\"mouseup\", this.handleInput);\n      document.addEventListener(\"touchmove\", this.handleInput);\n      document.addEventListener(\"touchend\", this.handleInput);\n    },\n    onTapMove: function () {\n      if (this.mouse.down) {\n        this.rotate(\n          this.mouse.lastDragPosition.x - this.mouse.cx,\n          this.mouse.lastDragPosition.y - this.mouse.cy\n        );\n        this.mouse.lastDragPosition = new THREE.Vector2(\n          this.mouse.cx,\n          this.mouse.cy\n        );\n      }\n    },\n    onTapEnd: function (raycaster) {\n      if (\n        this.mouse.dragStartPosition.distanceTo(this.mouse.lastDragPosition) < 5\n      ) {\n        raycaster.setFromCamera(\n          new THREE.Vector2(this.mouse.tx, this.mouse.ty),\n          viewPortCamera\n        );\n\n        try {\n          this.evalFaceIndexAndRepositionCamera(\n            raycaster.intersectObjects(viewPortScene.children)[0].faceIndex\n          );\n        } catch (error) {\n          //raycaster didn't find anything\n        }\n      }\n      this.mouse.dragStartPosition = new THREE.Vector2();\n      this.mouse.lastDragPosition = new THREE.Vector2();\n      this.mouse.cx = 0;\n      this.mouse.cy = 0;\n      document.removeEventListener(\"mousemove\", this.handleInput);\n      document.removeEventListener(\"mouseup\", this.handleInput);\n      document.removeEventListener(\"touchmove\", this.handleInput);\n      document.removeEventListener(\"touchend\", this.handleInput);\n      this.mouse.down = false;\n    },\n    resetCamera: function () {\n      cameraControls.dampingFactor = 0.5;\n      cameraControls.enabled = false;\n      cameraControls.setLookAt(0, 0, 10, 0, 0, 0, true);\n      cameraControls.zoomTo(3, true);\n      setTimeout(() => {\n        cameraControls.dampingFactor = 20;\n        cameraControls.enabled = true;\n      }, 100);\n    },\n    handleInput: function (event) {\n      this.updateMouseCoordinates(event);\n      event.preventDefault();\n      let raycaster = new THREE.Raycaster();\n\n      switch (event.type) {\n        case \"mousedown\":\n        case \"touchstart\":\n          this.onTapStart();\n          break;\n        case \"mousemove\":\n        case \"touchmove\":\n          this.onTapMove();\n          break;\n        case \"touchend\":\n        case \"mouseup\":\n          this.onTapEnd(raycaster);\n          break;\n        default:\n      }\n    },\n  },\n  watch: {\n    quaternion: function (val) {\n      viewPortScene.setRotationFromQuaternion(\n        new THREE.Quaternion(val[0], val[1], val[2], val[3]).invert()\n      );\n      this.render();\n    },\n  },\n  mounted() {\n    this.init();\n    this.render();\n  },\n};\n</script>\n\n<style scoped>\n.viewport-controls {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n  align-items: center;\n}\n\n.viewport-cube {\n  width: 150px;\n  height: 150px;\n  position: relative;\n  cursor: grab;\n}\n\n.viewport-cube:active {\n  cursor: grabbing;\n}\n\n#viewportCanvas {\n  width: 150px;\n  height: 150px;\n  background-color: rgba(0, 0, 0, 0);\n  border-radius: 8px;\n}\n\n.reset-btn {\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  color: white;\n  border-radius: 8px;\n  padding: 8px 12px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  transition: all 0.2s;\n  font-size: 0.9em;\n  width: 100%;\n  justify-content: center;\n}\n\n.reset-btn:hover:not(:disabled) {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.reset-btn:disabled {\n  opacity: 0.3;\n  cursor: not-allowed;\n}\n\n.reset-btn img {\n  width: 16px;\n  height: 16px;\n}\n</style>","import { render } from \"./ViewportCube.vue?vue&type=template&id=c6f5d5b0&scoped=true\"\nimport script from \"./ViewportCube.vue?vue&type=script&lang=js\"\nexport * from \"./ViewportCube.vue?vue&type=script&lang=js\"\n\nimport \"./ViewportCube.vue?vue&type=style&index=0&id=c6f5d5b0&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-c6f5d5b0\"]])\n\nexport default __exports__","<template>\n  <draggable-window \n    title=\"Properties\" \n    :initialX=\"12\" \n    :initialY=\"300\"\n    :visible=\"forceVisible || selectedTool == 'draw'\"\n    :reopenTrigger=\"reopenTrigger\"\n    :is-open=\"isOpen\"\n    @close=\"$emit('close')\"\n  >\n      <div class=\"panel\">\n        <line-sliders\n          mode=\"stroke\"\n          :active=\"stroke\"\n          @color=\"setStrokeColor\"\n          @active=\"setStrokeActive\"\n          @width=\"setStrokeWidth\"\n        />\n        \n        <div v-if=\"stroke\" class=\"extra-settings\">\n          <div class=\"section-title\">Brush Settings</div>\n          <!-- Shape -->\n          <div class=\"setting-row\">\n            <span>Shape</span>\n            <div class=\"ratio-buttons\">\n              <button class=\"ratio-btn\" :class=\"{ active: brushType === 'solid' }\" @click=\"brushType = 'solid'\">Solid</button>\n              <button class=\"ratio-btn\" :class=\"{ active: brushType === 'soft' }\" @click=\"brushType = 'soft'\">Soft</button>\n              <button class=\"ratio-btn\" :class=\"{ active: brushType === 'noise' }\" @click=\"brushType = 'noise'\">Sketch</button>\n            </div>\n          </div>\n\n\n\n          <!-- Taper -->\n           <div class=\"setting-row\">\n            <span>Taper</span>\n            <input type=\"range\" min=\"0\" max=\"20\" step=\"1\" v-model.number=\"taper\" />\n            <span class=\"value\">{{ taper }}</span>\n          </div>\n\n          <!-- Smoothing -->\n           <div class=\"setting-row\">\n            <span>Smooth</span>\n            <input type=\"range\" min=\"1\" max=\"20\" step=\"1\" v-model.number=\"smoothing\" />\n            <span class=\"value\">{{ smoothing }}</span>\n          </div>\n\n          <!-- Texture Scale -->\n          <div class=\"setting-row\" v-if=\"brushType !== 'solid' || brushMaterial !== 'standard'\">\n            <span>Tex Scale</span>\n            <input type=\"range\" min=\"0.1\" max=\"5\" step=\"0.1\" v-model.number=\"textureScale\" />\n            <span class=\"value\">{{ textureScale }}</span>\n          </div>\n\n          <!-- Wiggle -->\n           <div class=\"setting-row\">\n            <span>Wiggle</span>\n            <input type=\"range\" min=\"0\" max=\"0.5\" step=\"0.01\" v-model.number=\"wiggle\" />\n            <span class=\"value\">{{ Math.round(wiggle * 100) }}</span>\n          </div>\n\n          <div class=\"section-title\" style=\"margin-top: 8px;\">Line Settings</div>\n\n          <!-- Opacity -->\n          <div class=\"setting-row\">\n            <span>Opacity</span>\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"opacity\" />\n            <span class=\"value\">{{ Math.round(opacity * 100) }}%</span>\n          </div>\n\n          <!-- Dash Size -->\n          <div class=\"setting-row\">\n            <span>Dash Size</span>\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"dashArray\" />\n          </div>\n\n          <!-- Dash Ratio -->\n          <div class=\"setting-row\">\n             <span>Dash Scale</span>\n             <div class=\"ratio-buttons\">\n                <button class=\"ratio-btn\" :class=\"{ active: Math.abs(dashRatio - 0.66) < 0.1 }\" @click=\"dashRatio = 0.66\">2:1</button>\n                <button class=\"ratio-btn\" :class=\"{ active: Math.abs(dashRatio - 0.5) < 0.1 }\" @click=\"dashRatio = 0.5\">1:1</button>\n                <button class=\"ratio-btn\" :class=\"{ active: Math.abs(dashRatio - 0.33) < 0.1 }\" @click=\"dashRatio = 0.33\">1:2</button>\n             </div>\n          </div>\n\n          <div class=\"section-title\" style=\"margin-top: 8px;\">Animation</div>\n\n          <!-- Animation Speed -->\n          <div class=\"setting-row\">\n            <span>Speed</span>\n            <input type=\"range\" min=\"0\" max=\"2\" step=\"0.01\" v-model.number=\"animationSpeed\" />\n            <span class=\"value\">{{ Math.round(animationSpeed * 100) }}</span>\n          </div>\n        </div>\n\n        <line-sliders\n          :active=\"fill\"\n          mode=\"fill\"\n          @color=\"setFillColor\"\n          @active=\"setFillActive\"\n        />\n\n        <div v-if=\"fill\" class=\"extra-settings\">\n          <div class=\"setting-row\">\n            <span>Opacity</span>\n            <input type=\"range\" min=\"0\" max=\"1\" step=\"0.01\" v-model.number=\"fillOpacity\" />\n            <span class=\"value\">{{ Math.round(fillOpacity * 100) }}%</span>\n          </div>\n        </div>\n      </div>\n  </draggable-window>\n</template>\n\n<script>\nimport LineSliders from \"./LineSliders.vue\";\n// import LineWidthSelector from \"./LineWidthSelector.vue\";\n\nimport DraggableWindow from \"./DraggableWindow.vue\";\n\nexport default {\n  components: { LineSliders, DraggableWindow },\n  name: \"Modal\",\n  data() {\n    return {\n      window: window,\n      stroke: true,\n      strokeColor: \"#1C1C1E\",\n      strokeWidth: 5,\n      fill: false,\n      fillColor: \"#000000\",\n      // panelVisible: false, // Removed\n      dashArray: 0,\n      dashOffset: 0,\n      dashRatio: 0.5,\n      opacity: 1,\n      fillOpacity: 1,\n      transparent: false,\n      alphaTest: 0.5,\n      brushType: 'solid',\n      brushMaterial: 'standard',\n      taper: 3,\n      smoothing: 4,\n      textureScale: 1,\n      wiggle: 0,\n      animationSpeed: 0,\n    };\n  },\n  props: {\n    selectedTool: String,\n    forceVisible: Boolean,\n    reopenTrigger: Number,\n    isOpen: Boolean,\n  },\n  emits: [\"stroke\", \"fill\", \"close\"],   \n  methods: {\n    setStrokeColor: function (val) {\n      this.strokeColor = \"rgb(\" + val.r + \",\" + val.g + \",\" + val.b + \")\";\n    },\n    setStrokeActive: function (val) {\n      this.stroke = val.active;\n    },\n    setStrokeWidth: function (val) {\n      this.strokeWidth = val.width;\n    },\n    setFillColor: function (val) {\n      this.fillColor = \"rgb(\" + val.r + \",\" + val.g + \",\" + val.b + \")\";\n    },\n    setFillActive: function (val) {\n      this.fill = val.active;\n    },\n    emitStroke: function () {\n      this.$emit(\"stroke\", {\n        show_stroke: this.stroke,\n        lineWidth: this.strokeWidth / 500,\n        color: this.strokeColor,\n        dashArray: this.dashArray,\n        dashOffset: this.dashOffset,\n        dashRatio: this.dashRatio,\n        opacity: this.opacity,\n        transparent: this.transparent,\n        alphaTest: this.alphaTest,\n        brushType: this.brushType,\n        brushMaterial: this.brushMaterial,\n        taper: this.taper,\n        smoothing: this.smoothing,\n        textureScale: this.textureScale,\n        wiggle: this.wiggle,\n        animationSpeed: this.animationSpeed,\n      });\n    },\n    emitFill: function () {\n      this.$emit(\"fill\", { show_fill: this.fill, color: this.fillColor, opacity: this.fillOpacity });\n    },\n    updateSettings: function (settings) {\n      if (settings.stroke !== undefined) this.stroke = settings.stroke;\n      if (settings.strokeColor !== undefined) {\n         this.strokeColor = \"rgb(\" + settings.strokeColor.r + \",\" + settings.strokeColor.g + \",\" + settings.strokeColor.b + \")\";\n      }\n      if (settings.strokeWidth !== undefined) this.strokeWidth = settings.strokeWidth;\n      \n      this.dashArray = settings.dashArray !== undefined ? settings.dashArray : 0;\n      this.dashOffset = settings.dashOffset !== undefined ? settings.dashOffset : 0;\n      this.dashRatio = settings.dashRatio !== undefined ? settings.dashRatio : 0.5;\n      this.opacity = settings.opacity !== undefined ? settings.opacity : 1;\n      this.transparent = settings.transparent !== undefined ? settings.transparent : false;\n      this.alphaTest = settings.alphaTest !== undefined ? settings.alphaTest : 0.5;\n\n      if (settings.brushType !== undefined) this.brushType = settings.brushType;\n      if (settings.brushMaterial !== undefined) this.brushMaterial = settings.brushMaterial;\n      if (settings.taper !== undefined) this.taper = settings.taper;\n      if (settings.smoothing !== undefined) this.smoothing = settings.smoothing;\n      if (settings.textureScale !== undefined) this.textureScale = settings.textureScale;\n      if (settings.wiggle !== undefined) this.wiggle = settings.wiggle;\n      if (settings.animationSpeed !== undefined) this.animationSpeed = settings.animationSpeed;\n\n      if (settings.fill !== undefined) this.fill = settings.fill;\n      if (settings.fillColor !== undefined) {\n         this.fillColor = \"rgb(\" + settings.fillColor.r + \",\" + settings.fillColor.g + \",\" + settings.fillColor.b + \")\";\n      }\n      if (settings.fillOpacity !== undefined) this.fillOpacity = settings.fillOpacity;\n    },\n  },\n  watch: {\n    stroke: function () {\n      this.emitStroke();\n    },\n    strokeWidth: function () {\n      this.emitStroke();\n    },\n    strokeColor: function () {\n      this.emitStroke();\n    },\n    fill: function () {\n      this.emitFill();\n    },\n    fillColor: function () {\n      this.emitFill();\n    },\n    fillOpacity: function() {\n      this.emitFill();\n    },\n    dashArray: function () {\n      this.emitStroke();\n    },\n    dashRatio: function () {\n      this.emitStroke();\n    },\n    opacity: function () {\n      this.emitStroke();\n    },\n    brushType: function() {\n      this.emitStroke();\n    },\n    taper: function() {\n      this.emitStroke();\n    },\n    smoothing: function() {\n      this.emitStroke();\n    },\n    textureScale: function() {\n      this.emitStroke();\n    },\n    wiggle: function() {\n      this.emitStroke();\n    },\n    animationSpeed: function() {\n      this.emitStroke();\n    },\n  },\n  mounted() {\n    this.emitStroke();\n    this.emitFill();\n  },\n};\n</script>\n\n<style>\n.panel {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  /* background-color: white; Remove bg since window has glass */\n  /* filter: drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.08)); */\n  width: fit-content;\n  /* padding: 8px; */\n  /* border-radius: 8px; */\n}\n\n.extra-settings {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  padding: 0 8px 0 44px; /* Align with sliders roughly */\n}\n\n.setting-row {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  color: white;\n  font-size: 12px;\n  font-family: 'Inter', sans-serif;\n}\n\n.setting-row > span:first-child {\n  width: 70px;\n  opacity: 0.8;\n}\n\n.setting-row input[type=\"range\"] {\n  height: 4px;\n  -webkit-appearance: none;\n  appearance: none;\n  background: rgba(255, 255, 255, 0.2);\n  border-radius: 2px;\n  flex: 1;\n  outline: none;\n}\n\n.setting-row input[type=\"range\"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  width: 16px;\n  height: 16px;\n  border-radius: 50%;\n  background: white;\n  cursor: pointer;\n  border: 2px solid rgba(0,0,0,0.5);\n}\n\n.setting-row .value {\n  width: 32px;\n  text-align: right;\n  font-family: monospace;\n}\n\n.ratio-buttons {\n  display: flex;\n  gap: 4px;\n}\n\n.ratio-btn {\n  background: transparent;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  color: white;\n  border-radius: 4px;\n  padding: 4px 8px;\n  cursor: pointer;\n  font-size: 10px;\n  transition: all 0.2s;\n}\n\n.ratio-btn:hover {\n  background: rgba(255, 255, 255, 0.1);\n}\n\n.ratio-btn.active {\n  background: rgba(255, 255, 255, 0.2);\n  border-color: rgba(255, 255, 255, 0.6);\n  font-weight: bold;\n}\n\n.section-title {\n  color: white;\n  font-size: 10px;\n  font-weight: bold;\n  opacity: 0.5;\n  text-transform: uppercase;\n  margin-bottom: 4px;\n}\n</style>","\n<template>\n  <div class=\"color\" :style=\"cssProps\">\n    <div class=\"toggle\" @click=\"setActive\">\n      <img src=\"@/assets/icons/checkbox.svg\" v-if=\"!active\" alt=\"Enable\" />\n      <img\n        src=\"@/assets/icons/checkbox-checked.svg\"\n        v-if=\"active\"\n        alt=\"Disable\"\n      /><span>{{\n        this.mode.charAt(0).toUpperCase() + this.mode.substr(1).toLowerCase()\n      }}</span>\n    </div>\n    <div class=\"sliders\" v-if=\"active\">\n      <span class=\"width-slider\" v-if=\"mode === 'stroke'\"\n        ><span>w</span\n        ><input type=\"range\" min=\"1\" max=\"20\" id=\"width-slider\" v-model=\"width\"\n      /></span>\n      <span class=\"hsb-slider\"\n        ><span>h</span\n        ><input type=\"range\" min=\"0\" max=\"359\" id=\"hue-slider\" v-model=\"hue\"\n      /></span>\n      <span class=\"hsb-slider\"\n        ><span>s</span\n        ><input\n          type=\"range\"\n          min=\"0\"\n          max=\"99\"\n          class=\"hsb-slider\"\n          id=\"saturation-slider\"\n          v-model=\"saturation\"\n          :style=\"{\n            background: `linear-gradient(\n    to right,\n    hsl(${hue}, 0%, 50%) 0%,\n    hsl(${hue}, 50%, 50%) 90%\n  )`,\n          }\"\n      /></span>\n      <span class=\"hsb-slider\"\n        ><span>b</span\n        ><input\n          type=\"range\"\n          min=\"0\"\n          max=\"99\"\n          class=\"hsb-slider\"\n          id=\"brightness-slider\"\n          v-model=\"brightness\"\n      /></span>\n    </div>\n  </div>\n</template>\n\n<script>\n//https://codepen.io/HunorMarton/details/eWvewo\n\nexport default {\n  name: \"ColorSelector\",\n  data() {\n    return {\n      hue: 0,\n      saturation: 0,\n      brightness: 25,\n      width: 5,\n      r: 0,\n      g: 0,\n      b: 0,\n    };\n  },\n  props: { mode: String, active: Boolean },\n  emits: [\"color\", \"active\", \"width\"],\n  computed: {\n    cssProps() {\n      return {\n        \"--width-margin\": this.map(this.width, 1, 20, -6, +6) + \"px\",\n        \"--width-radius\": this.calcRadius(this.width * 4, 1, 80), //workaround because range is othewise so low\n        \"--hue-margin\": this.map(this.hue, 0, 359, -6, +6) + \"px\",\n        \"--hue-radius\": this.calcRadius(this.hue, 0, 359),\n        \"--saturation-margin\": this.map(this.saturation, 0, 99, -6, +6) + \"px\",\n        \"--saturation-radius\": this.calcRadius(this.saturation, 0, 99),\n        \"--brightness-margin\": this.map(this.brightness, 0, 99, -6, +6) + \"px\",\n        \"--brightness-radius\": this.calcRadius(this.brightness, 0, 99),\n      };\n    },\n  },\n  methods: {\n    map: function (n, start1, stop1, start2, stop2) {\n      return ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2;\n    },\n    calcRadius: function (val, min, max) {\n      if (val < min + 4) {\n        return \"0px 4px 4px 0px\";\n      } else if (val > max - 4) {\n        return \"4px 0px 0px 4px\";\n      } else {\n        return \"4px\";\n      }\n    },\n    updateColor: function (h, s, v) {\n      var r, g, b, i, f, p, q, t;\n      if (arguments.length === 1) {\n        (s = h.s), (v = h.v), (h = h.h);\n      }\n      i = Math.floor(h * 6);\n      f = h * 6 - i;\n      p = v * (1 - s);\n      q = v * (1 - f * s);\n      t = v * (1 - (1 - f) * s);\n      switch (i % 6) {\n        case 0:\n          (r = v), (g = t), (b = p);\n          break;\n        case 1:\n          (r = q), (g = v), (b = p);\n          break;\n        case 2:\n          (r = p), (g = v), (b = t);\n          break;\n        case 3:\n          (r = p), (g = q), (b = v);\n          break;\n        case 4:\n          (r = t), (g = p), (b = v);\n          break;\n        case 5:\n          (r = v), (g = p), (b = q);\n          break;\n      }\n\n      (this.r = Math.round(r * 255)),\n        (this.g = Math.round(g * 255)),\n        (this.b = Math.round(b * 255));\n\n      this.$emit(\"color\", { r: this.r, g: this.g, b: this.b });\n    },\n    setActive() {\n      this.$emit(\"active\", { active: !this.active });\n    },\n  },\n  watch: {\n    width: function (val) {\n      this.$emit(\"width\", { width: val });\n    },\n    hue: function () {\n      this.updateColor(\n        this.hue / 359,\n        this.saturation / 99,\n        this.brightness / 99\n      );\n    },\n    saturation: function () {\n      this.updateColor(\n        this.hue / 359,\n        this.saturation / 99,\n        this.brightness / 99\n      );\n    },\n    brightness: function () {\n      this.updateColor(\n        this.hue / 359,\n        this.saturation / 99,\n        this.brightness / 99\n      );\n    },\n  },\n  mounted() {\n    this.updateColor(\n      this.hue / 359,\n      this.saturation / 99,\n      this.brightness / 99\n    );\n  },\n};\n</script>\n\n<style scoped>\n.toggle {\n  height: 32px;\n  float: left;\n  display: flex;\n  flex-direction: row;\n  gap: 8px;\n}\n\n.color-bubble {\n  border-radius: 22px;\n  height: 36px;\n  width: 36px;\n  border: 1px solid #1c1c1e;\n}\n\n.sliders {\n  float: left;\n  display: flex;\n  gap: 8px;\n  flex-direction: column;\n}\n\ninput {\n  width: 200px;\n}\n\n.width-slider > input[type=\"range\"] {\n  border: 1px solid #1c1c1e;\n  border-radius: 4px;\n}\n\n.hsb-slider,\n.width-slider {\n  display: flex;\n  align-content: center;\n  align-items: center;\n  gap: 12px;\n}\n\n.hsb-slider span,\n.width-slider span {\n  width: 20px;\n  text-align: center;\n}\n\ninput[type=\"range\"] {\n  -webkit-appearance: none; /* Override default CSS styles */\n  appearance: none;\n  height: 8px;\n}\n\ninput[type=\"range\"]::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  background-color: rgba(255, 255, 255, 0);\n  border: 6px solid #1c1c1e;\n  border-radius: 3px;\n  width: 20px;\n  height: 20px;\n  margin-top: 0px;\n  overflow: visible;\n  position: relative;\n}\n\n#width-slider {\n  border-radius: var(--width-radius);\n}\n\n#width-slider::-webkit-slider-thumb {\n  left: var(--width-margin);\n}\n\n#hue-slider {\n  border-radius: var(--hue-radius);\n}\n\n#hue-slider::-webkit-slider-thumb {\n  left: var(--hue-margin);\n}\n\n#saturation-slider {\n  border-radius: var(--saturation-radius);\n}\n\n#saturation-slider::-webkit-slider-thumb {\n  left: var(--saturation-margin);\n}\n\n#brightness-slider {\n  border-radius: var(--brightness-radius);\n}\n\n#brightness-slider::-webkit-slider-thumb {\n  left: var(--brightness-margin);\n}\n\n#hue-slider {\n  background: linear-gradient(\n    to right,\n    hsl(0, 100%, 50%) 0%,\n    hsl(60, 100%, 50%) 16.67%,\n    hsl(120, 100%, 50%) 33.33%,\n    hsl(180, 100%, 50%) 50%,\n    hsl(240, 100%, 50%) 66.67%,\n    hsl(320, 100%, 50%) 83.33%,\n    hsl(360, 100%, 50%) 100%\n  );\n}\n\n#brightness-slider {\n  background: linear-gradient(\n    to right,\n    hsl(0, 0%, 0%) 0%,\n    hsl(0, 0%, 100%) 100%\n  );\n}\n\nlabel {\n  display: flex;\n  font-size: 0.45em;\n}\n</style>","import { render } from \"./LineSliders.vue?vue&type=template&id=209b775a&scoped=true\"\nimport script from \"./LineSliders.vue?vue&type=script&lang=js\"\nexport * from \"./LineSliders.vue?vue&type=script&lang=js\"\n\nimport \"./LineSliders.vue?vue&type=style&index=0&id=209b775a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-209b775a\"]])\n\nexport default __exports__","import { render } from \"./LineSettings.vue?vue&type=template&id=08400330\"\nimport script from \"./LineSettings.vue?vue&type=script&lang=js\"\nexport * from \"./LineSettings.vue?vue&type=script&lang=js\"\n\nimport \"./LineSettings.vue?vue&type=style&index=0&id=08400330&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <div>\n    <div class=\"popup\" v-if=\"show\">\n      <ToggleWindow label=\"Tools\" @click=\"toggleWindow('tools')\" :checked=\"windowStates && windowStates.tools\" />\n      <ToggleWindow label=\"Properties\" @click=\"toggleWindow('properties')\" :checked=\"windowStates && windowStates.properties\" />\n      <ToggleWindow label=\"Canvas\" @click=\"toggleWindow('canvas')\" :checked=\"windowStates && windowStates.canvas\" />\n      <ToggleWindow label=\"Shapes\" @click=\"toggleWindow('shapes')\" :checked=\"windowStates && windowStates.shapes\" />\n      <ToggleWindow label=\"Object Manager\" @click=\"toggleWindow('objectManager')\" :checked=\"windowStates && windowStates.objectManager\" />\n      <ToggleWindow label=\"History\" @click=\"toggleWindow('history')\" :checked=\"windowStates && windowStates.history\" />\n      <ToggleWindow label=\"View\" @click=\"toggleWindow('view')\" :checked=\"windowStates && windowStates.view\" />\n      <ToggleWindow label=\"Colors\" @click=\"toggleWindow('colors')\" :checked=\"windowStates && windowStates.colors\" />\n      <ToggleWindow label=\"Scene\" @click=\"toggleWindow('scene')\" :checked=\"windowStates && windowStates.scene\" />\n      <ToggleWindow label=\"Symmetry\" @click=\"toggleWindow('symmetry')\" :checked=\"windowStates && windowStates.symmetry\" />\n      <ToggleWindow label=\"Layers\" @click=\"toggleWindow('layers')\" :checked=\"windowStates && windowStates.layers\" />\n      <div class=\"separator\"></div>\n      <Save />\n      <Load ref=\"load\" />\n      <div class=\"separator\"></div>\n      <export-for-blender @modal=\"showModal\" />\n      <export-for-procreate @modal=\"showModal\" />\n      <ExportUSDZ v-if=\"isSafari\" />\n      <ExportGLB />\n      <ExportHTML @modal=\"showModal\" />\n      <start-preview @preview=\"startPreview\" />\n    </div>\n    <button\n      class=\"toggle-menu\"\n      @click=\"show = !show\"\n      v-bind:style=\"[show === true ? 'z-index: 10' : '']\"\n    >\n      <img src=\"@/assets/icons/share.svg\" alt=\"Share your sketch\" />\n    </button>\n    <div class=\"fade\" v-if=\"show\" @click=\"show = false\"></div>\n  </div>\n</template>\n\n<script>\nimport ToggleWindow from \"./MenuButtons/ToggleWindow.vue\";\nimport Save from \"./MenuButtons/Save.vue\";\nimport Load from \"./MenuButtons/Load.vue\";\nimport ExportForBlender from \"./MenuButtons/ExportForBlender.vue\";\nimport ExportForProcreate from \"./MenuButtons/ExportForProcreate.vue\";\nimport StartPreview from \"./MenuButtons/StartPreview.vue\";\nimport ExportUSDZ from \"./MenuButtons/ExportUSDZ.vue\";\nimport ExportGLB from \"./MenuButtons/ExportGLB.vue\";\nimport ExportHTML from \"./MenuButtons/ExportHTML.vue\";\n\nexport default {\n  name: \"Share\",\n  props: {\n    windowStates: Object,\n  },\n  components: {\n    ToggleWindow,\n    Save,\n    Load,\n    ExportForBlender,\n    ExportForProcreate,\n    StartPreview,\n    ExportUSDZ,\n    ExportGLB,\n    ExportHTML,\n  },\n  emits: [\"modal-set\", \"preview\", \"toggle-window\"],\n  data() {\n    return {\n      show: false,\n      isSafari: false,\n    };\n  },\n  methods: {\n    hide: function () {\n      this.show = false;\n    },\n    showModal: function (val) {\n      this.$emit(\"modal-set\", val);\n      this.hide();\n    },\n    startPreview: function (val) {\n      this.$emit(\"preview\", val);\n      this.hide();\n    },\n    toggleWindow: function (windowName) {\n      this.$emit(\"toggle-window\", windowName);\n    },\n  },\n  watch: {},\n  mounted() {\n    this.isSafari =\n      navigator.vendor &&\n      navigator.vendor.indexOf(\"Apple\") > -1 &&\n      navigator.userAgent &&\n      navigator.userAgent.indexOf(\"CriOS\") == -1 &&\n      navigator.userAgent.indexOf(\"FxiOS\") == -1;\n  },\n};\n</script>\n\n<style scoped>\n.fade {\n  position: absolute;\n  z-index: 9;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.2);\n}\n\n.toggle-menu {\n  position: absolute;\n  z-index: 5;\n  bottom: 12px;\n  right: 62px;\n  width: 44px;\n  height: 44px;\n  background-color: white;\n  filter: drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.08));\n  border-radius: 22px;\n  padding: 0;\n}\n\ndiv {\n  position: absolute;\n  z-index: 10;\n  bottom: 64px;\n  right: 68px;\n  background-color: white;\n  filter: drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.08));\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n}\n\nbutton {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  padding-left: 12px;\n  padding-right: 12px;\n  border-bottom: 1px solid #ffe8b3;\n  font-size: 0.8em;\n}\n\nbutton:last-child,\n.toggle-menu {\n  border-bottom: none;\n}\n\n.separator {\n  height: 1px;\n  background-color: rgba(0, 0, 0, 0.1);\n  margin: 4px 0;\n}\n</style>","<template>\r\n  <button @click=\"$emit('click')\">\r\n    <span class=\"label\">{{ label }}</span>\r\n    <span class=\"check\" v-if=\"checked\"></span>\r\n  </button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ToggleWindow\",\r\n  props: {\r\n    label: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    checked: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n  },\r\n  emits: [\"click\"],\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton {\r\n  font-family: Avenir, Helvetica, Arial, sans-serif;\r\n  align-content: center;\r\n  background-color: rgba(0, 0, 0, 0);\r\n  border: none;\r\n  height: 44px;\r\n  padding-left: 12px;\r\n  padding-right: 12px;\r\n  border-bottom: 1px solid #ffe8b3;\r\n  font-size: 0.8em;\r\n  text-align: left;\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: rgba(255, 232, 179, 0.1);\r\n}\r\n\r\n.check {\r\n    font-weight: bold;\r\n    color: #ffb000;\r\n}\r\n</style>\r\n","import { render } from \"./ToggleWindow.vue?vue&type=template&id=50198f32&scoped=true\"\nimport script from \"./ToggleWindow.vue?vue&type=script&lang=js\"\nexport * from \"./ToggleWindow.vue?vue&type=script&lang=js\"\n\nimport \"./ToggleWindow.vue?vue&type=style&index=0&id=50198f32&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-50198f32\"]])\n\nexport default __exports__","<template>\n  <button @click=\"exportToJson\">Save</button>\n</template>\n\n<script>\nimport * as THREE from \"three\";\n// import { draw } from \"./draw.js\";\nimport { scene } from \"../../App.vue\";\n\nexport default {\n  name: \"Import\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    exportToJson: function () {\n      const json = [];\n      scene.children.forEach((obj) => {\n        //check if it's a line, if it's in the right layer and that we don't already have its original\n        if (\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2\n        ) {\n          let line = {};\n\n          console.log(obj.geometry);\n\n          line.vertices = Array.from(obj.geometry.points);\n          line.stroke = obj.userData.stroke;\n          line.fill = obj.userData.fill;\n          line.mirrorOn = false;\n          line.position = new THREE.Vector3();\n          obj.getWorldPosition(line.position);\n          line.quaternion = new THREE.Quaternion();\n          obj.getWorldQuaternion(line.quaternion);\n          line.scale = new THREE.Vector3();\n          obj.getWorldScale(line.scale);\n          line.matrix = obj.matrix;\n          json.push(line);\n        }\n      });\n      console.log(json);\n\n      var dataStr =\n        \"data:text/json;charset=utf-8,\" +\n        encodeURIComponent(JSON.stringify(json));\n\n      var filename = prompt(\"Enter a name for your file\", \"sketch\");\n\n      if (filename != null) {\n        var el = document.createElement(\"a\");\n        el.setAttribute(\"href\", dataStr);\n        el.setAttribute(\"download\", filename + \".json\");\n        el.click();\n      }\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./Save.vue?vue&type=template&id=0d7c2da8\"\nimport script from \"./Save.vue?vue&type=script&lang=js\"\nexport * from \"./Save.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"importFromJson\">{{ text }}</button>\n</template>\n\n<script>\nimport { draw } from \"../draw.js\";\nimport { scene, renderer, camera } from \"../../App.vue\";\n\nexport default {\n  name: \"Import\",\n  props: {},\n  data() {\n    return {\n      text: \"Load\",\n    };\n  },\n  methods: {\n    importFromJson: function () {\n      var file;\n      var input = document.createElement(\"input\");\n      input.style.display = \"none\";\n      input.type = \"file\";\n      document.body.appendChild(input);\n      input.onchange = (event) => {\n        file = event.target.files[0];\n        function onReaderLoad(event) {\n          var json = JSON.parse(event.target.result);\n          let i = 0;\n          function drawLine(l) {\n            draw.fromVertices(\n              new Float32Array(l.vertices),\n              l.stroke,\n              l.fill,\n              l.mirrorOn,\n              null, //uuid, not necessary to restore in import\n              l.position,\n              l.quaternion,\n              l.scale,\n              l.matrix\n            );\n            if (i < json.length - 1) {\n              i++;\n              drawLine(json[i]);\n            } else {\n              renderer.render(scene, camera);\n            }\n          }\n          drawLine(json[i]);\n        }\n        if (file.type == \"application/json\") {\n          var reader = new FileReader();\n          reader.onload = onReaderLoad;\n          reader.readAsText(file);\n        } else {\n          //   app.toast.show = true;\n          //   app.toast.text = \"Error. File type not correct\";\n          //   setTimeout(function () {\n          //     app.toast.show = false;\n          //   }, 2000);\n        }\n      };\n      input.click();\n    },\n    // updateText: function (index, length) {\n    //   this.text = \"Loading \" + index + \"/\" + length;\n    // },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./Load.vue?vue&type=template&id=301cc407\"\nimport script from \"./Load.vue?vue&type=script&lang=js\"\nexport * from \"./Load.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"showExportModal\">Export for Blender</button>\n</template>\n\n<script>\nexport default {\n  name: \"Export\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    showExportModal: function () {\n      this.$emit(\"modal\", { display: true, mode: \"blender\" });\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./ExportForBlender.vue?vue&type=template&id=359f140a\"\nimport script from \"./ExportForBlender.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForBlender.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"showExportModal\">Export for Procreate</button>\n</template>\n\n<script>\nexport default {\n  name: \"Export\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    showExportModal: function () {\n      this.$emit(\"modal\", { display: true, mode: \"procreate\" });\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./ExportForProcreate.vue?vue&type=template&id=a5e737f4\"\nimport script from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button @click=\"startPreview\">Make video</button>\n</template>\n\n<script>\nexport default {\n  name: \"StartPreview\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    startPreview: function () {\n      this.$emit(\"preview\", true);\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\n</style>","import { render } from \"./StartPreview.vue?vue&type=template&id=b3643c28\"\nimport script from \"./StartPreview.vue?vue&type=script&lang=js\"\nexport * from \"./StartPreview.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\n  <button\n    v-bind:class=\"[mode === 'default' || mode === 'exporting' ? '' : 'hidden']\"\n    @click=\"mode === 'default' ? exportForAr() : ''\"\n  >\n    {{ mode === \"default\" ? \"Export for AR\" : \"Exporting...\" }}\n  </button>\n  <a v-bind:class=\"[mode === 'view' ? 'ar' : 'ar hidden']\" id=\"ar\" rel=\"ar\">\n    <img src=\"@/assets/icons/View_in_AR.svg\" />\n  </a>\n  <a\n    id=\"download\"\n    v-bind:class=\"[mode === 'view' ? 'ar' : 'ar hidden']\"\n    download=\"sketch.usdz\"\n    target=\"_blank\"\n  >\n    Download USDZ\n  </a>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { USDZExporter } from \"three/examples/jsm/exporters/USDZExporter.js\";\nimport { scene } from \"../../App.vue\";\nimport {\n  convertMeshlineToGeometry,\n  convertMeshlineFillToGeometry,\n} from \"../convertMeshlineToGeometry.js\";\nlet sceneUSDZ;\n\nexport default {\n  name: \"ExportUSDZ\",\n  props: {},\n  data() {\n    return {\n      lightbox: false,\n      text: \"Export for AR\",\n      mode: \"default\", //default || exporting || view\n      url: undefined,\n    };\n  },\n  methods: {\n    exportForAr: function () {\n      this.mode = \"exporting\";\n      //there are better ways but this is good enough. The export floods the processor so vue doesn't update even with nextTick\n      setTimeout(() => {\n        this.viewInAr();\n      }, 500);\n    },\n    viewInAr: async function () {\n      sceneUSDZ = new THREE.Scene();\n\n      scene.children.forEach((obj) => {\n        if (\n          obj != undefined &&\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2 &&\n          obj.geometry.attributes.position.array.length > 6\n        ) {\n          // The stroke\n          if (obj.userData.stroke.show_stroke === true) {\n            sceneUSDZ.add(convertMeshlineToGeometry(obj, \"standard\"));\n          }\n\n          // The fill\n          if (obj.userData.fill.show_fill === true) {\n            convertMeshlineFillToGeometry(obj, \"standard\", false, true).forEach(\n              (mesh) => {\n                sceneUSDZ.add(mesh);\n              }\n            );\n          }\n        }\n      });\n\n      // for (let o = 0; o <= scene.children.length; o++) {\n      //   let obj = scene.children[o];\n\n      //   if (\n      //     obj != undefined &&\n      //     obj.geometry &&\n      //     obj.geometry.type == \"MeshLine\" &&\n      //     obj.layers.mask == 2 &&\n      //     obj.geometry.attributes.position.array.length > 0\n      //   ) {\n      //     // The stroke\n      //     if (obj.userData.stroke.show_stroke === true) {\n      //       let geometry = obj.geometry.clone();\n      //       geometry.applyMatrix4(obj.matrix);\n      //       let vertices = [];\n      //       let points = Array.from(geometry.attributes.position.array);\n\n      //       for (let i = 0; i <= points.length; i = i + 6) {\n      //         let v3 = new THREE.Vector3(\n      //           points[i],\n      //           points[i + 1],\n      //           points[i + 2]\n      //         );\n      //         //why do I have 0,0,0 points in my positions? :thinking:\n      //         if (v3.x != 0 && v3.y != 0 && v3.z != 0) {\n      //           vertices.push(v3);\n      //         }\n      //       }\n\n      //       //if the line is too short, we skip this iteration\n      //       if (vertices.length < 2) continue;\n\n      //       let force = [0];\n      //       for (let i = 0; i < obj.userData.stroke.force.length; i++) {\n      //         let length = obj.userData.stroke.force.length;\n      //         let minWidth = 0;\n      //         let baseWidth = obj.userData.stroke.lineWidth;\n\n      //         //https://github.com/spite/THREE.MeshLine/blob/master/src/THREE.MeshLine.js#L424\n      //         //in the shader it seems like it's base witdth * width\n      //         let width = obj.userData.stroke.force[i] / (baseWidth * 10000);\n      //         let tailLength = 3;\n\n      //         //Beginning of the line\n      //         if (i < tailLength) {\n      //           let n = map(\n      //             i,\n      //             minWidth,\n      //             tailLength,\n      //             minWidth,\n      //             baseWidth + width\n      //           );\n\n      //           force.push(n);\n      //         }\n      //         //End of the line\n      //         else if (i > length - tailLength) {\n      //           let n = map(\n      //             i,\n      //             length - tailLength,\n      //             length - 1,\n      //             baseWidth + width,\n      //             minWidth\n      //           );\n\n      //           force.push(n);\n      //         }\n      //         //bulk of the line\n      //         else {\n      //           force.push(baseWidth + width);\n      //         }\n      //       }\n\n      //       var pathBase = new THREE.CatmullRomCurve3(vertices);\n      //       const tubeGeometry = new TubeBufferGeometry(\n      //         pathBase,\n      //         vertices.length,\n      //         force,\n      //         8,\n      //         !true\n      //       );\n\n      //       const material = new THREE.MeshStandardMaterial({\n      //         color: obj.userData.stroke.color,\n      //         flatShading: true,\n      //         roughness: 1,\n      //         shininess: 0,\n      //         metalness: 1,\n      //       });\n      //       const mesh = new THREE.Mesh(tubeGeometry, material);\n      //       if (mesh.geometry.attributes.uv != undefined) {\n      //         group.attach(mesh);\n      //         sceneUSDZ.add(mesh);\n      //       } else {\n      //         continue;\n      //       }\n      //     }\n\n      //     // The fill\n      //     if (obj.userData.fill.show_fill === true) {\n      //       let fill = obj.children[0].clone();\n      //       let fillGeometry = obj.children[0].geometry.clone();\n\n      //       // let flippedFaces = obj.children[0].geometry.clone();\n      //       // let flippedArray = flippedFaces.index.array.reverse();\n      //       // flippedFaces.index.array = flippedArray;\n      //       // const mergedFaces = new Uint16Array(\n      //       //   fillGeometry.index.array.length + flippedFaces.index.array.length\n      //       // );\n      //       // for (var f = 0; f < fillGeometry.index.array.length; f++)\n      //       //   mergedFaces[f] = fillGeometry.index.array[f];\n      //       // for (var e = 0; e < flippedFaces.index.array.length; e++)\n      //       //   mergedFaces[fillGeometry.index.array.lenght + e] =\n      //       //     flippedFaces.index.array[e];\n      //       // fillGeometry.index.array = mergedFaces;\n      //       // fillGeometry.index.count = mergedFaces.length;\n\n      //       fill.geometry = fillGeometry;\n      //       fill.geometry.applyMatrix4(obj.matrix);\n      //       fill.position.set(0, 0, 0);\n      //       fill.rotation.set(0, 0, 0);\n      //       fill.scale.set(1, 1, 1);\n\n      //       fill.material = new THREE.MeshStandardMaterial({\n      //         color: obj.userData.fill.color,\n      //         side: THREE.DoubleSide,\n      //       });\n\n      //       let texture;\n      //       if (obj.children[0].material.map) {\n      //         texture = obj.children[0].material.map.clone();\n      //         fill.material.map = texture;\n      //       }\n\n      //       sceneUSDZ.add(fill);\n\n      //       let fillFlipped = fill.clone();\n      //       let fillFlippedGeometry = fill.geometry.clone();\n      //       fillFlippedGeometry.index.array =\n      //         fillFlippedGeometry.index.array.reverse();\n      //       fillFlipped.geometry = fillFlippedGeometry;\n      //       fillFlipped.material = new THREE.MeshStandardMaterial({\n      //         color: obj.userData.fill.color,\n      //         side: THREE.DoubleSide,\n      //       });\n      //       sceneUSDZ.add(fillFlipped);\n      //     }\n      //   }\n      // }\n\n      sceneUSDZ.scale.set(0.1, 0.1, 0.1);\n      sceneUSDZ.updateMatrixWorld(true);\n\n      const exporter = new USDZExporter();\n      const arraybuffer = await exporter.parse(sceneUSDZ);\n      //.parse ( input : Object3D, onCompleted : Function)\n      const blob = new Blob([arraybuffer], {\n        type: \"application/octet-stream\",\n      });\n      // var el = document.createElement(\"a\");\n      var el = document.getElementById(\"ar\");\n      el.setAttribute(\"href\", URL.createObjectURL(blob));\n      el.setAttribute(\"download\", \"sketch.usdz\");\n      document\n        .getElementById(\"download\")\n        .setAttribute(\"href\", URL.createObjectURL(blob));\n      this.mode = \"view\";\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\nbutton {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  font-weight: 900;\n  font-size: 0.8em;\n  border-bottom: 1px solid #ffe8b3;\n}\n\n.ar {\n  width: 100%;\n  align-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  padding-top: 6px;\n  padding-left: 12px;\n  padding-right: 12px;\n  border-bottom: 1px solid #ffe8b3;\n  box-sizing: border-box;\n}\n\na.ar {\n  color: #1c1c1e;\n  font-weight: 900;\n  line-height: 30px;\n  text-align: center;\n  font-size: 0.8em;\n}\n\n.ar > img {\n  width: auto;\n}\n</style>","//http://web.archive.org/web/20170106063058/http://www.lab4games.net/zz85/blog/2012/04/24/spline-extrusions-tubes-and-knots-of-sorts/\n//https://mattdesl.svbtle.com/shaping-curves-with-parametric-equations\n//https://github.com/mattdesl/parametric-curves/blob/45f321fd43af3a0786aa2dd4016931cc39325944/lib/shaders/tube.vert#L66-L162\n//https://stackoverflow.com/questions/31660099/threejs-tubegeometry-applying-custom-curve-causes-unexpected-twisting\n\n//https://avikdas.com/2020/09/08/rendering-curves-in-3d.html\n//https://avikdas.com/assets/js/curve-optimization/curve-geometry.mjs\n\nimport { BufferGeometry } from 'three';\nimport { Float32BufferAttribute } from 'three';\nimport { Vector2 } from 'three';\nimport { Vector3 } from 'three';\n\n// TubeBufferGeometry\n\nclass TubeBufferGeometry extends BufferGeometry {\n\n    constructor(path, tubularSegments = 10, radius = [1, 1, 1, 1, 1, 1, 1, 1, 1, 1], radialSegments = 8, closed = false) {\n\n        super();\n        this.type = 'TubeBufferGeometry';\n\n        this.parameters = {\n            path: path,\n            tubularSegments: tubularSegments,\n            radius: radius,\n            radialSegments: radialSegments,\n            closed: closed\n        };\n\n        tubularSegments = tubularSegments || 64;\n        radius = radius || 1;\n        radialSegments = radialSegments || 8;\n        closed = closed || false;\n\n        var frames = path.computeFrenetFrames(tubularSegments, closed);\n\n        // expose internals\n\n        this.tangents = frames.tangents;\n        this.normals = frames.normals;\n        this.binormals = frames.binormals;\n\n        // helper variables\n\n        var vertex = new Vector3();\n        var normal = new Vector3();\n        var uv = new Vector2();\n        var P = new Vector3();\n\n        var i, j;\n\n        // buffer\n\n        var vertices = [];\n        var normals = [];\n        var uvs = [];\n        var indices = [];\n\n        // create buffer data\n\n        generateBufferData();\n\n        // build geometry\n\n        this.setIndex(indices);\n        this.setAttribute('position', new Float32BufferAttribute(vertices, 3));\n        // Commenting out normals and UVs. For exporting to USDZ the result is better if the object has none of them\n        this.setAttribute('normal', new Float32BufferAttribute(normals, 3));\n        this.setAttribute('uv', new Float32BufferAttribute(uvs, 2));\n\n        // functions\n\n        function generateBufferData() {\n\n            for (i = 0; i < tubularSegments; i++) {\n\n                generateSegment(i);\n\n            }\n\n            // if the geometry is not closed, generate the last row of vertices and normals\n            // at the regular position on the given path\n            //\n            // if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n            generateSegment((closed === false) ? tubularSegments : 0);\n\n            // uvs are generated in a separate function.\n            // this makes it easy compute correct values for closed geometries\n            generateUVs();\n\n            // finally create faces\n\n            generateIndices();\n\n        }\n\n        function generateSegment(i) {\n\n            // we use getPointAt to sample evenly distributed points from the given path\n\n            P = path.getPointAt(i / tubularSegments, P);\n\n            // If you avoid rotations completely, the model looks flatter but works\n            // var N = frames.normals[0];\n            // var B = frames.binormals[0];\n\n            // retrieve corresponding normal and binormal\n            var N = frames.normals[i];\n            var B = frames.binormals[i];\n\n            // generate normals and vertices for the current segment\n\n            for (j = 0; j <= radialSegments; j++) {\n\n                var v = j / radialSegments * Math.PI * 2;\n\n                var sin = Math.sin(v);\n                var cos = - Math.cos(v);\n\n                normal\n                normal.x = (cos * N.x + sin * B.x);\n                normal.y = (cos * N.y + sin * B.y);\n                normal.z = (cos * N.z + sin * B.z);\n                normal.normalize();\n\n                normals.push(normal.x, normal.y, normal.z);\n\n                // vertex\n                const r = (typeof radius === 'function') ? radius(i / tubularSegments) : radius[i];\n                // const r = (typeof radius === 'function') ? radius(i / tubularSegments) : radius;\n\n                vertex.x = P.x + r * normal.x;\n                vertex.y = P.y + r * normal.y;\n                vertex.z = P.z + r * normal.z;\n\n                vertices.push(vertex.x, vertex.y, vertex.z);\n\n            }\n\n        }\n\n        function generateIndices() {\n\n            for (j = 1; j <= tubularSegments; j++) {\n\n                for (i = 1; i <= radialSegments; i++) {\n\n                    var a = (radialSegments + 1) * (j - 1) + (i - 1);\n                    var b = (radialSegments + 1) * j + (i - 1);\n                    var c = (radialSegments + 1) * j + i;\n                    var d = (radialSegments + 1) * (j - 1) + i;\n\n                    // faces\n\n                    indices.push(a, b, d);\n                    indices.push(b, c, d);\n\n                }\n\n            }\n\n        }\n\n        function generateUVs() {\n\n            for (i = 0; i <= tubularSegments; i++) {\n\n                for (j = 0; j <= radialSegments; j++) {\n\n                    uv.x = i / tubularSegments;\n                    uv.y = j / radialSegments;\n\n                    uvs.push(uv.x, uv.y);\n\n                }\n\n            }\n\n        }\n\n    }\n}\n\n// TubeBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype);\n// TubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\n\nexport { TubeBufferGeometry };","import * as THREE from \"three\";\nimport { TubeBufferGeometry } from \"./TubeGeometryWithVariableWidth.js\";\n\nexport function map(n, start1, stop1, start2, stop2) {\n    return ((n - start1) / (stop1 - start1)) * (stop2 - start2) + start2;\n}\n\nexport function convertMeshlineToGeometry(line, material) {\n    let obj = line;\n    let geometry = obj.geometry.clone();\n    geometry.applyMatrix4(obj.matrix);\n    let vertices = [];\n    let points = Array.from(geometry.attributes.position.array);\n\n\n    for (let i = 0; i <= points.length; i = i + 6) {\n        let v3 = new THREE.Vector3(\n            points[i],\n            points[i + 1],\n            points[i + 2]\n        );\n        //why do I have 0,0,0 points in my positions? :thinking:\n        if (v3.x != 0 && v3.y != 0 && v3.z != 0) {\n            vertices.push(v3);\n        }\n    }\n\n\n    let force = [0];\n    for (let i = 0; i < obj.userData.stroke.force.length; i++) {\n        let length = obj.userData.stroke.force.length;\n        let minWidth = 0;\n        let baseWidth = obj.userData.stroke.lineWidth * 2.5;\n\n        //https://github.com/spite/THREE.MeshLine/blob/master/src/THREE.MeshLine.js#L424\n        //in the shader it seems like it's base witdth * width\n        let width = obj.userData.stroke.force[i] / 15;\n        let tailLength = 3;\n\n        //Beginning of the line\n        if (i < tailLength) {\n            let n = map(\n                i,\n                minWidth,\n                tailLength,\n                minWidth,\n                baseWidth + width\n            );\n\n            force.push(n);\n        }\n        //End of the line\n        else if (i > length - tailLength) {\n            let n = map(\n                i,\n                length - tailLength,\n                length - 1,\n                baseWidth + width,\n                minWidth\n            );\n\n            force.push(n);\n        }\n        //bulk of the line\n        else {\n            force.push(baseWidth + width);\n        }\n    }\n\n    var pathBase = new THREE.CatmullRomCurve3(vertices);\n    const tubeGeometry = new TubeBufferGeometry(\n        pathBase,\n        vertices.length,\n        force,\n        8,\n        !true\n    );\n\n    let tubeMaterial\n\n    if (material === \"basic\") {\n        tubeMaterial = new THREE.MeshBasicMaterial({\n            color: obj.userData.stroke.color,\n            flatShading: true,\n        });\n    } else {\n        tubeMaterial = new THREE.MeshStandardMaterial({\n            color: obj.userData.stroke.color,\n            flatShading: true,\n            roughness: 1,\n            shininess: 0,\n            metalness: 1,\n        });\n    }\n    const mesh = new THREE.Mesh(tubeGeometry, tubeMaterial);\n    return mesh;\n}\n\n\nexport function convertMeshlineFillToGeometry(mesh, material, edges, duplicate) {\n    let obj = mesh;\n    let fill = obj.children[0].clone();\n    let fillGeometry = obj.children[0].geometry.clone();\n    fill.geometry = fillGeometry;\n    fill.geometry.applyMatrix4(obj.matrix);\n    fill.position.set(0, 0, 0);\n    fill.rotation.set(0, 0, 0);\n    fill.scale.set(1, 1, 1);\n\n    let fillMaterial;\n\n    if (material === \"basic\") {\n        fillMaterial = new THREE.MeshBasicMaterial({\n            color: obj.userData.fill.color,\n            side: THREE.FrontSide,\n            wireframe: false\n        });\n    }\n    else {\n        fillMaterial = new THREE.MeshStandardMaterial({\n            color: obj.userData.fill.color,\n            side: THREE.DoubleSide,\n        });\n    }\n\n    let fillMesh = new THREE.Mesh(fillGeometry, fillMaterial);\n    let fillMeshFlipped;\n\n    if (duplicate === true) {\n        let fillFlippedGeometry = fillGeometry.clone();\n        fillFlippedGeometry.index.array =\n            fillFlippedGeometry.index.array.reverse();\n        let fillMeshMaterial = new THREE.MeshStandardMaterial({\n            color: obj.userData.fill.color,\n            side: THREE.DoubleSide,\n        });\n        fillMeshFlipped = new THREE.Mesh(fillFlippedGeometry, fillMeshMaterial)\n    }\n\n    if (edges === true) {\n        const edges = new THREE.EdgesGeometry(fillGeometry);\n        const line = new THREE.LineSegments(\n            edges,\n            new THREE.LineBasicMaterial({\n                color: obj.userData.fill.color,\n            })\n        );\n\n        fillMesh.attach(line);\n    }\n\n\n    if (duplicate === true) {\n        let arr = [fillMesh, fillMeshFlipped]\n        return arr\n    } else {\n        return fillMesh;\n    }\n}\n","import { render } from \"./ExportUSDZ.vue?vue&type=template&id=206058b5&scoped=true\"\nimport script from \"./ExportUSDZ.vue?vue&type=script&lang=js\"\nexport * from \"./ExportUSDZ.vue?vue&type=script&lang=js\"\n\nimport \"./ExportUSDZ.vue?vue&type=style&index=0&id=206058b5&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-206058b5\"]])\n\nexport default __exports__","<template>\n  <button @click=\"exportToGltf()\">Export to GLB</button>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter.js\";\nimport { scene } from \"../../App.vue\";\nimport {\n  convertMeshlineToGeometry,\n  convertMeshlineFillToGeometry,\n} from \"../convertMeshlineToGeometry.js\";\nlet sceneGLTF;\n\nexport default {\n  name: \"ExportGLTF\",\n  props: {},\n  data() {\n    return {};\n  },\n  methods: {\n    exportToGltf: async function () {\n      this.text = \"Exporting...\";\n      sceneGLTF = new THREE.Scene();\n\n      const group = new THREE.Group();\n\n      scene.children.forEach((obj) => {\n        if (\n          obj != undefined &&\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2 &&\n          obj.geometry.attributes.position.array.length > 6\n        ) {\n          // The stroke\n          if (obj.userData.stroke.show_stroke === true) {\n            group.attach(convertMeshlineToGeometry(obj));\n          }\n\n          // The fill\n          if (obj.userData.fill.show_fill === true) {\n            sceneGLTF.add(convertMeshlineFillToGeometry(obj));\n          }\n        }\n      });\n\n      sceneGLTF.add(group);\n      sceneGLTF.scale.set(0.1, 0.1, 0.1);\n      sceneGLTF.updateMatrixWorld(true);\n      console.log(sceneGLTF);\n\n      const exporter = new GLTFExporter();\n      exporter.parse(\n        sceneGLTF,\n        function (result) {\n          if (result instanceof ArrayBuffer) {\n            saveArrayBuffer(result, \"scene.glb\");\n          } else {\n            const output = JSON.stringify(result, null, 2);\n            saveString(output, \"scene.gltf\");\n          }\n        },\n        { binary: true }\n      );\n      const link = document.createElement(\"a\");\n      link.style.display = \"none\";\n      document.body.appendChild(link);\n\n      function save(blob, filename) {\n        link.href = URL.createObjectURL(blob);\n        link.download = filename;\n        link.click();\n\n        // URL.revokeObjectURL( url ); breaks Firefox...\n      }\n\n      function saveString(text, filename) {\n        save(new Blob([text], { type: \"text/plain\" }), filename);\n      }\n\n      function saveArrayBuffer(buffer, filename) {\n        save(\n          new Blob([buffer], { type: \"application/octet-stream\" }),\n          filename\n        );\n      }\n    },\n  },\n  watch: {},\n  mounted() {},\n};\n</script>\n\n<style scoped>\nbutton {\n  border-bottom: 1px solid #ffe8b3;\n}\n\n.ar {\n  width: 100%;\n  align-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  padding-top: 6px;\n  padding-left: 12px;\n  padding-right: 12px;\n  border-bottom: 1px solid #ffe8b3;\n  box-sizing: border-box;\n}\n\n.ar > img {\n  width: auto;\n}\n</style>","import { render } from \"./ExportGLB.vue?vue&type=template&id=e1688084&scoped=true\"\nimport script from \"./ExportGLB.vue?vue&type=script&lang=js\"\nexport * from \"./ExportGLB.vue?vue&type=script&lang=js\"\n\nimport \"./ExportGLB.vue?vue&type=style&index=0&id=e1688084&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e1688084\"]])\n\nexport default __exports__","<template>\r\n  <button @click=\"showModal\">Export to HTML</button>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"ExportHTML\",\r\n  methods: {\r\n    showModal: function () {\r\n      this.$emit(\"modal\", { display: true, mode: \"export-html\" });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\nbutton {\r\n  border-bottom: 1px solid #ffe8b3;\r\n}\r\n</style>\r\n","import { render } from \"./ExportHTML.vue?vue&type=template&id=302ae2fb&scoped=true\"\nimport script from \"./ExportHTML.vue?vue&type=script&lang=js\"\nexport * from \"./ExportHTML.vue?vue&type=script&lang=js\"\n\nimport \"./ExportHTML.vue?vue&type=style&index=0&id=302ae2fb&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-302ae2fb\"]])\n\nexport default __exports__","import { render } from \"./Share.vue?vue&type=template&id=24c8d122&scoped=true\"\nimport script from \"./Share.vue?vue&type=script&lang=js\"\nexport * from \"./Share.vue?vue&type=script&lang=js\"\n\nimport \"./Share.vue?vue&type=style&index=0&id=24c8d122&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-24c8d122\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window\r\n    title=\"Shapes & Materials\"\r\n    :initialX=\"12\"\r\n    :initialY=\"140\"\r\n    :visible=\"selectedTool == 'draw'\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :start-open=\"startOpen\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"container-column\">\r\n      <div class=\"group-label\">Geometry</div>\r\n      <div class=\"shapes-container\">\r\n        <button\r\n          v-for=\"shapeOption in shapes\"\r\n          :key=\"shapeOption.value\"\r\n          class=\"shape-btn\"\r\n          :class=\"{ active: shape === shapeOption.value }\"\r\n          @click=\"selectShape(shapeOption.value)\"\r\n          :title=\"shapeOption.name\"\r\n        >\r\n          <img :src=\"shapeOption.icon\" :alt=\"shapeOption.name\" />\r\n          <span class=\"tooltip\">{{ shapeOption.name }}</span>\r\n        </button>\r\n        \r\n        <!-- Custom models list -->\r\n         <button\r\n            v-for=\"model in customModels\"\r\n            :key=\"model.id\"\r\n            class=\"shape-btn\"\r\n            :class=\"{ active: shape === model.id }\"\r\n            @click=\"selectCustomModel(model.id)\"\r\n            :title=\"model.name\"\r\n          >\r\n            <img src=\"@/assets/icons/Canvas-Custom.svg\" alt=\"Custom Model\" />\r\n            <span class=\"tooltip\">{{ model.name }}</span>\r\n          </button>\r\n\r\n         <button class=\"shape-btn\" @click=\"$refs.fileInput.click()\" title=\"Load Custom GLB\">\r\n             <span style=\"font-size: 18px; color: rgba(255,255,255,0.6)\">+</span>\r\n             <span class=\"tooltip\">Load GLB</span>\r\n         </button>\r\n\r\n        <input\r\n          type=\"file\"\r\n          ref=\"fileInput\"\r\n          class=\"hidden\"\r\n          accept=\".glb,.gltf\"\r\n          @change=\"onFileChange\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"separator-horizontal\"></div>\r\n\r\n      <div class=\"group-label\">Material</div>\r\n      <div class=\"materials-container\">\r\n          <button \r\n            v-for=\"mat in matcaps\" \r\n            :key=\"mat.name\"\r\n            class=\"matcap-btn\"\r\n            :class=\"{ active: currentMaterial === mat.value }\"\r\n            @click=\"selectMaterial(mat.value)\"\r\n            :title=\"mat.name\"\r\n          >\r\n            <div v-if=\"mat.value === 'standard'\" class=\"std-preview\"></div>\r\n            <img v-else :src=\"mat.image\" class=\"matcap-img\" />\r\n          </button>\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"ShapeSelector\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    selectedTool: String,\r\n    selectedShape: String,\r\n    reopenTrigger: Number,\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"selected-canvas-shape\", \"close\", \"load-custom-model\", \"set-material\"],\r\n  data() {\r\n    return {\r\n      window: window,\r\n      shape: \"plane\",\r\n      currentMaterial: \"standard\",\r\n      shapes: [\r\n        { value: \"plane\", name: \"Plane\", icon: require(\"@/assets/icons/Canvas-Plane.svg\") },\r\n        { value: \"cube\", name: \"Cube\", icon: require(\"@/assets/icons/Canvas-Cube.svg\") },\r\n        { value: \"cylinder\", name: \"Cylinder\", icon: require(\"@/assets/icons/Canvas-Cylinder.svg\") },\r\n        { value: \"sphere\", name: \"Sphere\", icon: require(\"@/assets/icons/Canvas-Sphere.svg\") },\r\n        { value: \"head\", name: \"Head\", icon: require(\"@/assets/icons/Canvas-Head.svg\") },\r\n      ],\r\n      customModels: [],\r\n      matcaps: [\r\n        { name: 'Standard', value: 'standard' },\r\n        { name: 'Clay', value: 'matcaps/clay_studio.jpeg', image: 'matcaps/clay_studio.jpeg' },\r\n        { name: 'Gold', value: 'matcaps/metal_shiny.jpeg', image: 'matcaps/metal_shiny.jpeg' },\r\n        { name: 'Metal', value: 'matcaps/metal_lead.jpeg', image: 'matcaps/metal_lead.jpeg' },\r\n        { name: 'Pearl', value: 'matcaps/pearl.jpeg', image: 'matcaps/pearl.jpeg' },\r\n        { name: 'Jade', value: 'matcaps/jade.jpeg', image: 'matcaps/jade.jpeg' },\r\n        { name: 'Skin', value: 'matcaps/skin.jpeg', image: 'matcaps/skin.jpeg' },\r\n        { name: 'Toon', value: 'matcaps/toon.jpeg', image: 'matcaps/toon.jpeg' },\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    selectShape(value) {\r\n        this.shape = value;\r\n        this.$emit(\"selected-canvas-shape\", value);\r\n    },\r\n    selectMaterial(value) {\r\n        this.currentMaterial = value;\r\n        this.$emit(\"set-material\", value);\r\n    },\r\n    onFileChange(e) {\r\n      const file = e.target.files[0];\r\n      if (file) {\r\n        const url = URL.createObjectURL(file);\r\n        const modelId = Date.now().toString();\r\n        this.customModels.push({ id: modelId, name: file.name, url });\r\n        this.$emit(\"load-custom-model\", { url, id: modelId });\r\n        this.selectCustomModel(modelId);\r\n        e.target.value = \"\";\r\n      }\r\n    },\r\n    selectCustomModel(id) {\r\n      this.shape = id; \r\n      this.$emit(\"selected-canvas-shape\", { customId: id });\r\n    },\r\n  },\r\n  watch: {\r\n    selectedShape(val) {\r\n      if (val) {\r\n        this.shape = val;\r\n      }\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.selectedShape) {\r\n      this.shape = this.selectedShape;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.container-column {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 12px;\r\n}\r\n\r\n.shapes-container {\r\n  display: flex;\r\n  gap: 8px;\r\n  flex-wrap: wrap;\r\n}\r\n\r\n.materials-container {\r\n    display: flex;\r\n    gap: 8px;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.group-label {\r\n    font-size: 10px;\r\n    text-transform: uppercase;\r\n    opacity: 0.5;\r\n    font-weight: bold;\r\n    letter-spacing: 0.5px;\r\n    margin-bottom: -4px;\r\n}\r\n\r\n.separator-horizontal {\r\n  height: 1px;\r\n  background: rgba(255,255,255,0.1);\r\n  width: 100%;\r\n}\r\n\r\n.shape-btn, .matcap-btn {\r\n  position: relative;\r\n  width: 36px;\r\n  height: 36px;\r\n  background: rgba(255, 255, 255, 0.03);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n  padding: 0;\r\n  overflow: hidden;\r\n}\r\n\r\n.shape-btn:hover, .matcap-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-color: rgba(255, 255, 255, 0.2);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.shape-btn.active, .matcap-btn.active {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-color: var(--accent-color, #ffb000);\r\n  box-shadow: 0 0 0 1px var(--accent-color, #ffb000);\r\n}\r\n\r\n.shape-btn img {\r\n  width: 20px;\r\n  height: 20px;\r\n  filter: brightness(0) invert(1);\r\n}\r\n\r\n.matcap-img {\r\n    width: 100%;\r\n    height: 100%;\r\n    object-fit: cover;\r\n}\r\n\r\n.std-preview {\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #e6edf5;\r\n}\r\n\r\n.tooltip {\r\n  position: absolute;\r\n  bottom: -28px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  background: rgba(0, 0, 0, 0.9);\r\n  color: white;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  font-size: 10px;\r\n  white-space: nowrap;\r\n  pointer-events: none;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n  z-index: 1000;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.2);\r\n}\r\n\r\n.shape-btn:hover .tooltip, .matcap-btn:hover .tooltip {\r\n  opacity: 1;\r\n}\r\n</style>\r\n","import { render } from \"./ShapeSelector.vue?vue&type=template&id=29b5f1dc&scoped=true\"\nimport script from \"./ShapeSelector.vue?vue&type=script&lang=js\"\nexport * from \"./ShapeSelector.vue?vue&type=script&lang=js\"\n\nimport \"./ShapeSelector.vue?vue&type=style&index=0&id=29b5f1dc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-29b5f1dc\"]])\n\nexport default __exports__","\n<template>\n  <div v-if=\"modalProp.display\" class=\"fade\" @click.self=\"hideModal\">\n    <div class=\"modal\">\n      <div class=\"component-container\">\n        <Welcome v-if=\"modalProp.mode === 'about'\" />\n        <Feedback v-if=\"modalProp.mode === 'feedback'\" />\n        <export-for-blender v-if=\"modalProp.mode === 'blender'\" />\n        <export-for-procreate v-if=\"modalProp.mode === 'procreate'\" />\n        <Tutorial v-if=\"modalProp.mode === 'tutorial'\" />\n        <Survey v-if=\"modalProp.mode === 'survey'\" />\n        <brush-library v-if=\"modalProp.mode === 'brush-library'\" @set-preset=\"handleSetPreset\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Welcome from \"./ModalContent/Welcome.vue\";\nimport Feedback from \"./ModalContent/Feedback.vue\";\nimport ExportForBlender from \"./ModalContent/ExportForBlender.vue\";\nimport ExportForProcreate from \"./ModalContent/ExportForProcreate.vue\";\nimport Tutorial from \"./ModalContent/Tutorial.vue\";\nimport Survey from \"./ModalContent/Survey.vue\";\nimport BrushLibrary from \"./ModalContent/BrushLibrary.vue\";\n\nexport default {\n  name: \"VideoExportPreview\",\n  components: {\n    Welcome,\n    Feedback,\n    ExportForBlender,\n    ExportForProcreate,\n    Tutorial,\n    Survey,\n    BrushLibrary,\n  },\n  data() {\n    return {};\n  },\n  props: {\n    modalProp: Object,\n  },\n  methods: {\n    hideModal: function () {\n      this.$emit(\"modal-set\", { show: false, mode: \"about\" });\n    },\n    handleSetPreset: function (settings) {\n      this.$emit(\"set-preset\", settings);\n      this.hideModal();\n    },\n  },\n  watch: {\n    modalProp: function (val) {\n      console.log(val);\n    },\n  },\n};\n</script>\n\n<style scoped>\n.fade {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.modal {\n  width: fit-content;\n  min-width: 50%;\n  max-width: 75%;\n  max-width: 800px;\n  height: fit-content;\n  min-height: 50%;\n  max-height: 70%;\n  overflow-y: scroll;\n  background-color: white;\n  filter: drop-shadow(0px 0px 24px rgba(0, 0, 0, 0.08));\n  border-radius: 8px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: text;\n  touch-action: none;\n  padding: 32px;\n}\n\n.component-container {\n  height: 100%;\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n}\n</style>","\n<template>\n  <div>\n    <h1>Penzil</h1>\n    <h2>Ver 0.2</h2>\n\n    <h2>\n      Penzil is a 3d sketching app designed and developed by\n      <a href=\"http://twitter.com/jacopocolo\" target=\"_blank\">Jacopo Col</a>\n    </h2>\n    <p>\n      Penzil is built on top of the work of many people: the whole community\n      behind\n      <a href=\"https://github.com/vuejs/vue\" target=\"_blank\">vue.js</a>, the\n      whole community behind\n      <a href=\"https://github.com/mrdoob/three.js/\" target=\"_blank\">three.js</a\n      >,\n      <a href=\"https://github.com/spite/THREE.MeshLine\" target=\"_blank\"\n        >THREE.Meshline</a\n      >\n      by spite,\n      <a href=\"https://github.com/yomotsu/camera-controls\" target=\"_blank\"\n        >camera controls</a\n      >\n      by yomotsu,\n      <a\n        href=\"https://github.com/Fyrestar/THREE.InfiniteGridHelper\"\n        target=\"_blank\"\n        >InfiniteGridHelper</a\n      >\n      by Fyrestar,\n      <a\n        href=\"https://github.com/ArthurClemens/Javascript-Undo-Manager\"\n        target=\"_blank\"\n        >Undo-Manager</a\n      >\n      by ArthurClemens,\n      <a\n        href=\"https://github.com/TrevorSundberg/h264-mp4-encoder\"\n        target=\"_blank\"\n        >h264-mp4-encoder</a\n      >\n      by TrevorSundberg. This project would have been impossible without the\n      work of these people.\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Welcome\",\n  data() {\n    return {};\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\nh1 {\n  font-size: 2em;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n}\n</style>","import { render } from \"./Welcome.vue?vue&type=template&id=4d550b7e&scoped=true\"\nimport script from \"./Welcome.vue?vue&type=script&lang=js\"\nexport * from \"./Welcome.vue?vue&type=script&lang=js\"\n\nimport \"./Welcome.vue?vue&type=style&index=0&id=4d550b7e&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4d550b7e\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <h1>Feedback</h1>\n    <p>Thanks for trying out Penzil.</p>\n    <p>\n      There are two ways to send feedback: first of all, you can reach out\n      <a href=\"http://twitter.com/jacopocolo\" target=\"_blank\"\n        >directly to me on Twitter</a\n      >. Otherwise, you can join the\n      <a href=\"https://discord.gg/jvzjNpZGCk\" target=\"_blank\">Penzil Discord</a>\n      server and post there. If you found something that you think it's a bug,\n      you can also\n      <a href=\"https://github.com/jacopocolo/Penzil/issues\" target=\"_blank\"\n        >open a new issue on Github</a\n      >.\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Feedback\",\n  data() {\n    return {};\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\nh1 {\n  font-size: 2em;\n  display: inline;\n}\n\nh1 > h2 {\n  display: inline;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n}\n</style>","import { render } from \"./Feedback.vue?vue&type=template&id=1af5b4e9&scoped=true\"\nimport script from \"./Feedback.vue?vue&type=script&lang=js\"\nexport * from \"./Feedback.vue?vue&type=script&lang=js\"\n\nimport \"./Feedback.vue?vue&type=style&index=0&id=1af5b4e9&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1af5b4e9\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <h1>Export for Blender</h1>\n\n    <p>\n      You can export your sketch for Blender with the button below but there\n      isn't a proper improter yet, just a script. Hop in\n      <a href=\"https://discord.gg/jvzjNpZGCk\" target=\"_blank\">Penzil Discord</a>\n      server and I'll guide you along.\n    </p>\n    <button @click=\"exportToGp\">Export for Blender</button>\n  </div>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { scene } from \"../../App.vue\";\n\nexport default {\n  name: \"Export\",\n  data() {\n    return {};\n  },\n  methods: {\n    exportToGp: function () {\n      const json = [];\n      scene.children.forEach((obj) => {\n        //check if it's a line, if it's in the right layer and that we don't already have its original\n        if (\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2\n        ) {\n          let line = {};\n\n          let geometry = obj.geometry.clone();\n          geometry.applyMatrix(obj.matrix);\n\n          line.vertices = Array.from(geometry.attributes.position.array);\n          line.stroke = obj.userData.stroke;\n          line.fill = obj.userData.fill;\n          line.mirrorOn = false;\n          line.position = new THREE.Vector3(0, 0, 0);\n          line.quaternion = new THREE.Quaternion(0, 0, 0, 1);\n          line.scale = new THREE.Vector3(1, 1, 1);\n          line.matrix = obj.matrix;\n          json.push(line);\n        }\n      });\n      console.log(json);\n\n      var dataStr =\n        \"data:text/json;charset=utf-8,\" +\n        encodeURIComponent(JSON.stringify(json));\n\n      var filename = prompt(\"Enter a name for your file\", \"gp_\");\n\n      if (filename != null) {\n        var el = document.createElement(\"a\");\n        el.setAttribute(\"href\", dataStr);\n        el.setAttribute(\"download\", filename + \".json\");\n        el.click();\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\nh1 {\n  font-size: 2em;\n  display: inline;\n}\n\nh1 > h2 {\n  display: inline;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n}\n\nbutton {\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  width: 50%;\n  padding-left: 16px;\n  padding-right: 16px;\n  border: 1px solid #ffb000;\n  border-radius: 8px;\n}\n</style>","import { render } from \"./ExportForBlender.vue?vue&type=template&id=96b7a698&scoped=true\"\nimport script from \"./ExportForBlender.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForBlender.vue?vue&type=script&lang=js\"\n\nimport \"./ExportForBlender.vue?vue&type=style&index=0&id=96b7a698&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-96b7a698\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <h1>Export for Procreate</h1>\n    <div class=\"row\">\n      <div id=\"scene-usdz-canvas\" class=\"column\">\n        <canvas id=\"usdz-canvas\"></canvas>\n        <span class=\"canvas-instructions\"\n          >Tap or click on a fill (visible face or edge) to flip it</span\n        >\n      </div>\n      <div id=\"usdz-options\" class=\"column\">\n        <p>\n          <input type=\"checkbox\" name=\"strokes\" v-model=\"mergeLines\" />\n          <label for=\"strokes\"\n            >Merge strokes (reccomended)\n            <p>\n              All strokes will appear as a single layer in Procreate. You will\n              lose individual stroke colors but you'll be able to repaint them\n              in Procreate. This settings allows you to import bigger Penzil\n              sketches before your artwork exceeds the device capabilities for\n              import.\n            </p></label\n          >\n          <br />\n          <input type=\"checkbox\" name=\"fills\" v-model=\"checkFills\" />\n          <label for=\"fills\"\n            >Manually check your fills. Tap or click on a visible face or edge\n            to flip it\n            <p>\n              Procrete only support single face meshes and you can only paint\n              their front side. Check that your fills are facing the direction\n              you want. If you just see an outline you are looking at the back\n              of a fill. Tap on its edge or turn it around and tap on it to flip\n              it.\n            </p>\n          </label>\n        </p>\n        <button @click=\"exportToUSDZ\">Export</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { scene } from \"../../App.vue\";\nimport { mergeBufferGeometries } from \"three/examples/jsm/utils/BufferGeometryUtils.js\";\nimport { USDZExporter } from \"three/examples/jsm/exporters/USDZExporter.js\";\nimport {\n  convertMeshlineToGeometry,\n  convertMeshlineFillToGeometry,\n} from \"../convertMeshlineToGeometry.js\";\nimport CameraControls from \"camera-controls\";\nCameraControls.install({ THREE: THREE });\n\nlet raycaster = new THREE.Raycaster();\nraycaster.params.Line.threshold = 0.1;\n// let texture = new THREE.TextureLoader().load(\"/watercolor.jpg\");\n// texture.wrapS = THREE.RepeatWrapping;\n// texture.wrapT = THREE.RepeatWrapping;\n// texture.repeat.set(1, 1);\nlet sceneUSDZ = new THREE.Scene();\nlet sceneExport = new THREE.Scene();\nlet rendererUSDZ = new THREE.WebGLRenderer({\n  antialias: true,\n  alpha: true,\n});\nlet cameraUSDZ = new THREE.PerspectiveCamera(\n  100,\n  window.innerWidth / window.innerHeight,\n  1,\n  1000\n);\nlet clock, cameraControls;\n\nexport default {\n  name: \"Export\",\n  data() {\n    return {\n      mergeLines: true,\n      checkFills: false,\n    };\n  },\n  methods: {\n    previewUSDZ: function () {\n      sceneUSDZ.background = new THREE.Color(0xf0f0f0);\n\n      rendererUSDZ = new THREE.WebGLRenderer({\n        antialias: true,\n        alpha: false,\n        canvas: document.getElementById(\"usdz-canvas\"),\n      });\n\n      rendererUSDZ.setPixelRatio(window.devicePixelRatio);\n\n      cameraUSDZ.zoom = 3;\n      cameraUSDZ.position.set(5, 5, 10);\n      cameraUSDZ.updateProjectionMatrix();\n\n      clock = new THREE.Clock();\n\n      cameraControls = new CameraControls(cameraUSDZ, rendererUSDZ.domElement);\n      cameraControls.dampingFactor = 20;\n      cameraControls.draggingDampingFactor = 200;\n      cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n      cameraControls.mouseButtons.wheel = CameraControls.ACTION.ROTATE;\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.TRUCK;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"Space\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      document.addEventListener(\"keydown\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = false;\n        }\n      });\n      document.addEventListener(\"keyup\", (event) => {\n        if (event.code === \"AltLeft\") {\n          cameraControls.mouseButtons.left = CameraControls.ACTION.ROTATE;\n          this.toolEnabled = true;\n        }\n      });\n      cameraControls.mouseButtons.middle = CameraControls.ACTION.DOLLY;\n      cameraControls.mouseButtons.right = CameraControls.ACTION.ZOOM;\n      cameraControls.touches.one = CameraControls.ACTION.TOUCH_ROTATE;\n      cameraControls.touches.two = CameraControls.ACTION.TOUCH_ZOOM_ROTATE;\n      cameraControls.touches.three = CameraControls.ACTION.TOUCH_DOLLY_TRUCK;\n      cameraControls.enabled = true;\n      cameraControls.maxZoom = 4000;\n      cameraControls.minZoom = 1.5;\n\n      // const group = new THREE.Group();\n\n      scene.children.forEach((obj) => {\n        if (\n          obj != undefined &&\n          obj.geometry &&\n          obj.geometry.type == \"MeshLine\" &&\n          obj.layers.mask == 2 &&\n          obj.geometry.attributes.position.array.length > 6\n        ) {\n          // The stroke\n          if (obj.userData.stroke.show_stroke === true) {\n            sceneUSDZ.add(convertMeshlineToGeometry(obj, \"basic\"));\n          }\n\n          // The fill\n          if (obj.userData.fill.show_fill === true) {\n            sceneUSDZ.add(convertMeshlineFillToGeometry(obj, \"basic\", true));\n          }\n        }\n      });\n\n      // sceneUSDZ.add(group);\n      sceneUSDZ.updateMatrixWorld(true);\n\n      rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n\n      rendererUSDZ.domElement.addEventListener(\"pointerup\", this.flipFace);\n      window.addEventListener(\"resize\", this.onWindowResize);\n      window.addEventListener(\"orientationchange\", this.onWindowResize);\n      this.onWindowResize();\n    },\n    onWindowResize: function () {\n      const canvas = rendererUSDZ.domElement;\n      cameraUSDZ.aspect = canvas.clientWidth / canvas.clientHeight;\n      cameraUSDZ.updateProjectionMatrix();\n      rendererUSDZ.setSize(canvas.clientWidth, canvas.clientHeight);\n      // renderer.setViewport(0, 0, window.innerWidth, window.innerHeight);\n      rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n    },\n    flipFace: function (event) {\n      let canvasBounds = rendererUSDZ.context.canvas.getBoundingClientRect();\n      let x =\n        ((event.clientX - canvasBounds.left) /\n          (canvasBounds.right - canvasBounds.left)) *\n          2 -\n        1;\n      let y =\n        -(\n          (event.clientY - canvasBounds.top) /\n          (canvasBounds.bottom - canvasBounds.top)\n        ) *\n          2 +\n        1;\n      raycaster.setFromCamera(new THREE.Vector2(x, y), cameraUSDZ);\n      var intersectedObject = raycaster.intersectObjects(sceneUSDZ.children)[0];\n      if (intersectedObject != undefined) {\n        if (intersectedObject.object.type === \"LineSegments\") {\n          let renderOrder = intersectedObject.object.parent.renderOrder;\n          let lineRenderOrder = intersectedObject.object.renderOrder;\n          intersectedObject.object.parent.geometry.index.array =\n            intersectedObject.object.parent.geometry.index.array.reverse();\n          intersectedObject.object.parent.geometry.index.needsUpdate = true;\n          intersectedObject.object.renderOrder = lineRenderOrder;\n          intersectedObject.object.parent.renderOrder = renderOrder;\n        } else {\n          let renderOrder = intersectedObject.object.renderOrder;\n          intersectedObject.object.geometry.index.array =\n            intersectedObject.object.geometry.index.array.reverse();\n          intersectedObject.object.geometry.index.needsUpdate = true;\n          intersectedObject.object.renderOrder = renderOrder;\n        }\n      }\n      rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n    },\n    animtateSceneUSDZ: function () {\n      const delta = clock.getDelta();\n      let hasCameraControlsUpdated = cameraControls.update(delta);\n\n      requestAnimationFrame(this.animtateSceneUSDZ);\n      if (hasCameraControlsUpdated) {\n        rendererUSDZ.render(sceneUSDZ, cameraUSDZ);\n      }\n    },\n    exportToUSDZ: async function () {\n      sceneExport = new THREE.Scene();\n      const group = new THREE.Group();\n      let geometries = [];\n      let uvs = [];\n\n      //potentially UVs could be kept by scaling and ofsetting\n      //https://stackoverflow.com/questions/23530449/rotate-scale-and-translate-2d-coordinates\n\n      for (let o = 0; o < sceneUSDZ.children.length; o++) {\n        const obj = sceneUSDZ.children[o];\n        if (obj.material?.type === \"MeshBasicMaterial\") {\n          let newObj = obj.clone();\n          newObj.material = new THREE.MeshStandardMaterial({\n            color: obj.material.color,\n          });\n          if (\n            this.mergeLines === true &&\n            obj.geometry?.type === \"TubeBufferGeometry\"\n          ) {\n            //these are strokes\n            let geometry = obj.geometry;\n            geometries.push(geometry);\n\n            let uv = Array.from(obj.geometry.attributes.uv.array);\n            uvs.push(uv);\n          } else {\n            //these are fills\n            sceneExport.add(newObj);\n          }\n        }\n      }\n\n      if (geometries.length > 0) {\n        const material = new THREE.MeshStandardMaterial({\n          color: 0x1c1c1e,\n          flatShading: true,\n        });\n        const mergedGeometry = mergeBufferGeometries(geometries, false);\n\n        const cells = Math.ceil(Math.sqrt(uvs.length));\n        const offset = 1 / cells;\n        let count = 0;\n\n        console.log({ uvs_length: uvs.length, cells: cells, offset: offset });\n\n        for (let y = 0; y < cells; y++) {\n          for (let x = 0; x < cells; x++) {\n            let i = count;\n            if (i > uvs.length - 1) {\n              continue;\n            } else {\n              for (let z = 0; z < uvs[i].length; z = z + 2) {\n                uvs[i][z] = uvs[i][z] + (x / offset) * offset;\n                uvs[i][z + 1] = uvs[i][z + 1] + (y / offset) * offset;\n              }\n              count++;\n            }\n          }\n        }\n\n        let mergedUvs = [].concat.apply([], uvs);\n        for (let a = 0; a < mergedUvs.length; a++) {\n          mergedUvs[a] = mergedUvs[a] * offset;\n        }\n        mergedGeometry.setAttribute(\n          \"uv\",\n          new THREE.Float32BufferAttribute(mergedUvs, 2)\n        );\n        mergedGeometry.attributes.uv.needsUpdate = true;\n\n        const mesh = new THREE.Mesh(mergedGeometry, material);\n\n        sceneExport.add(mesh);\n        group.add(mesh);\n        sceneExport.add(group);\n      }\n\n      const exporter = new USDZExporter();\n      const arraybuffer = await exporter.parse(sceneExport);\n      const blob = new Blob([arraybuffer], {\n        type: \"application/octet-stream\",\n      });\n      var el = document.createElement(\"a\");\n      el.setAttribute(\"href\", URL.createObjectURL(blob));\n      el.setAttribute(\"download\", \"sketch.usdz\");\n      el.click();\n    },\n    clear: function (obj) {\n      while (obj.children.length > 0) {\n        this.clear(obj.children[0]);\n        obj.remove(obj.children[0]);\n      }\n      if (obj.geometry) obj.geometry.dispose();\n\n      if (obj.material) {\n        Object.keys(obj.material).forEach((prop) => {\n          if (!obj.material[prop]) return;\n          if (\n            obj.material[prop] !== null &&\n            typeof obj.material[prop].dispose === \"function\"\n          )\n            obj.material[prop].dispose();\n        });\n        obj.material.dispose();\n      }\n    },\n  },\n  mounted() {\n    this.previewUSDZ();\n    this.animtateSceneUSDZ();\n    const canvas = rendererUSDZ.domElement;\n    rendererUSDZ.setSize(canvas.clientWidth, canvas.clientHeight);\n  },\n  unmounted() {\n    this.clear(sceneUSDZ);\n    this.clear(sceneExport);\n  },\n};\n</script>\n\n<style scoped>\n.row {\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  width: 100%;\n  padding-top: 1em;\n  padding-bottom: 1em;\n}\n\n@media (orientation: portrait) {\n  .row {\n    flex-direction: column;\n  }\n\n  #usdz-options {\n    padding-left: 0px;\n  }\n}\n\n@media (orientation: landscape) {\n  #usdz-options {\n    padding-left: 16px;\n  }\n}\n\n.column {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  /* flex-basis: 100%; */\n}\n\n#usdz-canvas {\n  position: relative;\n  top: 0;\n  width: 95%;\n  height: 100%;\n}\n\n.canvas-instructions {\n  position: relative;\n  top: 0.5em;\n  text-align: center;\n  width: 90%;\n  margin-bottom: 1em;\n}\n\ninput > label {\n  text-indent: 1.25em;\n}\n\nlabel {\n  margin-left: 0.25em;\n  font-weight: 900;\n}\n\nlabel > p {\n  margin-left: 1em;\n  margin-top: 0.5em;\n  font-size: 1em;\n}\n\nh1 {\n  font-size: 2em;\n  display: inline;\n}\n\nh1 > h2 {\n  display: inline;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.5em;\n  margin-top: 1em;\n}\n\nbutton {\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  width: 50%;\n  padding-left: 16px;\n  padding-right: 16px;\n  border: 1px solid #ffb000;\n  border-radius: 8px;\n  margin-top: 1.5em;\n}\n</style>","import { render } from \"./ExportForProcreate.vue?vue&type=template&id=d410ddd2&scoped=true\"\nimport script from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\nexport * from \"./ExportForProcreate.vue?vue&type=script&lang=js\"\n\nimport \"./ExportForProcreate.vue?vue&type=style&index=0&id=d410ddd2&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d410ddd2\"]])\n\nexport default __exports__","\n<template>\n  <div>\n    <p class=\"self-destruct\">\n      This tutorial will self-destruct\n      {{ 4 - count === 0 ? \"the next\" : \"in \" + countDown + \"\" }}\n      {{ 4 - count > 1 ? \"sessions\" : \"session\" }}.\n    </p>\n    <h1>A quick intro to Penzil v 0.2</h1>\n\n    <p>\n      Penzil is a web application for sketching in 3d. It is primarily designed\n      for touch screens but it works on desktop as well (although, if you are on\n      desktop, I recommend you look into\n      <a href=\"https://www.youtube.com/watch?v=c57qq2nE3B0\" target=\"_blank\"\n        >Blender's Grease Pencil</a\n      >).\n    </p>\n    <p>\n      In Penzil, you draw on a \"3d canvas\". The \"3d canvas\" is the white surface\n      at the center of the screen. You can only draw on the canvas. By moving\n      and rotating the canvas around, you can sketch in 3d.\n    </p>\n    <h2>Drawing and erasing</h2>\n    <p>\n      You can draw and erase with the left mouse button, finger or pen on top of\n      the \"3d canvas\".\n    </p>\n    <p>\n      Switch between drawing and erasing using the bar at the top of the screen.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/yeyGktOCNfk\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>Rotate or move the 3d canvas</h2>\n    <p>\n      You can move the \"3d canvas\" by grabbing the arrow heads at the center of\n      the \"3d canvas\". You can rotate the \"3d canvas\" by grabbing the arcs. You\n      grab arrow heads and arcs simply by tapping on them or clicking with the\n      left mouse and dragging.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/sPfi9Alqugk\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>Look around and pan</h2>\n    <p>\n      You can look around using two fingers, using a trackpad, a trackball or by\n      pressing the Option key (\"Alt\") and using the left mouse button. You can\n      pan by swiping with three fingers or by pressing the spacebar and clicking\n      with the left button.<br />You can also use the cube in the top right\n      corner to look around. To position the camera precisely, tap on any of the\n      faces of the cube.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/ON1rNnmjKbQ\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>\"3d canvas\" shapes</h2>\n    <p>\n      Penzil comes with several \"3d canvas\" shapes. The default one is a flat\n      plane but you can also pick: a cube, a cylinder, a sphere and a simplified\n      head model. They all behave the same: draw on them and your lines will\n      stick to the surface of the \"3d canvas\".\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/iwI_lWCxttE\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>\"3d canvas\" settings</h2>\n    <p>\n      There are several settings available for the \"3d canvas\". Most are\n      self-explanatory: you can lock and unlock the movement of the \"3d canvas\"\n      and you can show or hide it. But you can also switch the transformation\n      tools between Move and Scale.<br />The Scale tool allows you to resize the\n      \"3d canvas\". Note that depth transformations are not availalbe for flat\n      surfaceses like the plane.<br />The snap toggle allows you to turn on or\n      off snapping. The snapping allows you to move and rotate the \"3d canvas\"\n      in fixed increments.<br />Finally the reset button resets all the\n      transformations applies to the \"3d canvas\".\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/cXAbjI5YEM0\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n\n    <h2>Stroke and fill settings</h2>\n    <p>\n      The round icon next to the draw tool at the top allows you to change the\n      size and the color of the stroke, and the color of fill. Stroke and fill\n      can also be toggled on independently.\n      <br />When using fill, note that results may vary when drawing on surfaces\n      that are not flat. To improve quality of the fill, try to draw the same\n      shape but slower.\n    </p>\n\n    <div class=\"container\">\n      <iframe\n        src=\"https://www.youtube.com/embed/8A0j1mu0i_Y\"\n        title=\"YouTube video player\"\n        frameborder=\"0\"\n        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n        class=\"video\"\n      ></iframe>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Tutorial\",\n  data() {\n    return {\n      count: 0,\n      countDown: 0,\n    };\n  },\n  mounted() {\n    if (localStorage.getItem(\"tut01\") === null) {\n      this.count = 0;\n    } else {\n      this.count = parseInt(window.localStorage.tut02);\n    }\n    this.countDown = -(this.count - 4);\n  },\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  max-width: 95%;\n  height: calc(100% + 1px);\n}\n\nh1 {\n  font-size: 2em;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.6em;\n}\n\n.self-destruct {\n  font-size: 16px;\n  background-color: #ffe8b3;\n  width: 100%;\n  padding-left: 8px;\n}\n\n.container {\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-bottom: 56.25%;\n}\n\n.video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>","import { render } from \"./Tutorial.vue?vue&type=template&id=6ea82b80&scoped=true\"\nimport script from \"./Tutorial.vue?vue&type=script&lang=js\"\nexport * from \"./Tutorial.vue?vue&type=script&lang=js\"\n\nimport \"./Tutorial.vue?vue&type=style&index=0&id=6ea82b80&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6ea82b80\"]])\n\nexport default __exports__","<template>\n  <div>\n    <iframe\n      src=\"https://docs.google.com/forms/d/e/1FAIpQLSccJWlem-HLrgscUJLXLqKpFXOC3LnDkUUJOoF7Saxrq3gNKQ/viewform?embedded=true\"\n      width=\"100%\"\n      height=\"2478\"\n      frameborder=\"0\"\n      marginheight=\"0\"\n      marginwidth=\"0\"\n      >Loading</iframe\n    >\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Survey\",\n  data() {\n    return {};\n  },\n  mounted() {},\n};\n</script>\n\n<style scoped>\ndiv {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  max-width: 95%;\n  height: calc(100% + 1px);\n}\n\nh1 {\n  font-size: 40px;\n}\n\nh2 {\n  font-size: 18px;\n  line-height: 120%;\n}\n\np {\n  font-size: 16px;\n  font-weight: 500;\n  line-height: 1.6em;\n}\n\n.self-destruct {\n  font-size: 16px;\n  background-color: #ffe8b3;\n  width: 100%;\n  padding-left: 8px;\n}\n\n.container {\n  position: relative;\n  width: 100%;\n  height: 0;\n  padding-bottom: 56.25%;\n}\n\n.video {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n}\n</style>\n","import { render } from \"./Survey.vue?vue&type=template&id=57022cc6&scoped=true\"\nimport script from \"./Survey.vue?vue&type=script&lang=js\"\nexport * from \"./Survey.vue?vue&type=script&lang=js\"\n\nimport \"./Survey.vue?vue&type=style&index=0&id=57022cc6&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-57022cc6\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"brush-library\">\r\n    <h2>Brush Library</h2>\r\n    <div class=\"presets\">\r\n      <div class=\"preset\" @click=\"selectPreset('pencil')\">\r\n        <div class=\"icon\"></div>\r\n        <div class=\"info\">\r\n          <h3>Pencil</h3>\r\n          <p>Fine lines for sketching.</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"preset\" @click=\"selectPreset('pen')\">\r\n        <div class=\"icon\"></div>\r\n        <div class=\"info\">\r\n          <h3>Pen</h3>\r\n          <p>Clean lines for inking.</p>\r\n        </div>\r\n      </div>\r\n      <div class=\"preset\" @click=\"selectPreset('marker')\">\r\n        <div class=\"icon\"></div>\r\n        <div class=\"info\">\r\n          <h3>Marker</h3>\r\n          <p>Thick lines for coloring.</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"BrushLibrary\",\r\n  emits: [\"set-preset\"],\r\n  methods: {\r\n    selectPreset(type) {\r\n      let settings = {};\r\n      switch (type) {\r\n        case \"pencil\":\r\n          settings = {\r\n            strokeWidth: 2,\r\n            strokeColor: { r: 50, g: 50, b: 50 },\r\n            stroke: true,\r\n            fill: false\r\n          };\r\n          break;\r\n        case \"pen\":\r\n          settings = {\r\n            strokeWidth: 5,\r\n            strokeColor: { r: 0, g: 0, b: 0 },\r\n            stroke: true,\r\n            fill: false\r\n          };\r\n          break;\r\n        case \"marker\":\r\n          settings = {\r\n            strokeWidth: 20,\r\n            strokeColor: { r: 255, g: 0, b: 0 }, // Red marker by default? Or maybe blue?\r\n            stroke: true,\r\n            fill: false\r\n          };\r\n          break;\r\n      }\r\n      this.$emit(\"set-preset\", settings);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.brush-library {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 16px;\r\n  width: 100%;\r\n}\r\n\r\n.presets {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n}\r\n\r\n.preset {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 16px;\r\n  padding: 12px;\r\n  background-color: #f5f5f5;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.preset:hover {\r\n  background-color: #ffe8b3;\r\n}\r\n\r\n.icon {\r\n  font-size: 2em;\r\n}\r\n\r\n.info h3 {\r\n  margin: 0 0 4px 0;\r\n  font-size: 1.1em;\r\n}\r\n\r\n.info p {\r\n  margin: 0;\r\n  color: #666;\r\n  font-size: 0.9em;\r\n  font-weight: normal;\r\n}\r\n</style>\r\n","import { render } from \"./BrushLibrary.vue?vue&type=template&id=5811f743&scoped=true\"\nimport script from \"./BrushLibrary.vue?vue&type=script&lang=js\"\nexport * from \"./BrushLibrary.vue?vue&type=script&lang=js\"\n\nimport \"./BrushLibrary.vue?vue&type=style&index=0&id=5811f743&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5811f743\"]])\n\nexport default __exports__","import { render } from \"./Modal.vue?vue&type=template&id=320b9c99&scoped=true\"\nimport script from \"./Modal.vue?vue&type=script&lang=js\"\nexport * from \"./Modal.vue?vue&type=script&lang=js\"\n\nimport \"./Modal.vue?vue&type=style&index=0&id=320b9c99&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-320b9c99\"]])\n\nexport default __exports__","\n<template>\n  <div v-if=\"previewing\" class=\"fade\">\n    <div class=\"fade-controls\">\n      <button @click=\"cancel()\">Cancel</button>\n      <span class=\"rightAlign\">\n        <input\n          type=\"radio\"\n          name=\"360\"\n          value=\"360\"\n          id=\"360\"\n          v-model=\"loop\"\n          :disabled=\"recording\"\n        />\n        <label for=\"360\">360</label>\n        <input\n          type=\"radio\"\n          name=\"bf\"\n          value=\"bf\"\n          id=\"bf\"\n          v-model=\"loop\"\n          :disabled=\"recording\"\n        />\n        <label for=\"bf\">Back and forth</label>\n        <button @click=\"startRecording()\" :disabled=\"recording\" style=\"pointer-events: auto; background: rgba(0,0,0,0.1); border: 1px solid #ccc;\">\n          {{ !recording ? \"Start recording\" : \"Recording...\" }}\n        </button>\n      </span>\n      <span v-if=\"recording\"\n        >Recording frame {{ currentLength }} of {{ length }}</span\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as THREE from \"three\";\nimport { renderer, camera, scene, cameraControls } from \"../App.vue\";\nimport * as HME from \"h264-mp4-encoder\";\n\nexport default {\n  name: \"VideoExport\",\n  components: {},\n  data() {\n    return {\n      previewing: false,\n      recording: false,\n      loop: \"360\",\n      length: 240, //in frames\n      currentLength: 0, //current frame\n      startAzimuthAngle: undefined,\n      polarAngle: undefined,\n      pos: [],\n    };\n  },\n  emits: [\"stop-previewing\"],\n  props: {\n    show: Boolean,\n  },\n  methods: {\n    easeInOutQuad(t, b, c, d) {\n      t /= d / 2;\n      if (t < 1) return (c / 2) * t * t + b;\n      t--;\n      return (-c / 2) * (t * (t - 2) - 1) + b;\n    },\n    easeInOutQuadYoyo(t, b, c, d) {\n      if (t <= d / 2) {\n        this.pos.push(this.easeInOutQuad(t, b, c, d / 2));\n        let v = this.pos[this.pos.length - 1];\n        return v;\n      } else {\n        let v = this.pos.pop();\n        return v;\n      }\n    },\n    easing(loop) {\n      //easing function: http://gizma.com/easing/\n      if (loop == \"360\") {\n        return this.easeInOutQuad(\n          this.currentLength,\n          this.startAzimuthAngle,\n          360 * THREE.MathUtils.DEG2RAD,\n          this.length\n        );\n      } else if (loop == \"bf\") {\n        return this.easeInOutQuadYoyo(\n          this.currentLength,\n          this.startAzimuthAngle,\n          Math.PI / 20,\n          this.length\n        );\n      }\n    },\n    animate(ctx, encoder) {\n      if (!this.previewing) {\n        return;\n      }\n      \n      // If we are recording but no encoder is passed, this is the old preview loop. Kill it.\n      if (this.recording && !encoder) {\n          return;\n      }\n\n      renderer.render(scene, camera);\n      let f = this.easing(this.loop);\n      cameraControls.rotateTo(f, this.polarAngle, false);\n      if (!this.recording) {\n        //animate in loop\n        if (this.currentLength < this.length) {\n          requestAnimationFrame(() => this.animate(ctx, encoder));\n          this.currentLength++;\n        } else {\n          this.currentLength = 0;\n          requestAnimationFrame(() => this.animate(ctx, encoder));\n          //cameraControls.enabled = true;\n        }\n      } else {\n        //record and exit\n        //only record after the fist frame, it's needed to let the camera riposition properly\n        if (this.currentLength > 0) {\n          var buf = new Uint8Array(\n            ctx.drawingBufferWidth * ctx.drawingBufferHeight * 4\n          );\n          ctx.readPixels(\n            0,\n            0,\n            ctx.drawingBufferWidth,\n            ctx.drawingBufferHeight,\n            ctx.RGBA,\n            ctx.UNSIGNED_BYTE,\n            buf\n          );\n          var halfHeight = (ctx.drawingBufferHeight / 2) | 0; // the | 0 keeps the result an int\n          var bytesPerRow = ctx.drawingBufferWidth * 4;\n          // make a temp buffer to hold one row\n          var temp = new Uint8Array(ctx.drawingBufferWidth * 4);\n          for (var y = 0; y < halfHeight; ++y) {\n            var topOffset = y * bytesPerRow;\n            var bottomOffset = (ctx.drawingBufferHeight - y - 1) * bytesPerRow;\n            // make copy of a row on the top half\n            temp.set(buf.subarray(topOffset, topOffset + bytesPerRow));\n            // copy a row from the bottom half to the top\n            buf.copyWithin(topOffset, bottomOffset, bottomOffset + bytesPerRow);\n            // copy the copy of the top half row to the bottom half\n            buf.set(temp, bottomOffset);\n          }\n          encoder.addFrameRgba(buf);\n        }\n\n        if (this.currentLength < this.length) {\n          requestAnimationFrame(() => {\n            this.animate(ctx, encoder);\n          });\n          this.currentLength++;\n        } else {\n          encoder.finalize();\n          const uint8Array = encoder.FS.readFile(encoder.outputFilename);\n          this.download(\n            URL.createObjectURL(new Blob([uint8Array], { type: \"video/mp4\" }))\n          );\n          encoder.delete();\n          this.cancel();\n        }\n      }\n    },\n    startRecording() {\n      // Force 1x pixel ratio and even dimensions for recording safety\n      renderer.setPixelRatio(1);\n      const width = window.innerWidth % 2 === 0 ? window.innerWidth : window.innerWidth - 1;\n      const height = window.innerHeight % 2 === 0 ? window.innerHeight : window.innerHeight - 1;\n      renderer.setSize(width, height);\n\n      cameraControls.normalizeRotations();\n      HME.createH264MP4Encoder().then((encoder) => {\n        let ctx = renderer.getContext();\n        encoder.width = ctx.drawingBufferWidth;\n        encoder.height = ctx.drawingBufferHeight;\n        encoder.initialize();\n        this.recording = true;\n        this.currentLength = 0;\n        this.animate(ctx, encoder);\n      });\n    },\n    startPreview() {\n      cameraControls.normalizeRotations();\n      this.startAzimuthAngle = cameraControls.azimuthAngle;\n      this.polarAngle = cameraControls.polarAngle;\n      this.previewing = true;\n      cameraControls.dampingFactor = 0.5;\n      this.animate();\n    },\n    download(url, filename) {\n      const anchor = document.createElement(\"a\");\n      anchor.href = url;\n      anchor.download = filename || \"download\";\n      anchor.click();\n    },\n    cancel: function () {\n      this.previewing = false;\n      this.recording = false;\n      \n      // Restore renderer settings\n      renderer.setPixelRatio(window.devicePixelRatio);\n      window.dispatchEvent(new Event('resize'));\n\n      this.currentLength = 0;\n      this.pos = [];\n      camera.layers.enable(0);\n      this.loop = \"360\";\n      cameraControls.dampingFactor = 0.5;\n      cameraControls.rotateTo(this.startAzimuthAngle, this.polarAngle, true);\n      this.startAzimuthAngle = undefined;\n      this.polarAngle = undefined;\n      // cameraControls.enabled = true;\n      setTimeout(() => {\n        cameraControls.dampingFactor = 20;\n        cameraControls.normalizeRotations();\n      }, 100);\n      renderer.render(scene, camera);\n      this.$emit(\"stop-previewing\", false);\n    },\n  },\n  watch: {\n    show: function (val) {\n      if (val === true) {\n        this.startPreview();\n      }\n    },\n    loop: function () {\n      this.currentLength = 0;\n    },\n  },\n  mounted() {},\n};\n</script>\n\n<style>\n.fade {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.2);\n  z-index: 10;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.fade-controls {\n  background-color: white;\n  color: black;\n  margin: 0 auto;\n  position: absolute;\n  bottom: 0px;\n  padding: 10px;\n  width: 100vw;\n  z-index: 5;\n}\n\n.rightAlign > label {\n  width: 200px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\nbutton {\n  align-content: center;\n  background-color: rgba(0, 0, 0, 0);\n  border: none;\n  height: 44px;\n  padding-left: 16px;\n  padding-right: 16px;\n  margin-right: 2px;\n  cursor: pointer;\n  z-index: 100;\n  position: relative;\n}\n\n.rightAlign {\n  float: right;\n  display: flex;\n}\n</style>","import { render } from \"./VideoExportPreview.vue?vue&type=template&id=5584fdcf\"\nimport script from \"./VideoExportPreview.vue?vue&type=script&lang=js\"\nexport * from \"./VideoExportPreview.vue?vue&type=script&lang=js\"\n\nimport \"./VideoExportPreview.vue?vue&type=style&index=0&id=5584fdcf&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Scene Setup\" \r\n    :initialX=\"window.innerWidth - 240\" \r\n    :initialY=\"400\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :start-open=\"startOpen\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"scene-settings\">\r\n      <!-- Background Settings -->\r\n      <div class=\"group-title\">Background</div>\r\n      <div class=\"setting-row\">\r\n        <span>Color</span>\r\n        <input type=\"color\" v-model=\"backgroundColor\" @input=\"updateBackground\">\r\n      </div>\r\n       <div class=\"setting-row\">\r\n          <span>Fog</span>\r\n          <div class=\"toggle\" @click=\"toggleFog\">\r\n            <img :src=\"fogVisible ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n          </div>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Environment Settings -->\r\n      <div class=\"group-title\">Environment (HDRI)</div>\r\n      <div class=\"setting-row\">\r\n        <span>Image (.hdr, .jpg)</span>\r\n        <label class=\"custom-file-upload\">\r\n            <input type=\"file\" @change=\"handleFileChange\" accept=\".hdr,.jpg,.png,.jpeg\" />\r\n            Upload\r\n        </label>\r\n      </div>\r\n      <div class=\"setting-row\">\r\n        <span>Active (Lighting)</span>\r\n        <div class=\"toggle\" @click=\"toggleHdriActive\">\r\n          <img :src=\"hdriActive ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n        </div>\r\n      </div>\r\n       <div class=\"setting-row\" v-if=\"hdriActive\">\r\n        <span>Visible Background</span>\r\n        <div class=\"toggle\" @click=\"toggleHdriBackground\">\r\n          <img :src=\"hdriBackgroundVisible ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n        </div>\r\n      </div>\r\n\r\n       <div class=\"separator\"></div>\r\n\r\n\r\n\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Grid Settings -->\r\n      <div class=\"group-title\">Grid</div>\r\n      <div class=\"setting-row\">\r\n        <span>Visible</span>\r\n        <div class=\"toggle\" @click=\"toggleGrid\">\r\n          <img :src=\"gridVisible ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n        </div>\r\n      </div>\r\n       <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Color</span>\r\n        <input type=\"color\" v-model=\"gridColor\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Size</span>\r\n        <input type=\"range\" min=\"1\" max=\"100\" v-model.number=\"gridSize\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Divisions</span>\r\n        <input type=\"range\" min=\"1\" max=\"50\" v-model.number=\"gridDivisions\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\" v-if=\"gridVisible\">\r\n        <span>Divisions Color</span>\r\n        <input type=\"color\" v-model=\"divisionsColor\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\">\r\n        <span>Fade Dist</span>\r\n        <input type=\"range\" min=\"10\" max=\"2000\" v-model.number=\"fadeDistance\" @input=\"updateGrid\">\r\n      </div>\r\n      <div class=\"setting-row\">\r\n        <span>Fade Near</span>\r\n        <input type=\"range\" min=\"0\" max=\"1000\" v-model.number=\"fadeDistanceNear\" @input=\"updateGrid\">\r\n      </div>\r\n\r\n      <div class=\"setting-row\">\r\n          <span>Infinite</span>\r\n          <div class=\"toggle\" @click=\"toggleInfiniteGrid\">\r\n            <img :src=\"infiniteGrid ? require('@/assets/icons/checkbox-checked.svg') : require('@/assets/icons/checkbox.svg')\" />\r\n          </div>\r\n      </div>\r\n\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\nimport * as THREE from \"three\";\r\nimport { RGBELoader } from \"three/examples/jsm/loaders/RGBELoader.js\";\r\nimport { scene, renderer, camera } from \"../App.vue\";\r\n// import { canvas } from \"./Canvas.vue\";\r\nimport InfiniteGridHelper from \"./InfiniteGridHelper.js\";\r\n\r\nexport default {\r\n  name: \"SceneSettings\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\"],\r\n  data() {\r\n    return {\r\n      window: window,\r\n      backgroundColor: \"#dddddd\",\r\n      gridVisible: true,\r\n      gridColor: \"#0000ff\",\r\n      gridSize: 10,\r\n      gridDivisions: 10,\r\n      infiniteGrid: true,\r\n      fadeDistance: 400,\r\n      fadeDistanceNear: 0,\r\n      divisionsColor: \"#ff0000\",\r\n      fogVisible: true,\r\n      hdriActive: false,\r\n      hdriBackgroundVisible: false,\r\n      sceneEnvironment: null,\r\n    };\r\n  },\r\n  created() {\r\n    this.gridHelper = null;\r\n    this.infiniteGridHelper = null;\r\n  },\r\n  methods: {\r\n    updateBackground() {\r\n      if (scene) {\r\n        if (this.hdriActive && this.hdriBackgroundVisible && this.sceneEnvironment) {\r\n             scene.background = this.sceneEnvironment;\r\n        } else {\r\n             scene.background = new THREE.Color(this.backgroundColor);\r\n        }\r\n        this.updateFog();\r\n        renderer.render(scene, camera);\r\n      }\r\n    },\r\n    updateFog() {\r\n        if (!scene) return;\r\n        if (this.fogVisible) {\r\n            scene.fog = new THREE.Fog(this.backgroundColor, this.fadeDistanceNear + 10, this.fadeDistance);\r\n        } else {\r\n            scene.fog = null;\r\n        }\r\n    },\r\n    toggleGrid() {\r\n        this.gridVisible = !this.gridVisible;\r\n        this.updateGrid();\r\n    },\r\n    toggleInfiniteGrid() {\r\n        this.infiniteGrid = !this.infiniteGrid;\r\n        this.updateGrid();\r\n    },\r\n    toggleFog() {\r\n        this.fogVisible = !this.fogVisible;\r\n        this.updateFog();\r\n        renderer.render(scene, camera);\r\n    },\r\n    updateGrid() {\r\n        if (!scene) return;\r\n\r\n        this.updateFog(); // Update fog when grid settings (like fade distance) change\r\n\r\n        // Remove existing grids\r\n        if (this.gridHelper) {\r\n            scene.remove(this.gridHelper);\r\n            this.gridHelper = null;\r\n        }\r\n        if (this.infiniteGridHelper) {\r\n            scene.remove(this.infiniteGridHelper);\r\n            this.infiniteGridHelper = null;\r\n        }\r\n\r\n        if (!this.gridVisible) {\r\n          renderer.render(scene, camera);\r\n          return;\r\n        }\r\n\r\n        if (this.infiniteGrid) {\r\n             // Pass divisionsColor as the second color (for large grid)\r\n             this.infiniteGridHelper = new InfiniteGridHelper(\r\n                 this.gridSize/10, \r\n                 this.gridDivisions, \r\n                 new THREE.Color(this.gridColor), \r\n                 this.fadeDistance,\r\n                 'xzy',\r\n                 new THREE.Color(this.divisionsColor),\r\n                 this.fadeDistanceNear\r\n             );\r\n             scene.add(this.infiniteGridHelper);\r\n        } else {\r\n             this.gridHelper = new THREE.GridHelper(\r\n                 this.gridSize * 10, \r\n                 this.gridDivisions * 10, \r\n                 new THREE.Color(this.divisionsColor), \r\n                 new THREE.Color(this.gridColor)\r\n             );\r\n             scene.add(this.gridHelper);\r\n        }\r\n        renderer.render(scene, camera);\r\n    },\r\n\r\n\r\n    handleFileChange(event) {\r\n      const file = event.target.files[0];\r\n      if (!file) return;\r\n\r\n      const url = URL.createObjectURL(file);\r\n      const isHDR = file.name.toLowerCase().endsWith('.hdr');\r\n\r\n      if (isHDR) {\r\n        new RGBELoader()\r\n            .setDataType( THREE.UnsignedByteType ) // Depending on three version, might not be needed or might be FloatType\r\n            .load(url, (texture) => {\r\n                const pmremGenerator = new THREE.PMREMGenerator(renderer);\r\n                pmremGenerator.compileEquirectangularShader();\r\n                const envMap = pmremGenerator.fromEquirectangular(texture).texture;\r\n                \r\n                this.sceneEnvironment = envMap;\r\n                this.hdriActive = true; \r\n                this.updateEnvironment();\r\n                \r\n                texture.dispose();\r\n                pmremGenerator.dispose();\r\n            });\r\n      } else {\r\n          new THREE.TextureLoader().load(url, (texture) => {\r\n                texture.mapping = THREE.EquirectangularReflectionMapping;\r\n                this.sceneEnvironment = texture;\r\n                this.hdriActive = true;\r\n                this.updateEnvironment();\r\n          });\r\n      }\r\n    },\r\n    toggleHdriActive() {\r\n        this.hdriActive = !this.hdriActive;\r\n        this.updateEnvironment();\r\n    },\r\n    toggleHdriBackground() {\r\n        this.hdriBackgroundVisible = !this.hdriBackgroundVisible;\r\n        this.updateBackground();\r\n    },\r\n    updateEnvironment() {\r\n        if (!scene) return;\r\n\r\n        if (this.hdriActive && this.sceneEnvironment) {\r\n            scene.environment = this.sceneEnvironment;\r\n        } else {\r\n            scene.environment = null;\r\n        }\r\n        this.updateBackground();\r\n    }\r\n  },\r\n  mounted() {\r\n      // Initialize with existing scene state if possible, or defaults\r\n      this.updateGrid();\r\n  },\r\n  beforeUnmount() {\r\n      if (this.gridHelper) scene.remove(this.gridHelper);\r\n      if (this.infiniteGridHelper) scene.remove(this.infiniteGridHelper);\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.scene-settings {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  color: white;\r\n  min-width: 200px;\r\n}\r\n\r\n.group-title {\r\n  font-size: 10px;\r\n  text-transform: uppercase;\r\n  opacity: 0.6;\r\n  font-weight: bold;\r\n  letter-spacing: 1px;\r\n}\r\n\r\n.setting-row {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  font-size: 13px;\r\n}\r\n\r\n.setting-row input[type=\"color\"] {\r\n  border: none;\r\n  width: 24px;\r\n  height: 24px;\r\n  padding: 0;\r\n  background: none;\r\n  cursor: pointer;\r\n}\r\n\r\n.setting-row input[type=\"range\"] {\r\n  width: 100px;\r\n  height: 4px;\r\n  -webkit-appearance: none;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 2px;\r\n  outline: none;\r\n}\r\n\r\n.setting-row input[type=\"range\"]::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.toggle {\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.toggle img {\r\n    width: 20px;\r\n    height: 20px;\r\n    filter: brightness(0) invert(1);\r\n}\r\n\r\n.separator {\r\n  height: 1px;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  width: 100%;\r\n}\r\n\r\n.custom-file-upload {\r\n    border: 1px solid rgba(255, 255, 255, 0.2);\r\n    display: inline-block;\r\n    padding: 2px 6px;\r\n    cursor: pointer;\r\n    border-radius: 4px;\r\n    font-size: 11px;\r\n    background: rgba(255, 255, 255, 0.05);\r\n}\r\n\r\n.custom-file-upload:hover {\r\n    background: rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.custom-file-upload input[type=\"file\"] {\r\n    display: none;\r\n}\r\n</style>\r\n","import { render } from \"./SceneSettings.vue?vue&type=template&id=5736386b&scoped=true\"\nimport script from \"./SceneSettings.vue?vue&type=script&lang=js\"\nexport * from \"./SceneSettings.vue?vue&type=script&lang=js\"\n\nimport \"./SceneSettings.vue?vue&type=style&index=0&id=5736386b&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5736386b\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Colores\" \r\n    :initialX=\"window.innerWidth - 550\" \r\n    :initialY=\"160\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :start-open=\"startOpen\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"color-palette\">\r\n      <div v-for=\"(group, index) in colorGroups\" :key=\"index\" class=\"color-group\">\r\n        <div class=\"group-title\">{{ group.name }}</div>\r\n        <div class=\"colors-grid\">\r\n          <div \r\n            v-for=\"color in group.colors\" \r\n            :key=\"color.name\"\r\n            class=\"color-item\"\r\n            :style=\"{ backgroundColor: color.hex }\"\r\n            @click=\"selectColor(color)\"\r\n            :title=\"color.name\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"ColorPalette\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    startOpen: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"set-color\", \"close\"],\r\n  data() {\r\n    return {\r\n      window: window,\r\n      colorGroups: [\r\n        {\r\n          name: \"GRIS CLARO  Volmenes iniciales\",\r\n          colors: [\r\n            { name: \"Gris Muy Claro\", hex: \"#F5F5F5\" },\r\n            { name: \"Gris Claro\", hex: \"#E6E6E6\" },\r\n            { name: \"Gris Clido Claro\", hex: \"#E8E2DC\" },\r\n            { name: \"Gris Neutro Suave\", hex: \"#E1E1E1\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"GRIS MEDIO  Sombras principales\",\r\n          colors: [\r\n            { name: \"Gris Medio\", hex: \"#C8C8C8\" },\r\n            { name: \"Gris Medio Clido\", hex: \"#CEC6BC\" },\r\n            { name: \"Gris 3040%\", hex: \"#B4B4B4\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"GRIS OSCURO  Contraste\",\r\n          colors: [\r\n            { name: \"Gris Oscuro\", hex: \"#828282\" },\r\n            { name: \"Gris Muy Oscuro\", hex: \"#5A5A5A\" },\r\n            { name: \"Gris Oscuro Clido\", hex: \"#6E665F\" },\r\n            { name: \"Gris 70%\", hex: \"#646464\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"NEGRO  Detalles finales\",\r\n          colors: [\r\n            { name: \"Negro trazado\", hex: \"#000000\" },\r\n            { name: \"Negro suave\", hex: \"#141414\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"ACENTOS DE COLOR\",\r\n          colors: [\r\n            { name: \"Azul Tcnico Claro\", hex: \"#ADD8E6\" },\r\n            { name: \"Azul Tcnico Medio\", hex: \"#6495ED\" },\r\n            { name: \"Azul Conceptual\", hex: \"#4682B4\" },\r\n            { name: \"Rojo Claro\", hex: \"#FF6347\" },\r\n            { name: \"Rojo Industrial\", hex: \"#DC143C\" },\r\n            { name: \"Naranja Industrial\", hex: \"#FF8C00\" },\r\n          ]\r\n        },\r\n        {\r\n          name: \"BLANCO  Highlights\",\r\n          colors: [\r\n            { name: \"Blanco puro\", hex: \"#FFFFFF\" },\r\n            { name: \"Blanco suave\", hex: \"#FAFAFA\" },\r\n          ]\r\n        }\r\n      ]\r\n    };\r\n  },\r\n  methods: {\r\n    selectColor(color) {\r\n      // Convert hex to rgb object for the app\r\n      const rgb = this.hexToRgb(color.hex);\r\n      this.$emit(\"set-color\", rgb);\r\n    },\r\n    hexToRgb(hex) {\r\n      var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\r\n      return result ? {\r\n        r: parseInt(result[1], 16),\r\n        g: parseInt(result[2], 16),\r\n        b: parseInt(result[3], 16)\r\n      } : null;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.color-palette {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 12px;\r\n  color: white;\r\n  min-width: 280px;\r\n}\r\n\r\n.group-title {\r\n  font-size: 10px;\r\n  text-transform: uppercase;\r\n  opacity: 0.6;\r\n  font-weight: bold;\r\n  letter-spacing: 1px;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.colors-grid {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 8px;\r\n}\r\n\r\n.color-item {\r\n  width: 32px;\r\n  height: 32px;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  transition: transform 0.1s, border-color 0.1s;\r\n}\r\n\r\n.color-item:hover {\r\n  transform: scale(1.1);\r\n  border-color: white;\r\n  z-index: 1;\r\n}\r\n\r\n.color-item:active {\r\n  transform: scale(0.95);\r\n}\r\n</style>\r\n","import { render } from \"./ColorPalette.vue?vue&type=template&id=1576e0cc&scoped=true\"\nimport script from \"./ColorPalette.vue?vue&type=script&lang=js\"\nexport * from \"./ColorPalette.vue?vue&type=script&lang=js\"\n\nimport \"./ColorPalette.vue?vue&type=style&index=0&id=1576e0cc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-1576e0cc\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Symmetry\" \r\n    :initialX=\"12\" \r\n    :initialY=\"680\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"symmetry-controls\">\r\n      <div class=\"symmetry-options\">\r\n        <button \r\n          class=\"symmetry-btn\"\r\n          :class=\"{ active: isAxisActive('x') }\"\r\n          @click=\"toggleAxis('x')\"\r\n        >\r\n          <span>X</span>\r\n        </button>\r\n        <button \r\n          class=\"symmetry-btn\"\r\n          :class=\"{ active: isAxisActive('y') }\"\r\n          @click=\"toggleAxis('y')\"\r\n        >\r\n          <span>Y</span>\r\n        </button>\r\n        <button \r\n          class=\"symmetry-btn\"\r\n          :class=\"{ active: isAxisActive('z') }\"\r\n          @click=\"toggleAxis('z')\"\r\n        >\r\n          <span>Z</span>\r\n        </button>\r\n      </div>\r\n      \r\n      <div class=\"symmetry-row\" v-if=\"(typeof mirror === 'string' && mirror.length > 0) || radial\">\r\n        <label class=\"toggle-control\">\r\n            <input type=\"checkbox\" :checked=\"localSymmetry\" @change=\"toggleLocal\">\r\n            Local Symmetry\r\n            <span class=\"info-icon\" title=\"Symmetry relative to the Canvas instead of World Origin\">?</span>\r\n        </label>\r\n      </div>\r\n      \r\n      <div class=\"radial-section\">\r\n        <label class=\"radial-toggle\">\r\n            <input type=\"checkbox\" :checked=\"radial\" @change=\"toggleRadial\">\r\n            Radial\r\n        </label>\r\n        \r\n        <div class=\"symmetry-options\" v-if=\"radial\">\r\n            <button \r\n              class=\"symmetry-btn small\"\r\n              :class=\"{ active: radialAxis === 'x' }\"\r\n              @click=\"setRadialAxis('x')\"\r\n            >\r\n              <span>X</span>\r\n            </button>\r\n            <button \r\n              class=\"symmetry-btn small\"\r\n              :class=\"{ active: radialAxis === 'y' }\"\r\n              @click=\"setRadialAxis('y')\"\r\n            >\r\n              <span>Y</span>\r\n            </button>\r\n            <button \r\n              class=\"symmetry-btn small\"\r\n              :class=\"{ active: radialAxis === 'z' }\"\r\n              @click=\"setRadialAxis('z')\"\r\n            >\r\n              <span>Z</span>\r\n            </button>\r\n        </div>\r\n\r\n        <div class=\"sectors-control\" v-if=\"radial\">\r\n            <span>{{ sectors }}</span>\r\n            <input \r\n                type=\"range\" \r\n                min=\"2\" \r\n                max=\"36\" \r\n                step=\"1\" \r\n                :value=\"sectors\" \r\n                @input=\"updateSectors\"\r\n            >\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"SymmetrySettings\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n    mirror: [Boolean, String],\r\n    radial: Boolean,\r\n    sectors: Number,\r\n    radialAxis: {\r\n        type: String,\r\n        default: 'y'\r\n    },\r\n    localSymmetry: Boolean\r\n  },\r\n  emits: [\"set-mirror\", \"set-radial\", \"set-sectors\", \"set-radial-axis\", \"set-local-symmetry\", \"close\"],\r\n  methods: {\r\n    toggleAxis(axis) {\r\n      let current = typeof this.mirror === 'string' ? this.mirror : \"\";\r\n      if (current.includes(axis)) {\r\n          current = current.replace(axis, \"\");\r\n      } else {\r\n          current += axis;\r\n      }\r\n      this.$emit(\"set-mirror\", current);\r\n    },\r\n    isAxisActive(axis) {\r\n      return typeof this.mirror === 'string' && this.mirror.includes(axis);\r\n    },\r\n    toggleLocal(e) {\r\n      this.$emit(\"set-local-symmetry\", e.target.checked);\r\n    },\r\n    toggleRadial(e) {\r\n      this.$emit(\"set-radial\", e.target.checked);\r\n    },\r\n    updateSectors(e) {\r\n      this.$emit(\"set-sectors\", parseInt(e.target.value));\r\n    },\r\n    setRadialAxis(val) {\r\n      this.$emit(\"set-radial-axis\", val);\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.symmetry-controls {\r\n  padding: 8px;\r\n  background: rgba(30, 30, 30, 0.8);\r\n  border-radius: 8px;\r\n}\r\n\r\n.symmetry-options {\r\n  display: flex;\r\n  gap: 8px;\r\n}\r\n\r\n.symmetry-btn {\r\n  width: 40px;\r\n  height: 40px;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 8px;\r\n  color: white;\r\n  font-weight: 600;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.symmetry-btn:hover {\r\n  background: rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.symmetry-btn.active {\r\n  background: var(--accent-color, #ffb000);\r\n  border-color: var(--accent-color, #ffb000);\r\n  color: black;\r\n}\r\n\r\n.radial-section {\r\n    margin-top: 12px;\r\n    border-top: 1px solid rgba(255,255,255,0.1);\r\n    padding-top: 12px;\r\n    color: white;\r\n    font-size: 12px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.radial-toggle, .toggle-control {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    cursor: pointer;\r\n}\r\n\r\n.symmetry-row {\r\n    margin-top: 12px;\r\n    padding-top: 8px;\r\n    border-top: 1px solid rgba(255,255,255,0.05);\r\n    color: white;\r\n    font-size: 11px;\r\n}\r\n\r\n.info-icon {\r\n    width: 14px;\r\n    height: 14px;\r\n    background: rgba(255,255,255,0.2);\r\n    border-radius: 50%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 9px;\r\n    margin-left: 4px;\r\n}\r\n\r\n.sectors-control {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.sectors-control input {\r\n    flex: 1;\r\n}\r\n\r\n.symmetry-btn.small {\r\n    width: 30px;\r\n    height: 30px;\r\n    font-size: 10px;\r\n}\r\n</style>\r\n","import { render } from \"./SymmetrySettings.vue?vue&type=template&id=04aa6b76&scoped=true\"\nimport script from \"./SymmetrySettings.vue?vue&type=script&lang=js\"\nexport * from \"./SymmetrySettings.vue?vue&type=script&lang=js\"\n\nimport \"./SymmetrySettings.vue?vue&type=style&index=0&id=04aa6b76&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-04aa6b76\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Layers\" \r\n    :initialX=\"12\" \r\n    :initialY=\"520\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"layers-container\">\r\n      <div class=\"layers-header\">\r\n        <button class=\"layer-btn\" @click=\"addLayer\" title=\"Add Layer\">\r\n          <span>+</span>\r\n        </button>\r\n        <button class=\"layer-btn\" @click=\"deleteLayer\" title=\"Delete Layer\" :disabled=\"layers.length <= 1\">\r\n          <span></span>\r\n        </button>\r\n        <button class=\"layer-btn\" @click=\"duplicateLayer\" title=\"Duplicate Layer\">\r\n          <span></span>\r\n        </button>\r\n      </div>\r\n      \r\n      <div class=\"layers-list\">\r\n        <div \r\n          v-for=\"layer in layers\" \r\n          :key=\"layer.id\"\r\n          class=\"layer-item\"\r\n          :class=\"{ active: layer.id === activeLayerId }\"\r\n          @click=\"selectLayer(layer.id)\"\r\n        >\r\n          <div class=\"layer-visibility\">\r\n            <button \r\n              class=\"visibility-btn\" \r\n              @click.stop=\"toggleVisibility(layer.id)\"\r\n              :class=\"{ hidden: !layer.visible }\"\r\n            >\r\n              {{ layer.visible ? '' : '' }}\r\n            </button>\r\n          </div>\r\n          \r\n          <div class=\"layer-info\">\r\n            <input \r\n              v-if=\"editingLayerId === layer.id\"\r\n              v-model=\"layer.name\"\r\n              @blur=\"stopEditing\"\r\n              @keyup.enter=\"stopEditing\"\r\n              @click.stop\r\n              class=\"layer-name-input\"\r\n              ref=\"nameInput\"\r\n            />\r\n            <span \r\n              v-else\r\n              class=\"layer-name\"\r\n              @dblclick.stop=\"startEditing(layer.id)\"\r\n            >\r\n              {{ layer.name }}\r\n            </span>\r\n          </div>\r\n          \r\n          <div class=\"layer-opacity\">\r\n            <input \r\n              type=\"range\" \r\n              min=\"0\" \r\n              max=\"100\" \r\n              v-model=\"layer.opacity\"\r\n              @input=\"updateLayerOpacity(layer.id, $event.target.value)\"\r\n              @click.stop\r\n              class=\"opacity-slider\"\r\n            />\r\n            <span class=\"opacity-value\">{{ layer.opacity }}%</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\n\r\nexport default {\r\n  name: \"Layers\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\", \"layer-change\", \"layer-add\", \"layer-delete\", \"layer-select\"],\r\n  data() {\r\n    return {\r\n      layers: [\r\n        { id: 1, name: \"Layer 1\", visible: true, opacity: 100, locked: false }\r\n      ],\r\n      activeLayerId: 1,\r\n      nextLayerId: 2,\r\n      editingLayerId: null,\r\n      lockLayers: false,\r\n      mergeOnExport: false,\r\n    };\r\n  },\r\n  methods: {\r\n    addLayer() {\r\n      const newLayer = {\r\n        id: this.nextLayerId++,\r\n        name: `Layer ${this.nextLayerId - 1}`,\r\n        visible: true,\r\n        opacity: 100,\r\n        locked: false\r\n      };\r\n      this.layers.unshift(newLayer);\r\n      this.selectLayer(newLayer.id);\r\n      this.$emit(\"layer-add\", newLayer);\r\n    },\r\n    \r\n    deleteLayer() {\r\n      if (this.layers.length <= 1) return;\r\n      \r\n      const index = this.layers.findIndex(l => l.id === this.activeLayerId);\r\n      if (index !== -1) {\r\n        const deletedLayer = this.layers[index];\r\n        this.layers.splice(index, 1);\r\n        \r\n        // Select the layer below or above\r\n        if (this.layers.length > 0) {\r\n          const newIndex = Math.min(index, this.layers.length - 1);\r\n          this.selectLayer(this.layers[newIndex].id);\r\n        }\r\n        \r\n        this.$emit(\"layer-delete\", deletedLayer);\r\n      }\r\n    },\r\n    \r\n    duplicateLayer() {\r\n      const layer = this.layers.find(l => l.id === this.activeLayerId);\r\n      if (layer) {\r\n        const newLayer = {\r\n          id: this.nextLayerId++,\r\n          name: `${layer.name} Copy`,\r\n          visible: layer.visible,\r\n          opacity: layer.opacity,\r\n          locked: layer.locked\r\n        };\r\n        const index = this.layers.findIndex(l => l.id === this.activeLayerId);\r\n        this.layers.splice(index, 0, newLayer);\r\n        this.selectLayer(newLayer.id);\r\n        this.$emit(\"layer-duplicate\", { newLayer, originalLayerId: layer.id });\r\n        this.$emit(\"layer-add\", newLayer);\r\n      }\r\n    },\r\n    \r\n    selectLayer(layerId) {\r\n      this.activeLayerId = layerId;\r\n      const layer = this.layers.find(l => l.id === layerId);\r\n      this.$emit(\"layer-select\", layer);\r\n    },\r\n    \r\n    toggleVisibility(layerId) {\r\n      const index = this.layers.findIndex(l => l.id === layerId);\r\n      if (index !== -1) {\r\n        const layer = this.layers[index];\r\n        // Toggle between opacity 0 (hidden) and 100 (visible)\r\n        const newOpacity = layer.opacity === 0 ? 100 : 0;\r\n        this.layers[index].opacity = newOpacity;\r\n        // Also update visible for UI feedback\r\n        this.layers[index].visible = newOpacity > 0;\r\n        \r\n        console.log(`Layer ${layerId} opacity toggled to:`, newOpacity);\r\n        console.log('Emitting layer-change event with:', this.layers[index]);\r\n        this.$emit(\"layer-change\", this.layers[index]);\r\n        console.log('layer-change event emitted');\r\n      }\r\n    },\r\n    \r\n    updateLayerOpacity(layerId, opacity) {\r\n      const layer = this.layers.find(l => l.id === layerId);\r\n      if (layer) {\r\n        layer.opacity = parseInt(opacity);\r\n        this.$emit(\"layer-change\", layer);\r\n      }\r\n    },\r\n    \r\n    startEditing(layerId) {\r\n      this.editingLayerId = layerId;\r\n      this.$nextTick(() => {\r\n        if (this.$refs.nameInput && this.$refs.nameInput[0]) {\r\n          this.$refs.nameInput[0].focus();\r\n          this.$refs.nameInput[0].select();\r\n        }\r\n      });\r\n    },\r\n    \r\n    stopEditing() {\r\n      this.editingLayerId = null;\r\n    },\r\n    \r\n    toggleLockLayers() {\r\n      this.layers.forEach(layer => {\r\n        layer.locked = this.lockLayers;\r\n      });\r\n      this.$emit(\"layer-change\", { lockAll: this.lockLayers });\r\n    }\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.layers-container {\r\n  background: rgba(30, 30, 30, 0.95);\r\n  border-radius: 8px;\r\n  padding: 6px;\r\n  min-width: 220px;\r\n  max-width: 260px;\r\n}\r\n\r\n.layers-header {\r\n  display: flex;\r\n  gap: 6px;\r\n  margin-bottom: 8px;\r\n  padding-bottom: 8px;\r\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.layer-btn {\r\n  flex: 1;\r\n  height: 28px;\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 6px;\r\n  color: white;\r\n  font-weight: 600;\r\n  font-size: 18px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.layer-btn:hover:not(:disabled) {\r\n  background: rgba(255, 255, 255, 0.15);\r\n}\r\n\r\n.layer-btn:disabled {\r\n  opacity: 0.3;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.layers-list {\r\n  max-height: 300px;\r\n  overflow-y: auto;\r\n  margin-bottom: 8px;\r\n}\r\n\r\n.layer-item {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border: 1px solid rgba(255, 255, 255, 0.1);\r\n  border-radius: 6px;\r\n  padding: 6px;\r\n  margin-bottom: 4px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.layer-item:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.layer-item.active {\r\n  background: var(--accent-color, #ffb000);\r\n  border-color: var(--accent-color, #ffb000);\r\n}\r\n\r\n.layer-item.active .layer-name,\r\n.layer-item.active .opacity-value {\r\n  color: black;\r\n  font-weight: 700;\r\n}\r\n\r\n.layer-visibility {\r\n  display: flex;\r\n  align-items: center;\r\n  z-index: 10;\r\n  position: relative;\r\n}\r\n\r\n.visibility-btn {\r\n  background: transparent;\r\n  border: none;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  padding: 4px;\r\n  transition: all 0.2s;\r\n  pointer-events: auto;\r\n  z-index: 11;\r\n  position: relative;\r\n  min-width: 20px;\r\n  min-height: 20px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n}\r\n\r\n.visibility-btn:hover {\r\n  transform: scale(1.1);\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border-radius: 4px;\r\n}\r\n\r\n.visibility-btn.hidden {\r\n  opacity: 0.4;\r\n}\r\n\r\n.layer-info {\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.layer-name {\r\n  color: white;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  user-select: none;\r\n}\r\n\r\n.layer-name-input {\r\n  background: rgba(0, 0, 0, 0.3);\r\n  border: 1px solid rgba(255, 255, 255, 0.3);\r\n  border-radius: 4px;\r\n  color: white;\r\n  padding: 4px 8px;\r\n  font-size: 14px;\r\n  width: 100%;\r\n}\r\n\r\n.layer-opacity {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.opacity-slider {\r\n  width: 60px;\r\n  flex: none;\r\n  height: 4px;\r\n  border-radius: 2px;\r\n  background: rgba(255, 255, 255, 0.2);\r\n  outline: none;\r\n  -webkit-appearance: none;\r\n}\r\n\r\n.opacity-slider::-webkit-slider-thumb {\r\n  -webkit-appearance: none;\r\n  appearance: none;\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  cursor: pointer;\r\n}\r\n\r\n.opacity-slider::-moz-range-thumb {\r\n  width: 10px;\r\n  height: 10px;\r\n  border-radius: 50%;\r\n  background: white;\r\n  cursor: pointer;\r\n  border: none;\r\n}\r\n\r\n.opacity-value {\r\n  color: white;\r\n  font-size: 11px;\r\n  min-width: 35px;\r\n  text-align: right;\r\n}\r\n\r\n.layer-item.active .opacity-value {\r\n  color: black;\r\n}\r\n\r\n\r\n\r\n/* Scrollbar styling */\r\n.layers-list::-webkit-scrollbar {\r\n  width: 6px;\r\n}\r\n\r\n.layers-list::-webkit-scrollbar-track {\r\n  background: rgba(255, 255, 255, 0.05);\r\n  border-radius: 3px;\r\n}\r\n\r\n.layers-list::-webkit-scrollbar-thumb {\r\n  background: rgba(255, 255, 255, 0.2);\r\n  border-radius: 3px;\r\n}\r\n\r\n.layers-list::-webkit-scrollbar-thumb:hover {\r\n  background: rgba(255, 255, 255, 0.3);\r\n}\r\n</style>\r\n","import { render } from \"./Layers.vue?vue&type=template&id=b061a208&scoped=true\"\nimport script from \"./Layers.vue?vue&type=script&lang=js\"\nexport * from \"./Layers.vue?vue&type=script&lang=js\"\n\nimport \"./Layers.vue?vue&type=style&index=0&id=b061a208&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b061a208\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window \r\n    title=\"Scene Objects\" \r\n    :initialX=\"12\" \r\n    :initialY=\"300\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"manager-container\">\r\n      <!-- Object List -->\r\n      <div class=\"section-title\">Add Shape</div>\r\n      <div class=\"shapes-row\">\r\n        <button class=\"shape-add-btn\" @click=\"addShape('plane')\" title=\"Plane\"></button>\r\n        <button class=\"shape-add-btn\" @click=\"addShape('cube')\" title=\"Cube\"></button>\r\n        <button class=\"shape-add-btn\" @click=\"addShape('sphere')\" title=\"Sphere\"></button>\r\n        <button class=\"shape-add-btn\" @click=\"addShape('cylinder')\" title=\"Cylinder\"></button>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <div class=\"section-title\">Scene Objects</div>\r\n      <div class=\"object-list\">\r\n        <div v-if=\"shapes.length === 0\" class=\"empty-state\">No objects</div>\r\n        <div \r\n          v-for=\"(obj, index) in shapes\" \r\n          :key=\"obj.uuid\"\r\n          class=\"object-item\"\r\n          :class=\"{ active: isSelected(obj) }\"\r\n          @click=\"selectShape(obj)\"\r\n        >\r\n          <span class=\"object-name\">{{ getObjectName(obj, index) }}</span>\r\n          <span class=\"object-type\">{{ getObjectType(obj) }}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"separator\"></div>\r\n\r\n      <!-- Controls -->\r\n      <div v-if=\"selectedObj\" class=\"controls-section\">\r\n        <div class=\"section-title\">Properties</div>\r\n        \r\n        <div class=\"control-row\">\r\n          <label>Color</label>\r\n          <input type=\"color\" class=\"color-picker\" :value=\"getObjectColor(selectedObj)\" @input=\"updateColor\" />\r\n        </div>\r\n        \r\n        <div class=\"control-row\">\r\n          <label>Transparency</label>\r\n           <input type=\"range\" min=\"0\" max=\"100\" :value=\"getObjectOpacity(selectedObj)\" @input=\"updateOpacity\" />\r\n        </div>\r\n        \r\n        <div class=\"control-row\">\r\n           <button class=\"delete-obj-btn\" @click=\"deleteSelectedObject\">Delete Object</button>\r\n        </div>\r\n\r\n        <div class=\"control-row\">\r\n          <label>Texture</label>\r\n          <label class=\"custom-file-upload\">\r\n            <input type=\"file\" @change=\"handleImageUpload\" accept=\".jpg,.jpeg,.png,.webp\" />\r\n            <span> Load Image</span>\r\n          </label>\r\n        </div>\r\n\r\n        <div class=\"separator\"></div>\r\n\r\n        <!-- History -->\r\n        <div class=\"history-section\">\r\n            <div class=\"history-header\">\r\n                <span class=\"section-title\">Position History</span>\r\n                <button class=\"small-btn\" @click=\"saveState\">+ Save</button>\r\n            </div>\r\n            <div class=\"history-list\">\r\n                <div v-if=\"getHistory(selectedObj).length === 0\" class=\"empty-state\">No saved states</div>\r\n                <div v-for=\"(state, sIndex) in getHistory(selectedObj)\" :key=\"sIndex\" class=\"history-item\">\r\n                    <span>{{ state.name }}</span>\r\n                    <div class=\"actions\">\r\n                        <button class=\"icon-btn\" @click=\"restoreState(state)\" title=\"Restore\"></button>\r\n                        <button class=\"icon-btn delete\" @click=\"deleteState(sIndex)\" title=\"Delete\"></button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n      </div>\r\n      <div v-else class=\"empty-selection\">\r\n        Select an object to edit properties\r\n      </div>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\nimport * as THREE from \"three\";\r\nimport { shapes, canvas } from \"./Canvas.vue\"; // shapes is reactive\r\nimport { scene, renderer, camera, vm } from \"../App.vue\";\r\n\r\nexport default {\r\n  name: \"ObjectManager\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\"],\r\n  computed: {\r\n    shapes() {\r\n        return shapes;\r\n    },\r\n    selectedObj() {\r\n        // We trigger re-render by using canvas in computed? \r\n        // canvas is an exported let, not reactive. \r\n        // We relied on Canvas.vue to make shapes reactive. \r\n        // For selection state, we might need a way to know 'canvas' changed.\r\n        // But clicking the list updates selection. \r\n        // We can track local selection or poll? \r\n        // Let's rely on user clicking our list to set 'currentSelection' locally for UI.\r\n        return this.currentSelection;\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      currentSelection: null\r\n    };\r\n  },\r\n  mounted() {\r\n      // Try to sync with initial canvas\r\n      this.currentSelection = canvas;\r\n      // Optional: Polling or event listener to sync if selection changes from viewport\r\n      this.timer = setInterval(() => {\r\n          if (canvas !== this.currentSelection) {\r\n              this.currentSelection = canvas;\r\n          }\r\n      }, 500);\r\n  },\r\n  beforeUnmount() {\r\n      clearInterval(this.timer);\r\n  },\r\n  methods: {\r\n    addShape(type) {\r\n        if (vm && vm.$refs.raycastCanvas) {\r\n            vm.$refs.raycastCanvas.addPrimitive(type);\r\n        }\r\n    },\r\n    selectShape(obj) {\r\n        this.currentSelection = obj;\r\n        if (vm && vm.$refs.raycastCanvas) {\r\n            vm.$refs.raycastCanvas.selectObject(obj);\r\n        }\r\n    },\r\n    isSelected(obj) {\r\n        return this.currentSelection === obj; // logic simplified\r\n    },\r\n    getObjectName(obj, index) {\r\n        return obj.name || `Object ${index + 1}`;\r\n    },\r\n    getObjectType(obj) {\r\n        if (obj.isGroup) return \"Group/GLB\";\r\n        if (obj.geometry) return obj.geometry.type.replace(\"Geometry\", \"\").replace(\"Buffer\", \"\");\r\n        return \"Object\";\r\n    },\r\n    getObjectMaterial(obj) {\r\n        // Find first material\r\n        let mat = null;\r\n        if (obj.material) mat = obj.material;\r\n        else {\r\n            obj.traverse(child => {\r\n                if (!mat && child.isMesh && child.material) mat = child.material;\r\n            });\r\n        }\r\n        return mat;\r\n    },\r\n    getObjectColor(obj) {\r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat && mat.color) {\r\n            return \"#\" + mat.color.getHexString();\r\n        }\r\n        return \"#ffffff\";\r\n    },\r\n    updateColor(event) {\r\n        const color = event.target.value;\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat) {\r\n             // If array of materials?\r\n            if (Array.isArray(mat)) {\r\n                mat.forEach(m => m.color.set(color));\r\n            } else {\r\n                mat.color.set(color);\r\n            }\r\n            renderer.render(scene, camera);\r\n        } else if (obj.isGroup) {\r\n             // traverse and set all\r\n             obj.traverse(child => {\r\n                 if (child.isMesh && child.material) {\r\n                     child.material.color.set(color);\r\n                 }\r\n             });\r\n             renderer.render(scene, camera);\r\n        }\r\n    },\r\n    getObjectOpacity(obj) {\r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat) {\r\n             return (mat.opacity !== undefined ? mat.opacity : 1) * 100;\r\n        }\r\n        return 100;\r\n    },\r\n    updateOpacity(event) {\r\n        const opacity = parseFloat(event.target.value) / 100;\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        const updateMatOpacity = (m) => {\r\n            m.opacity = opacity;\r\n            m.transparent = opacity < 1;\r\n            m.needsUpdate = true;\r\n        };\r\n\r\n        const mat = this.getObjectMaterial(obj);\r\n        if (mat) {\r\n            if (Array.isArray(mat)) {\r\n                mat.forEach(m => updateMatOpacity(m));\r\n            } else {\r\n                updateMatOpacity(mat);\r\n            }\r\n        } else if (obj.isGroup) {\r\n             obj.traverse(child => {\r\n                 if (child.isMesh && child.material) {\r\n                      updateMatOpacity(child.material);\r\n                 }\r\n             });\r\n        }\r\n        renderer.render(scene, camera);\r\n    },\r\n    deleteSelectedObject() {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        // Remove from scene\r\n        if (obj.parent) {\r\n            obj.parent.remove(obj);\r\n        }\r\n        \r\n        // Remove from shapes array\r\n        const index = shapes.indexOf(obj);\r\n        if (index > -1) {\r\n            shapes.splice(index, 1);\r\n        }\r\n        \r\n        // Clear selection\r\n        this.currentSelection = null;\r\n        if (vm && vm.$refs.raycastCanvas) {\r\n             vm.$refs.raycastCanvas.selectObject(null);\r\n        }\r\n        \r\n         renderer.render(scene, camera);\r\n    },\r\n    handleImageUpload(event) {\r\n         const file = event.target.files[0];\r\n        if (!file || !this.selectedObj) return;\r\n\r\n        const url = URL.createObjectURL(file);\r\n        new THREE.TextureLoader().load(url, (texture) => {\r\n            const obj = this.selectedObj;\r\n            if (obj.isGroup) {\r\n                 obj.traverse(child => {\r\n                     if (child.isMesh && child.material) {\r\n                         child.material.map = texture;\r\n                         child.material.needsUpdate = true;\r\n                         // Reset color to white so texture shows\r\n                         child.material.color.set(0xffffff);\r\n                     }\r\n                 });\r\n            } else if (obj.material) {\r\n                obj.material.map = texture;\r\n                obj.material.needsUpdate = true;\r\n                obj.material.color.set(0xffffff);\r\n            }\r\n            renderer.render(scene, camera);\r\n        });\r\n    },\r\n    getHistory(obj) {\r\n        if (!obj) return [];\r\n        if (!obj.userData.history) obj.userData.history = [];\r\n        return obj.userData.history;\r\n    },\r\n    saveState() {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        const history = this.getHistory(obj);\r\n        const state = {\r\n            name: `State ${history.length + 1}`,\r\n            position: obj.position.clone(),\r\n            quaternion: obj.quaternion.clone(),\r\n            scale: obj.scale.clone()\r\n        };\r\n        history.push(state);\r\n    },\r\n    restoreState(state) {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        \r\n        obj.position.copy(state.position);\r\n        obj.quaternion.copy(state.quaternion);\r\n        obj.scale.copy(state.scale);\r\n        renderer.render(scene, camera);\r\n    },\r\n    deleteState(index) {\r\n        const obj = this.selectedObj;\r\n        if (!obj) return;\r\n        obj.userData.history.splice(index, 1);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.manager-container {\r\n  background: rgba(30, 30, 30, 0.95);\r\n  backdrop-filter: blur(10px);\r\n  border-radius: 8px;\r\n  padding: 10px;\r\n  min-width: 250px;\r\n  color: white;\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 10px;\r\n  max-height: 80vh; \r\n  overflow: hidden;\r\n}\r\n\r\n.section-title {\r\n    font-size: 11px;\r\n    text-transform: uppercase;\r\n    opacity: 0.6;\r\n    font-weight: 800;\r\n    letter-spacing: 0.5px;\r\n    margin-bottom: 4px;\r\n}\r\n\r\n\r\n.shapes-row {\r\n    display: flex;\r\n    gap: 8px;\r\n    justify-content: space-around;\r\n}\r\n\r\n.shape-add-btn {\r\n    background: rgba(255,255,255,0.1);\r\n    border: 1px solid rgba(255,255,255,0.2);\r\n    border-radius: 4px;\r\n    width: 32px;\r\n    height: 32px;\r\n    cursor: pointer;\r\n    font-size: 16px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.shape-add-btn:hover {\r\n    background: rgba(255,255,255,0.2);\r\n    transform: scale(1.1);\r\n}\r\n\r\n.object-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 4px;\r\n    max-height: 150px;\r\n    overflow-y: auto;\r\n}\r\n\r\n.object-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 6px 8px;\r\n    background: rgba(255,255,255,0.05);\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 13px;\r\n    border: 1px solid transparent;\r\n}\r\n\r\n.object-item:hover {\r\n    background: rgba(255,255,255,0.1);\r\n}\r\n\r\n.object-item.active {\r\n    background: rgba(255, 176, 0, 0.2);\r\n    border-color: rgba(255, 176, 0, 0.5);\r\n    color: #ffb000;\r\n}\r\n\r\n.object-type {\r\n    font-size: 10px;\r\n    opacity: 0.5;\r\n    background: rgba(0,0,0,0.2);\r\n    padding: 2px 4px;\r\n    border-radius: 4px;\r\n}\r\n\r\n.separator {\r\n    height: 1px;\r\n    background: rgba(255,255,255,0.1);\r\n    width: 100%;\r\n}\r\n\r\n.controls-section {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.control-row {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    font-size: 13px;\r\n}\r\n\r\n.color-picker {\r\n    width: 40px;\r\n    height: 24px;\r\n    border: none;\r\n    padding: 0;\r\n    background: none;\r\n    cursor: pointer;\r\n}\r\n\r\n.custom-file-upload {\r\n    border: 1px solid rgba(255,255,255,0.2);\r\n    border-radius: 4px;\r\n    padding: 4px 8px;\r\n    font-size: 11px;\r\n    cursor: pointer;\r\n    background: rgba(255,255,255,0.05);\r\n}\r\n\r\n.delete-obj-btn {\r\n    width: 100%;\r\n    padding: 6px;\r\n    background: rgba(255, 50, 50, 0.2);\r\n    border: 1px solid rgba(255, 50, 50, 0.4);\r\n    color: #ffcccc;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 12px;\r\n    margin-top: 8px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.delete-obj-btn:hover {\r\n    background: rgba(255, 50, 50, 0.4);\r\n}\r\n.custom-file-upload input {\r\n    display: none;\r\n}\r\n.custom-file-upload:hover {\r\n    background: rgba(255,255,255,0.1);\r\n}\r\n\r\n.empty-state, .empty-selection {\r\n    text-align: center;\r\n    opacity: 0.5;\r\n    font-size: 12px;\r\n    padding: 10px;\r\n}\r\n\r\n.history-section {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.history-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n}\r\n\r\n.small-btn {\r\n    font-size: 10px;\r\n    padding: 2px 6px;\r\n    background: #ffb000;\r\n    color: black;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-weight: bold;\r\n}\r\n\r\n.history-list {\r\n    max-height: 120px;\r\n    overflow-y: auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 4px;\r\n}\r\n\r\n.history-item {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 4px 8px;\r\n    background: rgba(0,0,0,0.2);\r\n    border-radius: 4px;\r\n    font-size: 12px;\r\n}\r\n\r\n.actions {\r\n    display: flex;\r\n    gap: 4px;\r\n}\r\n\r\n.icon-btn {\r\n    background: transparent;\r\n    border: 1px solid rgba(255,255,255,0.1);\r\n    color: white;\r\n    width: 20px;\r\n    height: 20px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 3px;\r\n    cursor: pointer;\r\n    font-size: 10px;\r\n}\r\n.icon-btn:hover {\r\n    background: rgba(255,255,255,0.1);\r\n}\r\n.icon-btn.delete:hover {\r\n    background: rgba(255,50,50,0.3);\r\n}\r\n\r\n/* Scrollbars */\r\n.object-list::-webkit-scrollbar, .history-list::-webkit-scrollbar {\r\n    width: 4px;\r\n}\r\n.object-list::-webkit-scrollbar-thumb, .history-list::-webkit-scrollbar-thumb {\r\n    background: rgba(255,255,255,0.2);\r\n    border-radius: 2px;\r\n}\r\n</style>\r\n","import { render } from \"./ObjectManager.vue?vue&type=template&id=9d553bfc&scoped=true\"\nimport script from \"./ObjectManager.vue?vue&type=script&lang=js\"\nexport * from \"./ObjectManager.vue?vue&type=script&lang=js\"\n\nimport \"./ObjectManager.vue?vue&type=style&index=0&id=9d553bfc&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9d553bfc\"]])\n\nexport default __exports__","<template>\n  <div\n    class=\"transform-toolbar\"\n    v-bind:style=\"{\n        top: posTop + 'px',\n        left: posLeft + 'px'\n    }\"\n    v-bind:class=\"{ hide: !display }\"\n    @mousedown.stop=\"startDrag\"\n    @touchstart.stop=\"startDrag\"\n  >\n    <div class=\"toolbar-title\" style=\"margin-bottom: 8px; font-size: 11px; opacity: 0.5; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; cursor: move;\">Transformation</div>\n    <div class=\"transform-modes\">\n      <span class=\"mode-btn\" @click=\"setMode('combined')\" :class=\"{ active: mode === 'combined' }\">\n        <img v-if=\"mode === 'combined'\" src=\"@/assets/icons/translate.svg\" class=\"icon-active\"/>\n        <img v-else src=\"@/assets/icons/translate.svg\" class=\"icon-inactive\"/>\n        Move & Rotate\n      </span>\n      <span class=\"mode-btn\" @click=\"setMode('scale')\" :class=\"{ active: mode === 'scale' }\">\n        <img v-if=\"mode === 'scale'\" src=\"@/assets/icons/scale.svg\" class=\"icon-active\"/>\n        <img v-else src=\"@/assets/icons/scale.svg\" class=\"icon-inactive\"/>\n        Scale\n      </span>\n    </div>\n\n    <div class=\"duplicate-controls\" v-bind:class=\"{ hide: selectedTool == 'model' }\">\n        <div class=\"offset-group\">\n             <button class=\"dup-btn\" @click=\"duplicate\" style=\"width: 100%; padding: 8px;\">\n                 Duplicate Selection\n             </button>\n        </div>\n\n        <div class=\"offset-group\" style=\"border-top: 1px solid rgba(255,255,255,0.1); padding-top: 8px;\">\n            <label style=\"font-size: 10px; opacity: 0.7;\">Position (Read-Only)</label>\n            <div class=\"inputs\">\n                <input :value=\"selectionPosition ? selectionPosition.x.toFixed(2) : 0\" readonly placeholder=\"X\" type=\"number\" />\n                <input :value=\"selectionPosition ? selectionPosition.y.toFixed(2) : 0\" readonly placeholder=\"Y\" type=\"number\" />\n                <input :value=\"selectionPosition ? selectionPosition.z.toFixed(2) : 0\" readonly placeholder=\"Z\" type=\"number\" />\n            </div>\n        </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport { select } from \"./select.js\";\nimport { scene, renderer, camera } from \"../App.vue\";\nimport * as THREE from 'three';\n\nexport default {\n  name: \"TransformToolbar\",\n  props: {\n    top: Number,\n    left: Number,\n    location: String,\n    display: Boolean,\n    selectedTool: String,\n    selectionPosition: Object,\n  },\n  data() {\n    return {\n      mode: \"combined\",\n      posTop: 0,\n      posLeft: 0,\n      offset: { x: 1, y: 0, z: 0 },\n      copies: 1,\n      isDragging: false,\n      dragOffset: { x: 0, y: 0 }\n    };\n  },\n  methods: {\n    startDrag(e) {\n      if (e.target.closest('input') || e.target.closest('.mode-btn') || e.target.closest('button')) return;\n      this.isDragging = true;\n      const clientX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;\n      const clientY = e.type === 'touchstart' ? e.touches[0].clientY : e.clientY;\n      const rect = this.$el.getBoundingClientRect();\n      this.dragOffset.x = clientX - rect.left;\n      this.dragOffset.y = clientY - rect.top;\n      \n      document.addEventListener('mousemove', this.doDrag);\n      document.addEventListener('touchmove', this.doDrag);\n      document.addEventListener('mouseup', this.stopDrag);\n      document.addEventListener('touchend', this.stopDrag);\n    },\n    doDrag(e) {\n      if (!this.isDragging) return;\n      // Prevent default to stop scrolling on touch\n      if (e.type === 'touchmove') e.preventDefault();\n      \n      const clientX = e.type === 'touchmove' ? e.touches[0].clientX : e.clientX;\n      const clientY = e.type === 'touchmove' ? e.touches[0].clientY : e.clientY;\n      \n      let newLeft = clientX - this.dragOffset.x;\n      let newTop = clientY - this.dragOffset.y;\n      \n      // Keep within screen bounds\n      newLeft = Math.max(0, Math.min(window.innerWidth - this.$el.offsetWidth, newLeft));\n      newTop = Math.max(0, Math.min(window.innerHeight - this.$el.offsetHeight, newTop));\n      \n      this.posLeft = newLeft;\n      this.posTop = newTop;\n    },\n    stopDrag() {\n      this.isDragging = false;\n      document.removeEventListener('mousemove', this.doDrag);\n      document.removeEventListener('touchmove', this.doDrag);\n      document.removeEventListener('mouseup', this.stopDrag);\n      document.removeEventListener('touchend', this.stopDrag);\n    },\n    duplicate: function () {\n      select.s.duplicate();\n    },\n    duplicateOffset: function() {\n        console.log(\"Duplicate Offset Triggered\", this.offset, this.copies);\n        if(select.s) {\n            let parseVal = (val) => {\n                if (typeof val === 'number') return val;\n                if (typeof val === 'string') return parseFloat(val.replace(',', '.')) || 0;\n                return 0;\n            };\n            \n            let x = parseVal(this.offset.x);\n            let y = parseVal(this.offset.y);\n            let z = parseVal(this.offset.z);\n            let copies = parseInt(this.copies) || 1;\n            \n            console.log(\"Applying Array:\", {x,y,z}, copies);\n            select.s.duplicate(new THREE.Vector3(x, y, z), copies);\n        } else {\n            console.warn(\"No selection active for duplicate\");\n        }\n    },\n    setMode(newMode) {\n        this.mode = newMode;\n    }\n  },\n  watch: {\n    mode: function (val) {\n      if (this.selectedTool == \"select\" && select.s && select.s.controls) {\n        select.s.controls.mode = val;\n        //this maintains the selection from the last used transformation\n        this.mode = val;\n        select.transformMode = val;\n        select.s.helper.update();\n      }\n      if (this.selectedTool == \"model\") {\n        let controls = scene.getObjectByName(\"canvasTransformControls\");\n        console.log(controls);\n        this.mode = val;\n        if(controls) controls.mode = this.mode;\n        // In combined mode, standard transform controls might need specific setup?\n        // But our custom TransformControls handles 'combined' (showing both translate/rotate).\n        renderer.render(scene, camera);\n      }\n    },\n    display: function (val) {\n      if (val) {\n        //this maintains the selection from the last used transformation\n        if (this.selectedTool == \"select\" && select.s && select.s.controls) {\n          select.s.controls.mode = this.mode; // Use the new 'mode' property\n        }\n        if (this.selectedTool == \"model\") {\n          let controls = scene.getObjectByName(\"canvasTransformControls\");\n          if(controls) controls.mode = this.mode; // Use the new 'mode' property\n        }\n      }\n    },\n    left: function (val) {\n      if (this.isDragging) return;\n      // If fixed, center it. The 'val' passed from select.js is already centered.\n      // But we adjust for width (240px / 2 = 120)\n       this.posLeft = val - 120;\n    },\n    top: function (val) {\n      if (this.isDragging) return;\n      // If fixed, use value directly\n      this.posTop = val;\n    },\n  },\n  mounted() {},\n};\n</script>\n\n<style scoped>\n.transform-toolbar {\n  padding: 8px;\n  position: absolute;\n  z-index: 999;\n  background-color: rgba(30,30,30,0.9);\n  color: white;\n  width: 240px;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n  border: 1px solid rgba(255,255,255,0.1);\n}\n\n.transform-modes {\n  display: flex;\n  gap: 12px;\n  margin-bottom: 8px;\n}\n\n.mode-btn {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    padding: 6px 12px;\n    background: rgba(255, 255, 255, 0.1);\n    border-radius: 6px;\n    cursor: pointer;\n    font-size: 12px;\n    color: #1c1c1e;\n    border: 1px solid transparent;\n    transition: all 0.2s;\n}\n\n.mode-btn:hover {\n    background: rgba(0, 0, 0, 0.05);\n}\n\n.mode-btn.active {\n    background: #007aff;\n    color: white;\n}\n\n.mode-btn img {\n    width: 16px;\n    height: 16px;\n}\n\n.mode-btn.active img {\n    filter: brightness(0) invert(1);\n}\n\n.duplicate-controls {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.offset-group {\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n}\n\n.inputs {\n    display: flex;\n    gap: 4px;\n}\n\n.inputs input {\n    width: 100%;\n    background: rgba(0,0,0,0.5);\n    border: 1px solid rgba(255,255,255,0.2);\n    color: white;\n    padding: 2px 4px;\n    border-radius: 4px;\n    font-size: 12px;\n}\n\n.dup-btn {\n    background: rgba(255,255,255,0.1);\n    border: none;\n    color: white;\n    padding: 4px 8px;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 12px;\n    transition: background 0.2s;\n}\n\n.dup-btn:hover {\n    background: rgba(255,255,255,0.2);\n}\n\n.hide {\n  display: none;\n}\n</style>","import { render } from \"./TransformToolbar.vue?vue&type=template&id=555e1d44&scoped=true\"\nimport script from \"./TransformToolbar.vue?vue&type=script&lang=js\"\nexport * from \"./TransformToolbar.vue?vue&type=script&lang=js\"\n\nimport \"./TransformToolbar.vue?vue&type=style&index=0&id=555e1d44&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-555e1d44\"]])\n\nexport default __exports__","<template>\r\n  <draggable-window\r\n    title=\"2D Shapes\"\r\n    :initialX=\"100\"\r\n    :initialY=\"140\"\r\n    :visible=\"visible\"\r\n    :reopenTrigger=\"reopenTrigger\"\r\n    :is-open=\"isOpen\"\r\n    @close=\"$emit('close')\"\r\n  >\r\n    <div class=\"shapes-grid\">\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('line')\" @mousedown.stop @mouseup.stop title=\"Line\">\r\n         <span class=\"icon\">/</span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('triangle')\" @mousedown.stop @mouseup.stop title=\"Triangle\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n       <button class=\"shape-btn\" @click.stop=\"createShape('square')\" @mousedown.stop @mouseup.stop title=\"Square\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('circle')\" @mousedown.stop @mouseup.stop title=\"Circle\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('ellipse')\" @mousedown.stop @mouseup.stop title=\"Ellipse\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n      <button class=\"shape-btn\" @click.stop=\"createShape('hexagon')\" @mousedown.stop @mouseup.stop title=\"Hexagon\">\r\n         <span class=\"icon\"></span>\r\n      </button>\r\n    </div>\r\n  </draggable-window>\r\n</template>\r\n\r\n<script>\r\nimport DraggableWindow from \"./DraggableWindow.vue\";\r\nimport { canvas } from \"./Canvas.vue\";\r\nimport * as THREE from \"three\";\r\nimport { camera } from \"../App.vue\";\r\n\r\nexport default {\r\n  name: \"TwoDShapes\",\r\n  components: { DraggableWindow },\r\n  props: {\r\n    visible: Boolean,\r\n    reopenTrigger: Number,\r\n    isOpen: Boolean,\r\n  },\r\n  emits: [\"close\", \"add-shape\"],\r\n  methods: {\r\n    getCenterPoint() {\r\n        const raycaster = new THREE.Raycaster();\r\n        raycaster.setFromCamera(new THREE.Vector2(0, 0), camera);\r\n        \r\n        let target = canvas;\r\n        // If canvas is not directly available (e.g. not exported properly or not mounted), fallback\r\n        if (!target) {\r\n             const vec = new THREE.Vector3(0, 0, -10);\r\n             vec.applyQuaternion(camera.quaternion);\r\n             vec.add(camera.position);\r\n             return { point: vec, normal: new THREE.Vector3(0, 0, 1) };\r\n        }\r\n\r\n        const intersects = raycaster.intersectObject(target, true); // true for recursive if canvas is group\r\n        \r\n        if (intersects.length > 0) {\r\n            return { point: intersects[0].point, normal: intersects[0].face.normal };\r\n        }\r\n        \r\n        // Fallback if no hit\r\n        const vec = new THREE.Vector3(0, 0, -10);\r\n        vec.applyQuaternion(camera.quaternion);\r\n        vec.add(camera.position);\r\n        return { point: vec, normal: new THREE.Vector3(0, 0, 1) };\r\n    },\r\n    createShape(type) {\r\n      const { point: center, normal } = this.getCenterPoint();\r\n      const size = 1.0; \r\n      \r\n      const shape = new THREE.Shape();\r\n      \r\n      switch (type) {\r\n        case 'line': {\r\n            // Create a thin rectangle for the line\r\n            const thickness = 0.05;\r\n            shape.moveTo(-size, -thickness);\r\n            shape.lineTo(size, -thickness);\r\n            shape.lineTo(size, thickness);\r\n            shape.lineTo(-size, thickness);\r\n            shape.lineTo(-size, -thickness);\r\n            break;\r\n        }\r\n        case 'triangle':\r\n            shape.moveTo(size * Math.cos(-Math.PI/2), size * Math.sin(-Math.PI/2));\r\n            shape.lineTo(size * Math.cos(Math.PI/6), size * Math.sin(Math.PI/6));\r\n            shape.lineTo(size * Math.cos(5*Math.PI/6), size * Math.sin(5*Math.PI/6));\r\n            shape.closePath();\r\n            break;\r\n        case 'square':\r\n             shape.moveTo(-size, -size);\r\n             shape.lineTo(size, -size);\r\n             shape.lineTo(size, size);\r\n             shape.lineTo(-size, size);\r\n             shape.closePath();\r\n            break;\r\n        case 'circle':\r\n             shape.absarc(0, 0, size, 0, Math.PI * 2, false);\r\n            break;\r\n        case 'ellipse':\r\n             shape.ellipse(0, 0, size * 1.5, size * 0.75, 0, Math.PI * 2, false, 0);\r\n            break;\r\n        case 'hexagon':\r\n              for (let i = 0; i < 6; i++) {\r\n                const angle = (i * 2 * Math.PI) / 6;\r\n                const x = size * Math.cos(angle);\r\n                const y = size * Math.sin(angle);\r\n                if (i === 0) shape.moveTo(x, y);\r\n                else shape.lineTo(x, y);\r\n            }\r\n            shape.closePath();\r\n            break;\r\n      }\r\n      \r\n      const geometry = new THREE.ShapeGeometry(shape);\r\n      const mesh = new THREE.Mesh(geometry); // Material will be assigned by Canvas.vue\r\n      \r\n      // Orientation and Position\r\n      mesh.quaternion.copy(camera.quaternion);\r\n      \r\n      // Apply offset to center\r\n      let offset = normal.clone().multiplyScalar(0.05);\r\n      let finalCenter = center.clone().add(offset);\r\n      mesh.position.copy(finalCenter);\r\n      \r\n      mesh.name = type.charAt(0).toUpperCase() + type.slice(1);\r\n      \r\n      this.$emit('add-shape', mesh); // Delegate to App.vue\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.shapes-grid {\r\n  display: grid;\r\n  grid-template-columns: repeat(3, 1fr);\r\n  gap: 8px;\r\n  padding: 8px;\r\n}\r\n\r\n.shape-btn {\r\n  width: 40px;\r\n  height: 40px;\r\n  background: rgba(255, 255, 255, 0.1);\r\n  border: 1px solid rgba(255, 255, 255, 0.2);\r\n  border-radius: 4px;\r\n  color: white;\r\n  font-size: 20px;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.shape-btn:hover {\r\n  background: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.icon {\r\n   line-height: 1;\r\n}\r\n</style>\r\n","import { render } from \"./TwoDShapes.vue?vue&type=template&id=4262662a&scoped=true\"\nimport script from \"./TwoDShapes.vue?vue&type=script&lang=js\"\nexport * from \"./TwoDShapes.vue?vue&type=script&lang=js\"\n\nimport \"./TwoDShapes.vue?vue&type=style&index=0&id=4262662a&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4262662a\"]])\n\nexport default __exports__","import { render } from \"./App.vue?vue&type=template&id=1ad9cd1e\"\nimport script from \"./App.vue?vue&type=script&lang=js\"\nexport * from \"./App.vue?vue&type=script&lang=js\"\n\nimport \"./App.vue?vue&type=style&index=0&id=1ad9cd1e&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Usuario\\\\Downloads\\\\Nueva carpeta\\\\Original - penzil pro\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","module.exports = __webpack_public_path__ + \"img/Canvas-Cube.b03590d5.svg\";","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"img/snapOn.aa8b12b1.svg\";","import { createApp } from 'vue'\nimport App from './App.vue'\n\ncreateApp(App).mount('#app')\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ShapeSelector.vue?vue&type=style&index=0&id=29b5f1dc&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SceneSettings.vue?vue&type=style&index=0&id=5736386b&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportHTML.vue?vue&type=style&index=0&id=302ae2fb&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/draw.5c69c24e.svg\";","module.exports = __webpack_public_path__ + \"img/checkbox.8ab59ebe.svg\";","module.exports = \"data:image/png;base64,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\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=1ad9cd1e&lang=css\"","module.exports = \"data:image/png;base64,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\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UndoRedo.vue?vue&type=style&index=0&id=0bd31b88&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/redo.13ba164e.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Feedback.vue?vue&type=style&index=0&id=1af5b4e9&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Survey.vue?vue&type=style&index=0&id=57022cc6&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Welcome.vue?vue&type=style&index=0&id=4d550b7e&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DraggableWindow.vue?vue&type=style&index=0&id=8e2218ae&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/checkbox-checked.c2c485d4.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Tutorial.vue?vue&type=style&index=0&id=6ea82b80&scoped=true&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LineSliders.vue?vue&type=style&index=0&id=209b775a&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ToggleWindow.vue?vue&type=style&index=0&id=50198f32&scoped=true&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./BrushLibrary.vue?vue&type=style&index=0&id=5811f743&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/unlockControls.2e514317.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ColorPalette.vue?vue&type=style&index=0&id=1576e0cc&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Custom.b03590d5.svg\";","module.exports = __webpack_public_path__ + \"img/scale.618c4c29.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Input.vue?vue&type=style&index=0&id=1fc15250&lang=css\"","module.exports = __webpack_public_path__ + \"img/share.69997eee.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportForProcreate.vue?vue&type=style&index=0&id=d410ddd2&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/reset.4080ce3d.svg\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ExportGLB.vue?vue&type=style&index=0&id=e1688084&scoped=true&lang=css\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAD7CAYAAABDsImYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAbCSURBVHgB7d37UdRqHMfhcOYUoBWoFagVeGlAxwa8FOCtAPU0IFQg2oCXBlArUBsQbUC0AXL2lxkdWLLLIiyQfJ9nJn8I7LI489nkffMmu9K27bMGGLWVSehtA4xZ+08DjJ7QIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIYDQIcC/DfyFnz9/Nm/fvm2+f/++6+vnzp1rrl692pw/f77h9BA6B7K5udk8fvy4i7zPyspK8/r1a6GfMkJnYRX59evXm2/fvs39uTNnzjScLkJfops3bzZfvnzZ8/UKZmjatl0o8iL000foS/Tr16+FwhiCDx8+LPy3CP30MevOvmpv/urVq97v1cTb+/fvu5/Z2tpqNjY2jM9PIXt0FjI9u14uXLjQRf5b7ckrfE4fobOQz58/7/p3za4/ePBgocfWm8G9e/f2PN7e//gInYXUefNpBxmLT4/vK3SOjzE6++qLnGEROvsS+vAJHQIYo49Y7Yl/741NemUT+ohU1HW+u9ah1yz59CH3pUuXutV6t2/fnht+Pf7du3e7nndanTd/+fJlt5Bmp3rujx8/7pp8m/X4R48e9U7ora6uWnRz1FqWZnJOua3/4untqG1tbbXPnj1rJ3H0/r6+rX5+lvreos+zc5vMpLeT+Gf+3Ys+x+bmZsuR2rZHH7jac167du3AS20nMXeLYF68eNEwfibjBmy/yOvwd94h8Pr6enfJKeMn9AHri7zCfvr0abfufOdWUfeNy2s8PD3OZoRalmaZY/S+cfQk5Lnj2xrL972m+to8X79+nTkeX8TGxoax+MnatkcfoJrFrhnvaTXunjebXnv7N2/e7DmcP8glqAyT0AeoTn9Nh1mB16mt/VTkdYpt2s7TaYyP0Aeo735tffHO0rfX77sTDuPh9NoA9V0bvra21m1/y4TcuNmjD5CLTDgoodPx5jFuDt1HbtEbPNSNLBkvoQ/QxYsX98y637lzp1soA32EPkCXL1/eczqswncpKrMYow/QlStX9nytZs133pF1nvoAiVpw07Ztc5LMCxwfe/QT8Def1HL27Nk/K9rqlsq1zn067LrTat1ZtW7DPMunT5+aW7dudUcAde78yZMn3XMvU9+FNfUmU0cldY08x6BlaQ5zXXazz/XjtU687/rzWu++vr7e/vjxo93e3v6z1b/71sdP3hT2XXN+2LXufY+vrV5/PUe9ttrq59bW1qyBP3rbQl+iZYZeVldX5z5msrfsXkPF38y50cPdu3fn/h2HDb3eaBa9KYaLXZbCRS1D9vDhw+5Cllmn0Op2UvMuWKnH1TDg+fPnzTLV76nXyskR+sDVKbX6PPIalx/kQxF+f9JKjemP4/5s9+/fnzt3wHIJfYkqpqPa5qkLWiaH191toerUW99jfn+tJt4mh+pd4HXTicP+LYuq31u/88aNG/u+Po7eSh3AN4xKHarXYfvOK9Jqr10LbWqW+6TvsDrr9dU6gDp16A6wR64VOoxf69AdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAggdAvw72f5rgDFr/wfUvvTr7Qp/nwAAAABJRU5ErkJggg==\"","module.exports = __webpack_public_path__ + \"img/lockControls.990f22f9.svg\";","module.exports = __webpack_public_path__ + \"img/snapOff.219ff8f1.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./VideoExportPreview.vue?vue&type=style&index=0&id=5584fdcf&lang=css\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TransformToolbar.vue?vue&type=style&index=0&id=555e1d44&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Cursor.b610471e.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SymmetrySettings.vue?vue&type=style&index=0&id=04aa6b76&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/Canvas-Cylinder.4ab10120.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./LineSettings.vue?vue&type=style&index=0&id=08400330&lang=css\"","module.exports = __webpack_public_path__ + \"img/showCanvas.a743c18d.svg\";","module.exports = __webpack_public_path__ + \"img/erase.c0bec69e.svg\";","module.exports = __webpack_public_path__ + \"img/View_in_AR.c0870bd8.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./TwoDShapes.vue?vue&type=style&index=0&id=4262662a&scoped=true&lang=css\"","module.exports = __webpack_public_path__ + \"img/translate.49804646.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ViewportCube.vue?vue&type=style&index=0&id=c6f5d5b0&scoped=true&lang=css\""],"sourceRoot":""}